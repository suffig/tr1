import{r as o,j as e,L as D,z as c}from"./index-Rev3OGod.js";import{u as v,a as I}from"./useSupabase-CtffukN8.js";function B(){const[m,y]=o.useState("aek"),[S,d]=o.useState(!1),[n,p]=o.useState(null),[a,i]=o.useState({name:"",team:"AEK",position:"ST",goals:0}),{data:r,loading:k,error:E,refetch:x}=v("players","*"),{data:b}=v("finances","*"),{insert:R,update:T,remove:A,loading:l}=I("players"),g={TH:0,IV:1,LV:2,RV:3,ZDM:4,ZM:5,ZOM:6,LM:7,RM:8,LF:9,RF:10,ST:11},f=["TH","IV","LV","RV","ZDM","ZM","ZOM","LM","RM","LF","RF","ST"],j=()=>{i({name:"",team:"AEK",position:"ST",goals:0}),p(null),d(!1)},L=async s=>{s.preventDefault();try{n?(await T(a,n.id),c.success("Spieler erfolgreich aktualisiert!")):(await R(a),c.success("Spieler erfolgreich hinzugef√ºgt!")),j(),x()}catch(t){console.error("Error saving player:",t),c.error(`Fehler beim ${n?"Aktualisieren":"Hinzuf√ºgen"} des Spielers`)}},M=s=>{i({name:s.name,team:s.team,position:s.position,goals:s.goals||0}),p(s),d(!0)},C=async s=>{if(confirm("Sind Sie sicher, dass Sie diesen Spieler l√∂schen m√∂chten?"))try{await A(s),c.success("Spieler erfolgreich gel√∂scht!"),x()}catch(t){console.error("Error deleting player:",t),c.error("Fehler beim L√∂schen des Spielers")}},K=s=>{i({...a,team:s}),d(!0)},w=s=>s==="TH"?"inline-block px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800 border border-green-200":["IV","LV","RV","ZDM"].includes(s)?"inline-block px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200":["ZM","ZOM","LM","RM"].includes(s)?"inline-block px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200":["LF","RF","ST"].includes(s)?"inline-block px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 border border-red-200":"inline-block px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200",u=s=>r?r.filter(t=>t.team===s).sort((t,h)=>(g[t.position]||99)-(g[h.position]||99)):[],N=s=>{if(!b)return 0;const t=b.find(h=>h.team===s);return(t==null?void 0:t.balance)||0},P=s=>{const t="modern-card";return s==="AEK"?`${t} border-l-4 border-blue-400`:s==="Real"?`${t} border-l-4 border-purple-400`:s==="Ehemalige"?`${t} border-l-4 border-slate-400`:t},F=s=>s==="AEK"?"text-blue-600":s==="Real"?"text-purple-600":s==="Ehemalige"?"text-slate-600":"text-gray-600";if(k)return e.jsx(D,{message:"Lade Kader..."});if(E)return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-accent-red mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-2xl"})}),e.jsx("p",{className:"text-text-muted mb-4",children:"Fehler beim Laden des Kaders"}),e.jsx("button",{onClick:x,className:"btn-primary",children:"Erneut versuchen"})]});const O=u("AEK"),V=u("Real"),Z=u("Ehemalige"),z=[{id:"aek",name:"AEK",displayName:"AEK Athen",players:O,balance:N("AEK"),icon:"üîµ"},{id:"real",name:"Real",displayName:"Real Madrid",players:V,balance:N("Real"),icon:"üü£"},{id:"ehemalige",name:"Ehemalige",displayName:"Ehemalige",players:Z,balance:0,icon:"‚ö™"}];return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Kader-√úbersicht"}),e.jsxs("p",{className:"text-text-muted",children:[(r==null?void 0:r.length)||0," Spieler insgesamt"]})]}),e.jsxs("button",{onClick:()=>d(!0),className:"btn-primary flex items-center",disabled:l,children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neuer Spieler"]})]}),S&&e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:n?"Spieler bearbeiten":"Neuen Spieler hinzuf√ºgen"}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Name"}),e.jsx("input",{type:"text",value:a.name,onChange:s=>i({...a,name:s.target.value}),className:"form-input",placeholder:"Spielername",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team"}),e.jsxs("select",{value:a.team,onChange:s=>i({...a,team:s.target.value}),className:"form-input",children:[e.jsx("option",{value:"AEK",children:"AEK"}),e.jsx("option",{value:"Real",children:"Real"}),e.jsx("option",{value:"Ehemalige",children:"Ehemalige"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Position"}),e.jsx("select",{value:a.position,onChange:s=>i({...a,position:s.target.value}),className:"form-input",children:f.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Tore"}),e.jsx("input",{type:"number",value:a.goals,onChange:s=>i({...a,goals:parseInt(s.target.value)||0}),className:"form-input",min:"0"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:l,className:"btn-primary disabled:opacity-50",children:l?"Speichert...":n?"Aktualisieren":"Hinzuf√ºgen"}),e.jsx("button",{type:"button",onClick:j,className:"btn-secondary",children:"Abbrechen"})]})]})]}),e.jsx("div",{className:"space-y-4",children:z.map(s=>e.jsxs("div",{className:P(s.name),children:[e.jsx("button",{onClick:()=>y(m===s.id?null:s.id),className:"w-full text-left p-4 focus:outline-none",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:s.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold text-lg ${F(s.name)}`,children:s.displayName}),e.jsxs("p",{className:"text-sm text-text-muted",children:[s.players.length," Spieler",s.balance!==0&&e.jsxs("span",{className:"ml-2",children:["‚Ä¢ Balance: ‚Ç¨",s.balance.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:s.players.length}),e.jsx("i",{className:`fas fa-chevron-${m===s.id?"up":"down"} transition-transform`})]})]})}),m===s.id&&e.jsxs("div",{className:"px-4 pb-4 border-t border-border-light mt-4 pt-4",children:[s.players.length>0?e.jsx("div",{className:"grid gap-3",children:s.players.map(t=>e.jsx("div",{className:"bg-bg-tertiary rounded-lg p-3 hover:bg-bg-secondary transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:w(t.position),children:t.position}),t.staerke&&e.jsxs("span",{className:"text-xs text-text-muted",children:["St√§rke: ",t.staerke]})]})]})})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>M(t),className:"text-text-muted hover:text-primary-green transition-colors p-1",title:"Bearbeiten",disabled:l,children:e.jsx("i",{className:"fas fa-edit text-sm"})}),e.jsx("button",{onClick:()=>C(t.id),className:"text-text-muted hover:text-accent-red transition-colors p-1",title:"L√∂schen",disabled:l,children:e.jsx("i",{className:"fas fa-trash text-sm"})})]})]})},t.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:s.icon}),e.jsxs("p",{className:"text-text-muted",children:["Keine Spieler in ",s.displayName]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-border-light",children:e.jsxs("button",{onClick:()=>K(s.name),className:"w-full btn-secondary text-sm py-2",disabled:l,children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Spieler zu ",s.displayName," hinzuf√ºgen"]})})]})]},s.id))}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:(r==null?void 0:r.length)||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Spieler"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:f.length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Positionen"})]})]})]})}export{B as default};
