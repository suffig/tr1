import{s as b,r as A,j as e,z}from"./index-CMY582Iw.js";import{u as C}from"./useSupabase-w2RECFox.js";class F{static async submitMatch(d){const{date:a,teama:t="AEK",teamb:c="Real",goalsa:n,goalsb:u,goalslista:h=[],goalslistb:v=[],ownGoalsA:i=0,ownGoalsB:l=0,yellowa:p=0,reda:N=0,yellowb:g=0,redb:r=0,manofthematch:j,editId:f=null}=d;try{const{prizeaek:S,prizereal:E,winner:s,loser:x}=this.calculatePrizeMoney(n,u,p,N,g,r);f&&await this.deleteMatchTransactions(f);const o=[...h],m=[...v];for(let T=0;T<i;T++)m.push("Eigentore_AEK");for(let T=0;T<l;T++)o.push("Eigentore_Real");const w={date:a,teama:t,teamb:c,goalsa:parseInt(n)||0,goalsb:parseInt(u)||0,goalslista:JSON.stringify(o),goalslistb:JSON.stringify(m),yellowa:parseInt(p)||0,reda:parseInt(N)||0,yellowb:parseInt(g)||0,redb:parseInt(r)||0,manofthematch:j||null,prizeaek:S,prizereal:E},k=await b.insert("matches",w);if(k.error)throw new Error(`Match insert failed: ${k.error.message}`);const B=k.data.id,K=new Date().toISOString().slice(0,10);return o.length>0&&await this.updatePlayersGoals(o.filter(T=>!T.startsWith("Eigentore_")),"AEK"),m.length>0&&await this.updatePlayersGoals(m.filter(T=>!T.startsWith("Eigentore_")),"Real"),j&&await this.updatePlayerOfTheMatchStats(j),await this.processFinancialTransactions({matchId:B,date:K,prizeaek:S,prizereal:E,manofthematch:j,winner:s,loser:x}),await this.decrementBansAfterMatch(),{success:!0,matchId:B,message:`Match ${t} vs ${c} (${n}:${u}) erfolgreich hinzugefügt`}}catch(S){throw console.error("Error in submitMatch:",S),new Error(`Fehler beim Speichern des Matches: ${S.message}`)}}static calculatePrizeMoney(d,a,t,c,n,u){let h=0,v=0,i=null,l=null;return d>a?(i="AEK",l="Real"):d<a&&(i="Real",l="AEK"),i&&l&&(i==="AEK"?(h=1e6-a*5e4-t*2e4-c*5e4,v=-(5e5+d*5e4+n*2e4+u*5e4)):(v=1e6-d*5e4-n*2e4-u*5e4,h=-(5e5+a*5e4+t*2e4+c*5e4))),{prizeaek:h,prizereal:v,winner:i,loser:l}}static async updatePlayersGoals(d,a){for(const t of d)if(!(!t||!t.trim()))try{const c=await b.select("players","goals",{eq:{name:t,team:a}});if(c.data&&c.data.length>0){const u=(c.data[0].goals||0)+1,h=await b.select("players","id",{eq:{name:t,team:a}});h.data&&h.data.length>0&&await b.update("players",{goals:u},h.data[0].id)}}catch(c){console.warn(`Failed to update goals for player ${t}:`,c)}}static async updatePlayerOfTheMatchStats(d){try{const a=await b.select("players","team",{eq:{name:d}});if(!a.data||a.data.length===0){console.warn(`Player ${d} not found for SdS stats`);return}const t=a.data[0].team,c=await b.select("spieler_des_spiels","*",{eq:{name:d,team:t}});if(c.data&&c.data.length>0){const n=c.data[0];await b.update("spieler_des_spiels",{count:n.count+1},n.id)}else await b.insert("spieler_des_spiels",{name:d,team:t,count:1})}catch(a){console.warn(`Failed to update SdS stats for ${d}:`,a)}}static async processFinancialTransactions({matchId:d,date:a,prizeaek:t,prizereal:c,manofthematch:n,winner:u,loser:h}){const v=await this.getTeamFinance("AEK"),i=await this.getTeamFinance("Real");let l=v.balance||0,p=i.balance||0;const N=n?await this.getSdSBonus(n,"AEK"):0,g=n?await this.getSdSBonus(n,"Real"):0;N>0&&(l+=N,await this.insertTransaction({date:a,type:"Bonus SdS",team:"AEK",amount:N,match_id:d,info:"SdS Bonus"}),await this.updateTeamBalance("AEK",l)),g>0&&(p+=g,await this.insertTransaction({date:a,type:"Bonus SdS",team:"Real",amount:g,match_id:d,info:"SdS Bonus"}),await this.updateTeamBalance("Real",p)),t!==0&&(l+=t,l<0&&(l=0),await this.insertTransaction({date:a,type:"Preisgeld",team:"AEK",amount:t,match_id:d,info:"Preisgeld"}),await this.updateTeamBalance("AEK",l)),c!==0&&(p+=c,p<0&&(p=0),await this.insertTransaction({date:a,type:"Preisgeld",team:"Real",amount:c,match_id:d,info:"Preisgeld"}),await this.updateTeamBalance("Real",p)),u&&h&&await this.processEchtgeldAusgleich({date:a,matchId:d,winner:u,loser:h,aekBalance:l,realBalance:p,prizeaek:t,prizereal:c,sdsBonusAek:N>0?1:0,sdsBonusReal:g>0?1:0,manofthematch:n})}static async getTeamFinance(d){const a=await b.select("finances","*",{eq:{team:d}});return a.data&&a.data.length>0?a.data[0]:{balance:0,debt:0}}static async getSdSBonus(d,a){const t=await b.select("players","team",{eq:{name:d}});return t.data&&t.data.length>0&&t.data[0].team===a?1e5:0}static async insertTransaction(d){return await b.insert("transactions",d)}static async updateTeamBalance(d,a){const t=await b.select("finances","id",{eq:{team:d}});return t.data&&t.data.length>0?await b.update("finances",{balance:a},t.data[0].id):await b.insert("finances",{team:d,balance:a,debt:0})}static async processEchtgeldAusgleich({date:d,matchId:a,winner:t,loser:c,aekBalance:n,realBalance:u,prizeaek:h,prizereal:v,sdsBonusAek:i,sdsBonusReal:l,manofthematch:p}){const N=await this.getTeamFinance("AEK"),g=await this.getTeamFinance("Real"),r={AEK:N.debt||0,Real:g.debt||0},j=(K,T,q)=>{let D=K;q&&(D+=1e5);let R=(Math.abs(T)-D)/1e5;return R<0&&(R=0),5+Math.round(R)},f=j(n,h,i),S=j(u,v,l),E=c==="AEK"?f:S,s=r[t],x=r[c],o=Math.min(s,E*1),m=Math.max(0,s-o),w=E*1-o,k=x+Math.max(0,w),B=await b.select("finances","id",{eq:{team:t}});if(B.data&&B.data.length>0&&await b.update("finances",{debt:m},B.data[0].id),w>0){await this.insertTransaction({date:d,type:"Echtgeld-Ausgleich",team:c,amount:Math.max(0,w),match_id:a,info:"Echtgeld-Ausgleich"});const K=await b.select("finances","id",{eq:{team:c}});K.data&&K.data.length>0&&await b.update("finances",{debt:k},K.data[0].id)}o>0&&await this.insertTransaction({date:d,type:"Echtgeld-Ausgleich (getilgt)",team:t,amount:-o,match_id:a,info:"Echtgeld-Ausgleich (getilgt)"})}static async deleteMatchTransactions(d){const a=await b.select("transactions","*",{eq:{match_id:d}});if(a.data)for(const t of a.data)await b.delete("transactions",t.id);await b.delete("matches",d)}static async decrementBansAfterMatch(){try{const d=await b.select("bans","*");if(!d.data)return;for(const a of d.data)if(a.matchesserved<a.totalgames){const t=a.matchesserved+1;await b.update("bans",{matchesserved:t},a.id)}}catch(d){console.warn("Failed to decrement bans:",d)}}}function G(){const{data:y}=C("players","*"),[d,a]=A.useState(!1),[t,c]=A.useState({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),[n,u]=A.useState(!1),h=(s,x,o)=>s.reduce((w,k)=>w+k.count,0)+o,v=s=>{c(x=>{const o={...x,...s};o.goalsa=h(o.goalslista,o.ownGoalsA,o.ownGoalsB),o.goalsb=h(o.goalslistb,o.ownGoalsB,o.ownGoalsA);const{prizeaek:m,prizereal:w}=F.calculatePrizeMoney(o.goalsa,o.goalsb,o.yellowa,o.reda,o.yellowb,o.redb);return o.prizeaek=m,o.prizereal=w,o})},i=(s,x)=>{v({[s]:x})},l=async s=>{s.preventDefault(),u(!0);try{const x=[],o=[];t.goalslista.forEach(w=>{for(let k=0;k<w.count;k++)x.push(w.player)}),t.goalslistb.forEach(w=>{for(let k=0;k<w.count;k++)o.push(w.player)});const m=await F.submitMatch({date:t.date,teama:t.teama.trim(),teamb:t.teamb.trim(),goalsa:t.goalsa,goalsb:t.goalsb,goalslista:x,goalslistb:o,ownGoalsA:t.ownGoalsA,ownGoalsB:t.ownGoalsB,yellowa:parseInt(t.yellowa)||0,reda:parseInt(t.reda)||0,yellowb:parseInt(t.yellowb)||0,redb:parseInt(t.redb)||0,manofthematch:t.manofthematch||null});c({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),a(!1),z.success(m.message)}catch(x){console.error("Match submission error:",x),z.error(x.message||"Fehler beim Hinzufügen des Spiels")}finally{u(!1)}},p=t.date,N=s=>y?y.filter(x=>x.team===s):[],g=()=>y?t.motmTeamFilter==="all"?y:y.filter(s=>s.team===t.motmTeamFilter):[],r=(s,x)=>{const o=s==="AEK"?"goalslista":"goalslistb";v({[o]:t[o].map(m=>m.player===x?{...m,count:m.count+1}:m).concat(t[o].find(m=>m.player===x)?[]:[{player:x,count:1}])})},j=(s,x)=>{const o=s==="AEK"?"goalslista":"goalslistb";v({[o]:t[o].map(m=>m.player===x?{...m,count:Math.max(0,m.count-1)}:m).filter(m=>m.count>0)})},f=(s,x)=>{const o=s==="AEK"?"ownGoalsA":"ownGoalsB",m=Math.max(0,t[o]+x);v({[o]:m})},S=(s,x)=>{if(!x)return;const o=s==="AEK"?"goalslista":"goalslistb",m=t[o].find(w=>w.player===x);v(m?{[o]:t[o].map(w=>w.player===x?{...w,count:w.count+1}:w)}:{[o]:[...t[o],{player:x,count:1}]})},E=(s,x)=>{const o=s==="AEK"?"goalslista":"goalslistb";v({[o]:t[o].filter(m=>m.player!==x)})};return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neues Spiel hinzufügen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Fügen Sie ein neues Spiel zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⚽"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Spiel hinzufügen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um ein neues Spiel zu erfassen."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neues Spiel erfassen"]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-2 sm:p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg w-full max-w-lg max-h-[95vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neues Spiel"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:n,children:"×"})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"⚽ Spielpaarung"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-medium",children:"AEK Athen"}),e.jsx("div",{className:"text-gray-500 font-bold text-xl",children:"vs"}),e.jsx("div",{className:"bg-red-100 text-red-800 px-4 py-2 rounded-lg font-medium",children:"Real Madrid"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:t.date,onChange:s=>i("date",s.target.value),className:"form-input",required:!0,disabled:n})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"⚽ Live Torwertung"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-700",children:[t.goalsa," : ",t.goalsb]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["AEK Athen ",t.goalsa," - ",t.goalsb," Real Madrid"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-blue-600 mb-3",children:"⚽ AEK Athen Torschützen"})}),e.jsx("div",{className:"space-y-2",children:t.goalslista.map((s,x)=>e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:s.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.count," Tor",s.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>j("AEK",s.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:n,children:"−"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:s.count}),e.jsx("button",{type:"button",onClick:()=>r("AEK",s.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:n,children:"+"}),e.jsx("button",{type:"button",onClick:()=>E("AEK",s.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:n,title:"Torschütze entfernen",children:"✕"})]})]},`aek-${s.player}-${x}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:s=>{s.target.value&&(S("AEK",s.target.value),s.target.value="")},className:"w-full form-input bg-blue-100 border-blue-300 text-blue-800",disabled:n,children:[e.jsx("option",{value:"",children:"+ Torschütze hinzufügen"}),N("AEK").map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.position,")"]},s.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Zählen für Real Madrid"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>f("AEK",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:n||t.ownGoalsA===0,children:"−"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:t.ownGoalsA}),e.jsx("button",{type:"button",onClick:()=>f("AEK",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:n,children:"+"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-red-600 mb-3",children:"⚽ Real Madrid Torschützen"})}),e.jsx("div",{className:"space-y-2",children:t.goalslistb.map((s,x)=>e.jsxs("div",{className:"flex items-center justify-between bg-red-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:s.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.count," Tor",s.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>j("Real",s.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:n,children:"−"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:s.count}),e.jsx("button",{type:"button",onClick:()=>r("Real",s.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:n,children:"+"}),e.jsx("button",{type:"button",onClick:()=>E("Real",s.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:n,title:"Torschütze entfernen",children:"✕"})]})]},`real-${s.player}-${x}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:s=>{s.target.value&&(S("Real",s.target.value),s.target.value="")},className:"w-full form-input bg-red-100 border-red-300 text-red-800",disabled:n,children:[e.jsx("option",{value:"",children:"+ Torschütze hinzufügen"}),N("Real").map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.position,")"]},s.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Zählen für AEK Athen"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>f("Real",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:n||t.ownGoalsB===0,children:"−"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:t.ownGoalsB}),e.jsx("button",{type:"button",onClick:()=>f("Real",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:n,children:"+"})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"🟨🟥 Karten"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Heimteam"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"🟨 Gelbe Karten"}),e.jsx("input",{type:"number",min:"0",value:t.yellowa,onChange:s=>i("yellowa",s.target.value),className:"form-input",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"🟥 Rote Karten"}),e.jsx("input",{type:"number",min:"0",value:t.reda,onChange:s=>i("reda",s.target.value),className:"form-input",disabled:n})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Gastteam"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"🟨 Gelbe Karten"}),e.jsx("input",{type:"number",min:"0",value:t.yellowb,onChange:s=>i("yellowb",s.target.value),className:"form-input",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"🟥 Rote Karten"}),e.jsx("input",{type:"number",min:"0",value:t.redb,onChange:s=>i("redb",s.target.value),className:"form-input",disabled:n})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"⭐ Spieler des Spiels"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-text-muted mb-2",children:"Team Filter:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>i("motmTeamFilter","all"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="all"?"bg-gray-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:n,children:"Alle"}),e.jsx("button",{type:"button",onClick:()=>i("motmTeamFilter","AEK"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="AEK"?"bg-blue-600 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,disabled:n,children:"AEK"}),e.jsx("button",{type:"button",onClick:()=>i("motmTeamFilter","Real"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="Real"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,disabled:n,children:"Real"})]})]}),e.jsxs("select",{value:t.manofthematch,onChange:s=>i("manofthematch",s.target.value),className:"form-input",disabled:n,children:[e.jsx("option",{value:"",children:"Keinen Spieler auswählen"}),g().map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.team," - ",s.position,")"]},s.id))]}),!y||y.length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler verfügbar. Bitte fügen Sie erst Spieler hinzu."})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"💰 Preisgelder (automatisch berechnet)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld AEK (€)"}),e.jsx("input",{type:"number",value:t.prizeaek,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld Real (€)"}),e.jsx("input",{type:"number",value:t.prizereal,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Basierend auf Ergebnis und Karten: Gewinner 1M€ - (Verlierer-Tore × 50k€) - (Karten × 20k€/50k€)"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:n,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!p||n,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsx("div",{className:"mt-6 modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Nach dem Hinzufügen können Sie das Spiel in der Spiele-Übersicht einsehen und bearbeiten."})]})]})})]})}const M=[{value:"Gelb-Rote Karte",label:"Gelb-Rote Karte",duration:1,fixedDuration:!0,icon:"🟨🟥"},{value:"Rote Karte",label:"Rote Karte",duration:2,fixedDuration:!1,icon:"🟥",minDuration:1,maxDuration:6},{value:"Verletzung",label:"Verletzung",duration:3,fixedDuration:!1,icon:"🏥",minDuration:1,maxDuration:6}];function O(){const{data:y}=C("players","*"),[d,a]=A.useState(!1),[t,c]=A.useState(""),[n,u]=A.useState({player_id:"",type:"",reason:"",customDuration:1}),[h,v]=A.useState(!1),i=(r,j)=>{u(f=>({...f,[r]:j})),r==="team"&&u(f=>({...f,player_id:""}))},l=()=>!y||!t?[]:y.filter(r=>r.team===t),p=async r=>{var j;r.preventDefault(),v(!0);try{const f=y==null?void 0:y.find(m=>m.id===parseInt(n.player_id)),S=M.find(m=>m.value===n.type);if(!f)throw new Error("Spieler nicht gefunden");if(!S)throw new Error("Sperrart nicht gefunden");const s=(j=(await b.select("bans","*",{eq:{player_id:f.id}})).data)==null?void 0:j.find(m=>(m.matchesserved||0)<(m.totalgames||0));if(s)throw new Error(`Spieler "${f.name}" ist bereits gesperrt (${s.totalgames-s.matchesserved} Spiele verbleibend)`);const x=S.fixedDuration?S.duration:n.customDuration,o=await b.insert("bans",{player_id:f.id,team:f.team,type:S.value,totalgames:x,matchesserved:0,reason:n.reason||S.value,created_at:new Date().toISOString()});if(o.error)throw new Error(`Ban insert failed: ${o.error.message}`);u({player_id:"",type:"",reason:"",customDuration:1}),c(""),a(!1),z.success(`Sperre für "${f.name}" erfolgreich hinzugefügt!`)}catch(f){console.error("Ban submission error:",f),z.error(f.message||"Fehler beim Hinzufügen der Sperre")}finally{v(!1)}},N=t&&n.player_id&&n.type,g=M.find(r=>r.value===n.type);return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Sperre hinzufügen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erstellen Sie eine neue Spielersperre in der Datenbank."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🚫"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Sperre hinzufügen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Spielersperre zu erfassen."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Sperre erfassen"]})]})}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Sperre"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:h,children:"×"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:t,onChange:r=>{c(r.target.value),u(j=>({...j,player_id:""}))},className:"form-input",required:!0,disabled:h,children:[e.jsx("option",{value:"",children:"Team wählen"}),e.jsx("option",{value:"AEK",children:"🔵 AEK Athen"}),e.jsx("option",{value:"Real",children:"🔴 Real Madrid"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spieler *"}),e.jsxs("select",{value:n.player_id,onChange:r=>i("player_id",r.target.value),className:"form-input",required:!0,disabled:h||!t,children:[e.jsx("option",{value:"",children:t?"Spieler wählen":"Bitte zuerst Team wählen"}),l().map(r=>e.jsxs("option",{value:r.id,children:[r.name," (",r.position,")"]},r.id))]}),t&&l().length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler im gewählten Team verfügbar."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Sperrart *"}),e.jsxs("select",{value:n.type,onChange:r=>i("type",r.target.value),className:"form-input",required:!0,disabled:h,children:[e.jsx("option",{value:"",children:"Sperrart wählen"}),M.map(r=>e.jsxs("option",{value:r.value,children:[r.icon," ",r.label,r.fixedDuration?` (${r.duration} Spiel${r.duration!==1?"e":""})`:` (1-${r.maxDuration} Spiele)`]},r.value))]})]}),g&&!g.fixedDuration&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Spiele *"}),e.jsx("select",{value:n.customDuration,onChange:r=>i("customDuration",parseInt(r.target.value)),className:"form-input",required:!0,disabled:h,children:Array.from({length:g.maxDuration},(r,j)=>j+1).map(r=>e.jsxs("option",{value:r,children:[r," Spiel",r!==1?"e":""]},r))}),e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["Wählen Sie zwischen ",g.minDuration," und ",g.maxDuration," Spielen"]})]}),g&&g.fixedDuration&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"Gelb-Rote Karten haben immer eine feste Sperre von 1 Spiel."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Zusätzlicher Grund (optional)"}),e.jsx("input",{type:"text",value:n.reason,onChange:r=>i("reason",r.target.value),className:"form-input",placeholder:"Weitere Details zur Sperre...",disabled:h})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:h,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!N||h||!y||y.length===0,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:h?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verfügbare Sperrarten"}),e.jsx("div",{className:"space-y-2",children:M.map(r=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:r.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:r.label})]}),e.jsx("span",{className:"text-sm text-text-muted",children:r.fixedDuration?`${r.duration} Spiel${r.duration!==1?"e":""} (fest)`:`1-${r.maxDuration} Spiele (variabel)`})]},r.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-yellow-50 border-yellow-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-yellow-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Nach dem Hinzufügen können Sie die Sperre in der Sperren-Übersicht einsehen und verwalten."})]})]})})]})}const $=[{value:"TH",label:"Torwart (TH)"},{value:"IV",label:"Innenverteidiger (IV)"},{value:"AV",label:"Außenverteidiger (AV)"},{value:"ZM",label:"Zentrales Mittelfeld (ZM)"},{value:"OM",label:"Offensives Mittelfeld (OM)"},{value:"ST",label:"Stürmer (ST)"}],P=[{value:"AEK",label:"AEK Athen",color:"blue"},{value:"Real",label:"Real Madrid",color:"red"},{value:"Ehemalige",label:"Ehemalige",color:"gray"}];function V(){const[y,d]=A.useState(!1),[a,t]=A.useState({name:"",team:"",position:"",goals:0,value:0,status:"active"}),[c,n]=A.useState(!1),u=(i,l)=>{t(p=>({...p,[i]:l}))},h=async i=>{i.preventDefault(),n(!0);try{const l=await b.select("players","*",{eq:{name:a.name.trim(),team:a.team.trim()}});if(l.data&&l.data.length>0)throw new Error(`Spieler "${a.name}" existiert bereits im Team "${a.team}"`);const p=await b.insert("players",{name:a.name.trim(),team:a.team.trim(),position:a.position.trim().toUpperCase(),goals:parseInt(a.goals)||0,value:parseFloat(a.value)||0,status:a.status||"active",created_at:new Date().toISOString()});if(p.error)throw new Error(`Player insert failed: ${p.error.message}`);t({name:"",team:"",position:"",goals:0,value:0,status:"active"}),d(!1),z.success(`Spieler "${a.name}" erfolgreich hinzugefügt!`)}catch(l){console.error("Player submission error:",l),z.error(l.message||"Fehler beim Hinzufügen des Spielers")}finally{n(!1)}},v=a.name&&a.team&&a.position&&a.value!=="";return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neuen Spieler hinzufügen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Fügen Sie einen neuen Spieler zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"👤"}),e.jsxs("h4",{className:"text-lg font-medium text-text-primary mb-2",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"}),"Spieler hinzufügen"]}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um einen neuen Spieler zu erfassen."}),e.jsxs("button",{onClick:()=>d(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neuen Spieler erfassen"]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neuer Spieler"}),e.jsx("button",{onClick:()=>d(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:c,children:"×"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spielername *"}),e.jsx("input",{type:"text",value:a.name,onChange:i=>u("name",i.target.value),className:"form-input",placeholder:"z.B. Max Mustermann",required:!0,disabled:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:a.team,onChange:i=>u("team",i.target.value),className:"form-input",required:!0,disabled:c,children:[e.jsx("option",{value:"",children:"Team wählen"}),P.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Position *"}),e.jsxs("select",{value:a.position,onChange:i=>u("position",i.target.value),className:"form-input",required:!0,disabled:c,children:[e.jsx("option",{value:"",children:"Position wählen"}),$.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Tore"}),e.jsx("input",{type:"number",min:"0",value:a.goals,onChange:i=>u("goals",i.target.value),className:"form-input",placeholder:"0",disabled:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Marktwert (Millionen €) *"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:a.value,onChange:i=>u("value",i.target.value),className:"form-input",placeholder:"0.0",disabled:c}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Marktwert in Millionen Euro (z.B. 1.5 für 1.5M €)"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:c,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!v||c,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:c?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verfügbare Teams"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:P.map(i=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsxs("span",{className:`font-medium ${i.color==="blue"?"text-blue-600":i.color==="red"?"text-red-600":"text-gray-600"}`,children:[i.color==="blue"?"🔵":i.color==="red"?"🔴":"⚫"," ",i.label]}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",i.value,")"]})]},i.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verfügbare Positionen"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:$.map(i=>e.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:e.jsx("span",{className:"font-medium text-text-primary text-sm",children:i.label})},i.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-green-50 border-green-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-green-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-green-700 text-sm",children:"Nach dem Hinzufügen können Sie den Spieler in der Kader-Übersicht einsehen und verwalten."})]})]})})]})}const _=[{value:"Preisgeld",label:"Preisgeld",icon:"🏆"},{value:"Strafe",label:"Strafe",icon:"📉"},{value:"Spielerkauf",label:"Spielerkauf",icon:"👤"},{value:"Spielerverkauf",label:"Spielerverkauf",icon:"💰"},{value:"Echtgeld-Ausgleich",label:"Echtgeld-Ausgleich",icon:"💳"},{value:"SdS Bonus",label:"Spieler des Spiels Bonus",icon:"⭐"},{value:"Sonstiges",label:"Sonstiges",icon:"📈"}],I=[{value:"AEK",label:"AEK Athen",color:"blue"},{value:"Real",label:"Real Madrid",color:"red"}];function H(){C("finances","*");const[y,d]=A.useState(!1),[a,t]=A.useState({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),[c,n]=A.useState(!1),u=(l,p)=>{t(N=>({...N,[l]:p}))},h=async l=>{l.preventDefault(),n(!0);try{const p=parseFloat(a.amount),N=await b.insert("transactions",{date:a.date,type:a.type.trim(),team:a.team.trim(),amount:p,info:a.info.trim(),match_id:null});if(N.error)throw new Error(`Transaction insert failed: ${N.error.message}`);await v(a.team.trim(),a.type.trim(),p),t({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),d(!1),z.success("Transaktion erfolgreich hinzugefügt!")}catch(p){console.error("Transaction submission error:",p),z.error(p.message||"Fehler beim Hinzufügen der Transaktion")}finally{n(!1)}},v=async(l,p,N)=>{try{const g=await b.select("finances","*",{eq:{team:l}});let r=g.data&&g.data.length>0?g.data[0]:{team:l,balance:0,debt:0},j={};if(p==="Echtgeld-Ausgleich")j.debt=(r.debt||0)+N;else{let f=(r.balance||0)+N;f<0&&(f=0),j.balance=f}r.id?await b.update("finances",j,r.id):await b.insert("finances",{team:l,balance:j.balance||0,debt:j.debt||0})}catch(g){console.warn("Failed to update finances:",g)}},i=a.team&&a.type&&a.amount&&a.date;return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Transaktion hinzufügen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erfassen Sie eine neue finanzielle Transaktion."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"💰"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Transaktion hinzufügen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Transaktion zu erfassen."}),e.jsxs("button",{onClick:()=>d(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Transaktion erfassen"]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Transaktion"}),e.jsx("button",{onClick:()=>d(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:c,children:"×"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:a.team,onChange:l=>u("team",l.target.value),className:"form-input",required:!0,disabled:c,children:[e.jsx("option",{value:"",children:"Team wählen"}),I.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Transaktionsart *"}),e.jsxs("select",{value:a.type,onChange:l=>u("type",l.target.value),className:"form-input",required:!0,disabled:c,children:[e.jsx("option",{value:"",children:"Typ wählen"}),_.map(l=>e.jsxs("option",{value:l.value,children:[l.icon," ",l.label]},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Betrag (€) *"}),e.jsx("input",{type:"number",step:"0.01",value:a.amount,onChange:l=>u("amount",l.target.value),className:"form-input",placeholder:"0.00",required:!0,disabled:c}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Negative Werte für Ausgaben, positive für Einnahmen"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Beschreibung"}),e.jsx("input",{type:"text",value:a.info,onChange:l=>u("info",l.target.value),className:"form-input",placeholder:"Zusätzliche Informationen...",disabled:c})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:a.date,onChange:l=>u("date",l.target.value),className:"form-input",required:!0,disabled:c})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:c,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!i||c,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:c?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Transaktionsarten"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.map(l=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:l.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:l.label})]},l.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verfügbare Teams"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:I.map(l=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsxs("span",{className:`font-medium ${l.color==="blue"?"text-blue-600":"text-red-600"}`,children:[l.color==="blue"?"🔵":"🔴"," ",l.label]}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",l.value,")"]})]},l.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Nach dem Hinzufügen können Sie die Transaktion in der Finanzen-Übersicht einsehen."})]})]})})]})}function W(){const[y,d]=A.useState("matches"),a=[{id:"matches",label:"Spiele hinzufügen",icon:"fas fa-futbol"},{id:"bans",label:"Sperren hinzufügen",icon:"fas fa-ban"},{id:"players",label:"Spieler hinzufügen",icon:"fas fa-user-plus"},{id:"transactions",label:"Transaktionen hinzufügen",icon:"fas fa-euro-sign"}],t=()=>{switch(y){case"matches":return e.jsx(G,{});case"bans":return e.jsx(O,{});case"players":return e.jsx(V,{});case"transactions":return e.jsx(H,{});default:return e.jsx(G,{})}};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 bg-bg-secondary border-b border-border-light",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-1",children:"Verwaltung"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Hinzufügen und verwalten von Daten"})]}),e.jsx("div",{className:"bg-bg-secondary border-b border-border-light",children:e.jsx("div",{className:"flex overflow-x-auto",children:a.map(c=>e.jsxs("button",{onClick:()=>d(c.id),className:`flex-shrink-0 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${y===c.id?"text-primary border-b-2 border-primary bg-bg-primary":"text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[e.jsx("i",{className:`${c.icon} mr-2`}),c.label]},c.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:t()})]})}export{W as default};
