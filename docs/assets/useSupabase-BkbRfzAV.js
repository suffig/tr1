import{r as t,s as i,E as f}from"./index-BcIlRE1Q.js";function S(e,l="*",s={},h=[]){const[n,d]=t.useState(null),[y,c]=t.useState(!0),[o,r]=t.useState(null),a=t.useCallback(async()=>{try{c(!0),r(null);const u=await i.select(e,l,s);if(u.error)throw u.error;d(u.data)}catch(u){r(u),f.handleDatabaseError(u,`Laden von ${e}`)}finally{c(!1)}},[e,l,JSON.stringify(s),...h]);t.useEffect(()=>{a()},[a]);const w=t.useCallback(()=>{a()},[a]);return{data:n,loading:y,error:o,refetch:w}}function p(e){const[l,s]=t.useState(!1),[h,n]=t.useState(null),d=t.useCallback(async o=>{try{s(!0),n(null);const r=await i.insert(e,o);if(r.error)throw r.error;return r}catch(r){throw n(r),f.handleDatabaseError(r,`Einfügen in ${e}`),r}finally{s(!1)}},[e]),y=t.useCallback(async(o,r)=>{try{s(!0),n(null);const a=await i.update(e,o,r);if(a.error)throw a.error;return a}catch(a){throw n(a),f.handleDatabaseError(a,`Aktualisieren in ${e}`),a}finally{s(!1)}},[e]),c=t.useCallback(async o=>{try{s(!0),n(null);const r=await i.delete(e,o);if(r.error)throw r.error;return r}catch(r){throw n(r),f.handleDatabaseError(r,`Löschen aus ${e}`),r}finally{s(!1)}},[e]);return{insert:d,update:y,remove:c,loading:l,error:h}}export{p as a,S as u};
