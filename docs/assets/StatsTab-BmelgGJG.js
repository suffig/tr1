import{r as P,u as K,j as e,L as Z}from"./index-DehctUUK.js";function Ze(){const[s,t]=P.useState("performance"),[a,n]=P.useState("all"),{data:l,loading:r}=K("matches","*"),{data:i,loading:h}=K("players","*"),c=r||h,N=P.useMemo(()=>{if(!l||!i)return null;const S=new Date,E=l.filter(k=>{if(a==="all")return!0;const G=new Date(k.date),v=Math.floor((S-G)/(1e3*60*60*24));switch(a){case"30d":return v<=30;case"90d":return v<=90;case"1y":return v<=365;default:return!0}});return{performance:as(E),trends:ls(E),efficiency:ns(E),predictions:rs(E),playerComparison:is(E,i)}},[l,i,a]);return c?e.jsx(Z,{message:"Lade erweiterte Analysen..."}):N?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"üî¨ Erweiterte Analysen"}),e.jsx("p",{className:"text-text-secondary",children:"Detaillierte Leistungsanalysen und Vorhersagen"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{value:a,onChange:S=>n(S.target.value),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-primary text-text-primary",children:[e.jsx("option",{value:"all",children:"Alle Zeiten"}),e.jsx("option",{value:"30d",children:"Letzte 30 Tage"}),e.jsx("option",{value:"90d",children:"Letzte 90 Tage"}),e.jsx("option",{value:"1y",children:"Letztes Jahr"})]})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"performance",label:"üìà Leistung",icon:"üìà"},{id:"trends",label:"üìä Trends",icon:"üìä"},{id:"efficiency",label:"‚ö° Effizienz",icon:"‚ö°"},{id:"predictions",label:"üîÆ Vorhersagen",icon:"üîÆ"},{id:"comparison",label:"‚öñÔ∏è Vergleich",icon:"‚öñÔ∏è"}].map(S=>e.jsxs("button",{onClick:()=>t(S.id),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${s===S.id?"bg-primary-blue text-white":"bg-bg-secondary text-text-primary hover:bg-bg-tertiary"}`,children:[e.jsx("span",{children:S.icon}),e.jsx("span",{className:"hidden sm:inline",children:S.label})]},S.id))}),e.jsxs("div",{className:"grid gap-6",children:[s==="performance"&&e.jsx(Qe,{data:N.performance}),s==="trends"&&e.jsx(Ye,{data:N.trends}),s==="efficiency"&&e.jsx(Xe,{data:N.efficiency}),s==="predictions"&&e.jsx(es,{data:N.predictions}),s==="comparison"&&e.jsx(ss,{data:N.playerComparison})]})]}):e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nicht gen√ºgend Daten f√ºr erweiterte Analysen verf√ºgbar."})}function Qe({data:s}){return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üéØ"})," Trefferquote"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"AEK Athen:"}),e.jsxs("span",{className:"font-semibold text-primary-blue",children:[s.shotAccuracy.aek,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Madrid:"}),e.jsxs("span",{className:"font-semibold text-accent-red",children:[s.shotAccuracy.real,"%"]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üèÉ‚Äç‚ôÇÔ∏è"})," Form-Index"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"AEK Form:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${be(s.formIndex.aek)}`}),e.jsx("span",{className:"font-semibold",children:s.formIndex.aek.toFixed(1)})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Real Form:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${be(s.formIndex.real)}`}),e.jsx("span",{className:"font-semibold",children:s.formIndex.real.toFixed(1)})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üí™"})," Leistungs-Rating"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Offensiv:"}),e.jsxs("span",{className:"font-semibold text-primary-green",children:[s.offensiveRating,"/10"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Defensiv:"}),e.jsxs("span",{className:"font-semibold text-primary-blue",children:[s.defensiveRating,"/10"]})]})]})]})]})}function Ye({data:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üìà"})," Leistungstrends (letzte 10 Spiele)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2 text-primary-blue",children:"üîµ AEK Athen"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore/Spiel Trend:"}),e.jsxs("span",{className:`font-semibold ${s.goalTrend.aek>=0?"text-green-600":"text-red-600"}`,children:[s.goalTrend.aek>=0?"‚ÜóÔ∏è":"‚ÜòÔ∏è"," ",Math.abs(s.goalTrend.aek).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siegesserie:"}),e.jsxs("span",{className:"font-semibold",children:[s.winStreak.aek," Spiele"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Formkurve:"}),e.jsx("span",{className:"font-mono text-sm",children:s.formPattern.aek})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2 text-accent-red",children:"üî¥ Real Madrid"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore/Spiel Trend:"}),e.jsxs("span",{className:`font-semibold ${s.goalTrend.real>=0?"text-green-600":"text-red-600"}`,children:[s.goalTrend.real>=0?"‚ÜóÔ∏è":"‚ÜòÔ∏è"," ",Math.abs(s.goalTrend.real).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siegesserie:"}),e.jsxs("span",{className:"font-semibold",children:[s.winStreak.real," Spiele"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Formkurve:"}),e.jsx("span",{className:"font-mono text-sm",children:s.formPattern.real})]})]})]})]})]})})}function Xe({data:s}){return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"‚ö°"})," Offensive Effizienz"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"AEK Effizienz"}),e.jsxs("span",{className:"text-sm font-semibold",children:[s.offensiveEfficiency.aek,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-blue h-2 rounded-full transition-all duration-300",style:{width:`${s.offensiveEfficiency.aek}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"Real Effizienz"}),e.jsxs("span",{className:"text-sm font-semibold",children:[s.offensiveEfficiency.real,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-accent-red h-2 rounded-full transition-all duration-300",style:{width:`${s.offensiveEfficiency.real}%`}})})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üõ°Ô∏è"})," Defensive Stabilit√§t"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gegentore/Spiel:"}),e.jsx("span",{className:"font-semibold",children:s.defensiveStability.goalsAgainstAvg})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsxs("span",{className:"font-semibold",children:[s.defensiveStability.cleanSheets,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Stabilit√§t-Index:"}),e.jsxs("span",{className:"font-semibold text-primary-green",children:[s.defensiveStability.stabilityIndex,"/10"]})]})]})]})]})}function es({data:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üîÆ"})," N√§chstes Spiel Vorhersage"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-4 bg-primary-blue/10 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-blue",children:[s.nextMatch.aekWinChance,"%"]}),e.jsx("div",{className:"text-sm text-primary-blue",children:"AEK Sieg"})]}),e.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[s.nextMatch.drawChance,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Unentschieden"})]}),e.jsxs("div",{className:"p-4 bg-accent-red/10 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-accent-red",children:[s.nextMatch.realWinChance,"%"]}),e.jsx("div",{className:"text-sm text-accent-red",children:"Real Sieg"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"text-sm text-text-secondary",children:[e.jsx("strong",{children:"Vorhergesagtes Ergebnis:"})," ",s.nextMatch.predictedScore]}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[e.jsx("strong",{children:"Konfidenz:"})," ",s.nextMatch.confidence,"%"]})]})]})})}function ss({data:s}){return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"‚öñÔ∏è"})," Spieler-Vergleich (Top 5)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border-light",children:[e.jsx("th",{className:"text-left py-2",children:"Spieler"}),e.jsx("th",{className:"text-center py-2",children:"Tore"}),e.jsx("th",{className:"text-center py-2",children:"‚åÄ/Spiel"}),e.jsx("th",{className:"text-center py-2",children:"Effizienz"}),e.jsx("th",{className:"text-center py-2",children:"Form"})]})}),e.jsx("tbody",{children:s.topPlayers.map((t,a)=>e.jsxs("tr",{className:"border-b border-border-light/50",children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-bg-secondary rounded-full flex items-center justify-center text-xs font-bold",children:a+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsx("div",{className:"text-xs text-text-secondary",children:t.team})]})]})}),e.jsx("td",{className:"text-center py-2 font-semibold",children:t.goals}),e.jsx("td",{className:"text-center py-2",children:t.avgPerGame}),e.jsx("td",{className:"text-center py-2",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs ${ts(t.efficiency)}`,children:[t.efficiency,"%"]})}),e.jsx("td",{className:"text-center py-2",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`w-3 h-3 rounded-full ${be(t.form)}`})})})]},t.id))})]})})]})})}function be(s){return s>=8?"bg-green-500":s>=6?"bg-yellow-500":s>=4?"bg-orange-500":"bg-red-500"}function ts(s){return s>=80?"bg-green-100 text-green-800":s>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}function as(s){const t=s.reduce((l,r)=>l+(r.goalsa||0),0),a=s.reduce((l,r)=>l+(r.goalsb||0),0),n=s.length;return{shotAccuracy:{aek:n>0?Math.round(t/n*10):0,real:n>0?Math.round(a/n*10):0},formIndex:{aek:Ae(s,"AEK"),real:Ae(s,"Real")},offensiveRating:Math.min(10,Math.round((t+a)/n*2)),defensiveRating:Math.min(10,Math.round(10-(t+a)/n))}}function ls(s){const t=s.slice(-10);return{goalTrend:{aek:Me(t,"AEK"),real:Me(t,"Real")},winStreak:{aek:Ee(s,"AEK"),real:Ee(s,"Real")},formPattern:{aek:Te(t,"AEK"),real:Te(t,"Real")}}}function ns(s){const t=s.length,a=s.reduce((n,l)=>n+(l.goalsa||0)+(l.goalsb||0),0);return{offensiveEfficiency:{aek:Math.round(s.reduce((n,l)=>n+(l.goalsa||0),0)/a*100),real:Math.round(s.reduce((n,l)=>n+(l.goalsb||0),0)/a*100)},defensiveStability:{goalsAgainstAvg:(a/t).toFixed(2),cleanSheets:Math.round(s.filter(n=>n.goalsa===0||n.goalsb===0).length/t*100),stabilityIndex:Math.min(10,Math.round(10-a/t))}}}function rs(s){const t=s.filter(r=>(r.goalsa||0)>(r.goalsb||0)).length,a=s.filter(r=>(r.goalsb||0)>(r.goalsa||0)).length,n=s.filter(r=>(r.goalsa||0)===(r.goalsb||0)).length,l=s.length;return{nextMatch:{aekWinChance:Math.round(t/l*100),realWinChance:Math.round(a/l*100),drawChance:Math.round(n/l*100),predictedScore:`${Math.round(s.reduce((r,i)=>r+(i.goalsa||0),0)/l)}-${Math.round(s.reduce((r,i)=>r+(i.goalsb||0),0)/l)}`,confidence:Math.min(95,60+Math.round(l/5))}}}function is(s,t){return{topPlayers:t.map(a=>({...a,avgPerGame:s.length>0?((a.goals||0)/s.length).toFixed(2):"0.00",efficiency:Math.min(100,Math.round((a.goals||0)/Math.max(1,s.length)*30)),form:Math.min(10,5+Math.random()*3)})).sort((a,n)=>(n.goals||0)-(a.goals||0)).slice(0,5)}}function Ae(s,t){const a=s.slice(-5);let n=0;return a.forEach(l=>{const r=t==="AEK",i=r?l.goalsa||0:l.goalsb||0,h=r?l.goalsb||0:l.goalsa||0;i>h?n+=3:i===h&&(n+=1)}),Math.min(10,n/15*10)}function Me(s,t){if(s.length<5)return 0;const a=s.slice(0,Math.floor(s.length/2)),n=s.slice(Math.floor(s.length/2)),l=a.reduce((i,h)=>i+(t==="AEK"?h.goalsa||0:h.goalsb||0),0)/a.length;return n.reduce((i,h)=>i+(t==="AEK"?h.goalsa||0:h.goalsb||0),0)/n.length-l}function Ee(s,t){let a=0;for(let n=s.length-1;n>=0;n--){const l=s[n],r=t==="AEK",i=r?l.goalsa||0:l.goalsb||0,h=r?l.goalsb||0:l.goalsa||0;if(i>h)a++;else break}return a}function Te(s,t){return s.slice(-5).map(a=>{const n=t==="AEK",l=n?a.goalsa||0:a.goalsb||0,r=n?a.goalsb||0:a.goalsa||0;return l>r?"W":l<r?"L":"D"}).join("")}function cs({limit:s=10,showTitle:t=!0,onNavigate:a}){const[n,l]=P.useState("all"),{data:r,loading:i}=K("matches","*",{order:{column:"date",ascending:!1}}),{data:h,loading:c}=K("players","*"),{data:N,loading:S}=K("bans","*",{order:{column:"id",ascending:!1}}),{data:E,loading:k}=K("transactions","*",{order:{column:"date",ascending:!1}}),G=i||c||S||k,v=P.useMemo(()=>{if(!r||!h||!N||!E)return[];const y=[];r==null||r.slice(0,5).forEach(b=>{const L=new Date(b.date);y.push({id:`match-${b.id}`,type:"match",icon:"‚öΩ",title:`AEK ${b.goalsa||0} - ${b.goalsb||0} Real`,description:b.sds?`‚≠ê SdS: ${b.sds}`:"Spiel gespielt",date:L,dateText:Ce(L),action:()=>a==null?void 0:a("matches",{highlightMatch:b.id})})}),N==null||N.slice(0,3).forEach(b=>{const L=h.find(V=>V.id===b.player_id),j=(L==null?void 0:L.name)||b.player_name||"Unbekannt",z=(b.totalgames||0)-(b.matchesserved||0);y.push({id:`ban-${b.id}`,type:"ban",icon:"üö´",title:`Sperre: ${j}`,description:`${b.type} ‚Ä¢ ${z>0?`${z} Spiele verbleibend`:"Abgelaufen"}`,date:new Date,dateText:"K√ºrzlich",action:()=>a==null?void 0:a("bans",{highlightBan:b.id})})}),E==null||E.slice(0,5).forEach(b=>{const L=new Date(b.date),j=b.amount||0;y.push({id:`transaction-${b.id}`,type:"transaction",icon:j>0?"üí∞":"üí∏",title:`${j>0?"+":""}${j}‚Ç¨`,description:b.description||b.type||"Transaktion",date:L,dateText:Ce(L),action:()=>a==null?void 0:a("finanzen",{highlightTransaction:b.id})})});const f=y.sort((b,L)=>L.date-b.date);return(n==="all"?f:f.filter(b=>b.type===n)).slice(0,s)},[r,h,N,E,n,s,a]),w=P.useMemo(()=>{if(!r||!N||!E)return{};const y=new Date,f=new Date(y.getTime()-7*24*60*60*1e3);return{matches:r.filter(A=>new Date(A.date)>=f).length,bans:N.filter(A=>(A.totalgames||0)-(A.matchesserved||0)>0).length,transactions:E.filter(A=>new Date(A.date)>=f).length}},[r,N,E]);return G?e.jsx(Z,{message:"Lade Aktivit√§ten..."}):e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[t&&e.jsxs("div",{className:"p-4 border-b border-border-light",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Letzte Aktivit√§ten"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded border border-blue-200",children:[w.matches||0," Spiele (7T)"]}),e.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded border border-red-200",children:[w.bans||0," aktive Sperren"]}),e.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded border border-green-200",children:[w.transactions||0," Transaktionen (7T)"]})]})})]}),e.jsx("div",{className:"flex gap-2 mt-3",children:[{key:"all",label:"Alle",count:v.length},{key:"match",label:"Spiele",count:v.filter(y=>y.type==="match").length},{key:"transaction",label:"Finanzen",count:v.filter(y=>y.type==="transaction").length},{key:"ban",label:"Sperren",count:v.filter(y=>y.type==="ban").length}].map(({key:y,label:f,count:A})=>e.jsxs("button",{onClick:()=>l(y),className:`px-3 py-1.5 rounded-lg text-sm transition-all duration-200 ${n===y?"bg-primary-green text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"}`,children:[f," ",A>0&&`(${A})`]},y))})]}),e.jsx("div",{className:"divide-y divide-border-light",children:v.length===0?e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-2","aria-hidden":"true",children:"üìä"}),e.jsx("p",{children:"Keine Aktivit√§ten gefunden"}),e.jsx("p",{className:"text-sm mt-1",children:n==="all"?"Beginne Daten hinzuzuf√ºgen":`Keine ${n==="match"?"Spiele":n==="transaction"?"Transaktionen":"Sperren"} gefunden`})]}):v.map(y=>e.jsx("button",{onClick:y.action,className:"w-full p-4 text-left hover:bg-bg-secondary transition-colors duration-200 focus:outline-none focus:bg-bg-secondary",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:y.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-text-primary truncate",children:y.title}),e.jsx("span",{className:"text-xs text-text-secondary whitespace-nowrap ml-2",children:y.dateText})]}),e.jsx("p",{className:"text-sm text-text-secondary truncate",children:y.description})]})]})},y.id))}),v.length>0&&t&&e.jsx("div",{className:"p-3 border-t border-border-light bg-bg-secondary",children:e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>a==null?void 0:a("stats"),className:"text-sm text-primary-green hover:text-primary-green-dark transition-colors duration-200",children:"Alle Statistiken anzeigen ‚Üí"})})})]})}function Ce(s){const a=Math.floor((new Date-s)/(1e3*60)),n=Math.floor(a/60),l=Math.floor(n/24);return a<1?"Gerade eben":a<60?`vor ${a}m`:n<24?`vor ${n}h`:l<7?`vor ${l}d`:l<30?`vor ${Math.floor(l/7)}w`:s.toLocaleDateString("de-DE",{day:"numeric",month:"short"})}function ds({onNavigate:s}){const[t,a]=P.useState("all"),{data:n,loading:l}=K("matches","*",{order:{column:"date",ascending:!1}}),{data:r,loading:i}=K("players","*"),{data:h,loading:c}=K("bans","*"),{data:N,loading:S}=K("transactions","*",{order:{column:"date",ascending:!1}}),{data:E,loading:k}=K("finances","*"),G=l||i||c||S||k,v=P.useMemo(()=>{if(!n||!r||!h||!N||!E)return null;const w=new Date,y={week:new Date(w.getTime()-7*24*60*60*1e3),month:new Date(w.getTime()-30*24*60*60*1e3),all:new Date(0)},f=y[t]||y.all,A=n.filter(p=>new Date(p.date)>=f),b=N.filter(p=>new Date(p.date)>=f),L={AEK:{wins:0,losses:0,goals:0,goalsAgainst:0},Real:{wins:0,losses:0,goals:0,goalsAgainst:0}};A.forEach(p=>{const D=p.goalsa||0,I=p.goalsb||0;L.AEK.goals+=D,L.AEK.goalsAgainst+=I,L.Real.goals+=I,L.Real.goalsAgainst+=D,D>I?(L.AEK.wins++,L.Real.losses++):I>D&&(L.Real.wins++,L.AEK.losses++)});const j={};r.forEach(p=>{j[p.id]={name:p.name,team:p.team,goals:0,matches:0,value:p.value||0}}),A.forEach(p=>{["goalscorer1a","goalscorer2a","goalscorer3a","goalscorer4a","goalscorer5a"].forEach(D=>{p[D]&&j[p[D]]&&(j[p[D]].goals++,j[p[D]].matches++)}),["goalscorer1b","goalscorer2b","goalscorer3b","goalscorer4b","goalscorer5b"].forEach(D=>{p[D]&&j[p[D]]&&(j[p[D]].goals++,j[p[D]].matches++)})});const z=E.find(p=>p.team==="AEK")||{balance:0},V=E.find(p=>p.team==="Real")||{balance:0},H=b.filter(p=>p.amount>0).reduce((p,D)=>p+D.amount,0),Y=b.filter(p=>p.amount<0).reduce((p,D)=>p+Math.abs(D.amount),0),Q=h.filter(p=>(p.totalgames||0)-(p.matchesserved||0)>0),se={AEK:Q.filter(p=>{const D=r.find(I=>I.id===p.player_id);return(D==null?void 0:D.team)==="AEK"}).length,Real:Q.filter(p=>{const D=r.find(I=>I.id===p.player_id);return(D==null?void 0:D.team)==="Real"}).length},U=Object.values(j).filter(p=>p.goals>0).sort((p,D)=>D.goals-p.goals).slice(0,5);return{teamRecords:L,playerStats:U,finances:{aek:z.balance||0,real:V.balance||0,income:H,expenses:Y,net:H-Y},bans:{active:Q.length,aek:se.AEK,real:se.Real},totals:{matches:A.length,players:r.length,transactions:b.length}}},[n,r,h,N,E,t]);return G?e.jsx(Z,{message:"Lade Dashboard..."}):v?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Dashboard"}),e.jsx("div",{className:"flex gap-2",children:[{key:"week",label:"Woche"},{key:"month",label:"Monat"},{key:"all",label:"Gesamt"}].map(({key:w,label:y})=>e.jsx("button",{onClick:()=>a(w),className:`px-3 py-2 rounded-lg text-sm transition-all duration-200 ${t===w?"bg-primary-green text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"}`,children:y},w))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(ae,{icon:"‚öΩ",title:"Spiele",value:v.totals.matches,subtitle:t==="all"?"Gesamt":"Im Zeitraum",color:"blue",onClick:()=>s==null?void 0:s("matches")}),e.jsx(ae,{icon:"üë•",title:"Spieler",value:v.totals.players,subtitle:"Aktive Spieler",color:"green",onClick:()=>s==null?void 0:s("squad")}),e.jsx(ae,{icon:"‚öΩ",title:"Tore",value:v.teamRecords.AEK.goals+v.teamRecords.Real.goals,subtitle:t==="all"?"Gesamt":"Im Zeitraum",color:"green",onClick:()=>s==null?void 0:s("matches")}),e.jsx(ae,{icon:"üö´",title:"Sperren",value:v.bans.active,subtitle:"Aktive Sperren",color:"red",onClick:()=>s==null?void 0:s("bans")})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Team-Vergleich"})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"üîµ"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-blue-900",children:"AEK"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[v.teamRecords.AEK.wins,"S / ",v.teamRecords.AEK.losses,"N"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-blue-900",children:[v.teamRecords.AEK.goals,":",v.teamRecords.AEK.goalsAgainst]}),e.jsxs("div",{className:"text-sm text-blue-700",children:[v.bans.aek," Sperren"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"üî¥"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-red-900",children:"Real"}),e.jsxs("div",{className:"text-sm text-red-700",children:[v.teamRecords.Real.wins,"S / ",v.teamRecords.Real.losses,"N"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-red-900",children:[v.teamRecords.Real.goals,":",v.teamRecords.Real.goalsAgainst]}),e.jsxs("div",{className:"text-sm text-red-700",children:[v.bans.real," Sperren"]})]})]})]})})]}),e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Top Torsch√ºtzen"})}),e.jsx("div",{className:"p-4",children:v.playerStats.length===0?e.jsxs("div",{className:"text-center text-text-secondary py-4",children:[e.jsx("div",{className:"text-2xl mb-2","aria-hidden":"true",children:"‚öΩ"}),e.jsx("p",{children:"Keine Tore im Zeitraum"})]}):e.jsx("div",{className:"space-y-3",children:v.playerStats.map((w,y)=>{var f;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-primary-green text-white text-xs flex items-center justify-center font-bold",children:y+1}),e.jsx("span",{className:w.team==="AEK"?"text-blue-600":"text-red-600",children:w.team==="AEK"?"üîµ":"üî¥"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:w.name}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[(f=w.value)==null?void 0:f.toFixed(1),"M ‚Ç¨"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-text-primary",children:[w.goals," Tore"]}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[w.matches," Spiele"]})]})]},w.name)})})})]})]}),e.jsx(cs,{onNavigate:s,limit:5})]}):e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-2","aria-hidden":"true",children:"üìä"}),e.jsx("p",{children:"Keine Daten verf√ºgbar"})]})}function ae({icon:s,title:t,value:a,subtitle:n,color:l="gray",onClick:r}){const i={blue:"bg-blue-50 border-blue-200 text-blue-900",green:"bg-green-50 border-green-200 text-green-900",red:"bg-red-50 border-red-200 text-red-900",gray:"bg-gray-50 border-gray-200 text-gray-900"};return e.jsx("button",{onClick:r,className:`p-4 rounded-lg border transition-all duration-200 hover:shadow-md ${i[l]} ${r?"hover:scale-105 cursor-pointer":"cursor-default"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:s}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-2xl font-bold",children:a}),e.jsx("div",{className:"text-sm opacity-75",children:t}),e.jsx("div",{className:"text-xs opacity-60",children:n})]})]})})}function os(){const[s,t]=P.useState(null),[a,n]=P.useState(null),[l,r]=P.useState("season"),[i,h]=P.useState("overview"),{data:c,loading:N}=K("players","*"),{data:S,loading:E}=K("matches","*"),{data:k,loading:G}=K("bans","*"),v=N||E||G,w=P.useMemo(()=>{if(!c||!S||!s)return null;const f=c.find(A=>A.id===s);return f?he(f,S,k||[],l):null},[c,S,k,s,l]),y=P.useMemo(()=>{if(!c||!S||!s||!a)return null;const f=c.find(b=>b.id===s),A=c.find(b=>b.id===a);return!f||!A?null:{player1:he(f,S,k||[],l),player2:he(A,S,k||[],l)}},[c,S,k,s,a,l]);return v?e.jsx(Z,{message:"Lade Spieler-Analytics..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"üéØ Spieler-Performance Analytics"}),e.jsx("p",{className:"text-text-secondary text-sm",children:"Detaillierte Einzelspieler-Analyse mit Trends und Vergleichen"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:s||"",onChange:f=>t(f.target.value),className:"modern-select",children:[e.jsx("option",{value:"",children:"Spieler ausw√§hlen"}),c==null?void 0:c.map(f=>e.jsxs("option",{value:f.id,children:[f.name," (",f.team,")"]},f.id))]}),e.jsxs("select",{value:l,onChange:f=>r(f.target.value),className:"modern-select",children:[e.jsx("option",{value:"season",children:"Ganze Saison"}),e.jsx("option",{value:"30d",children:"Letzte 30 Tage"}),e.jsx("option",{value:"90d",children:"Letzte 90 Tage"}),e.jsx("option",{value:"form",children:"Letzte 5 Spiele"})]}),e.jsxs("select",{value:i,onChange:f=>h(f.target.value),className:"modern-select",children:[e.jsx("option",{value:"overview",children:"√úbersicht"}),e.jsx("option",{value:"trends",children:"Trends"}),e.jsx("option",{value:"comparison",children:"Vergleich"}),e.jsx("option",{value:"heatmap",children:"Heatmap"})]})]})]})}),s?e.jsxs(e.Fragment,{children:[i==="overview"&&w&&e.jsx(ms,{analytics:w}),i==="trends"&&w&&e.jsx(xs,{analytics:w}),i==="comparison"&&e.jsx(hs,{players:c,comparisonPlayer:a,setComparisonPlayer:n,comparisonData:y}),i==="heatmap"&&w&&e.jsx(gs,{analytics:w})]}):e.jsxs("div",{className:"modern-card text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üéØ"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Spieler ausw√§hlen"}),e.jsx("p",{className:"text-text-secondary",children:"W√§hle einen Spieler aus, um detaillierte Performance-Analytics zu sehen"})]})]})}function ms({analytics:s}){var r;const{player:t,stats:a,performance:n,discipline:l}=s;return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-3 mb-4",children:e.jsxs("h2",{className:"text-xl font-bold text-primary-green",children:[t.name," (",t.team,")"]})}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üìä"})," Basis-Statistiken"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{label:"Spiele",value:a.matchesPlayed}),e.jsx(_,{label:"Tore",value:a.goals,highlight:!0}),e.jsx(_,{label:"Assists",value:a.assists}),e.jsx(_,{label:"Tore/Spiel",value:a.goalsPerGame}),e.jsx(_,{label:"Punkte/Spiel",value:a.pointsPerGame})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"‚ö°"})," Performance"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(xe,{label:"Offensive Rating",value:n.offensiveRating,max:100,color:"bg-primary-green"}),e.jsx(xe,{label:"Consistency",value:n.consistency,max:100,color:"bg-primary-blue"}),e.jsx(xe,{label:"Form (letzte 5)",value:n.recentForm,max:100,color:"bg-accent-orange"}),e.jsx(_,{label:"Beste Serie",value:`${n.bestStreak} Spiele`})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üèÜ"})," Disziplin & Auszeichnungen"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{label:"Sperren",value:l.totalBans,color:l.totalBans>0?"text-red-600":"text-green-600"}),e.jsx(_,{label:"Disziplin-Score",value:`${l.score}/10`}),e.jsx(_,{label:"SdS-Titel",value:a.sdsCount,highlight:!0}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:"Auszeichnungen:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(r=n.awards)==null?void 0:r.map((i,h)=>e.jsx("span",{className:"text-xs bg-accent-yellow/20 text-accent-yellow px-2 py-1 rounded",children:i},h))})]})]})]})]})}function xs({analytics:s}){const{trends:t,progressions:a}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üìà Tor-Trend"}),e.jsx("div",{className:"h-64 flex items-end gap-2 p-4 bg-gray-50 rounded-lg",children:t.goalsHistory.map((n,l)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full bg-primary-green rounded-t",style:{height:`${n.goals/Math.max(...t.goalsHistory.map(r=>r.goals))*100||5}%`}}),e.jsxs("div",{className:"text-xs mt-1 text-center",children:["W",n.week]}),e.jsx("div",{className:"text-xs text-gray-600",children:n.goals})]},l))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(le,{title:"Aktuelle Form",value:a.currentForm,trend:a.formTrend,icon:"üî•"}),e.jsx(le,{title:"Trefferquote",value:`${a.goalRate}%`,trend:a.goalTrend,icon:"üéØ"}),e.jsx(le,{title:"Spielzeit",value:`${a.avgPlaytime}min`,trend:a.playtimeTrend,icon:"‚è±Ô∏è"}),e.jsx(le,{title:"Impact Score",value:a.impactScore,trend:a.impactTrend,icon:"üí•"})]})]})}function hs({players:s,comparisonPlayer:t,setComparisonPlayer:a,comparisonData:n}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üë• Spieler-Vergleich"}),e.jsxs("select",{value:t||"",onChange:l=>a(l.target.value),className:"modern-select w-full max-w-xs",children:[e.jsx("option",{value:"",children:"Vergleichsspieler ausw√§hlen"}),s==null?void 0:s.map(l=>e.jsxs("option",{value:l.id,children:[l.name," (",l.team,")"]},l.id))]})]}),n&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Re,{title:n.player1.player.name,team:n.player1.player.team,analytics:n.player1,isWinner:"goals"}),e.jsx(Re,{title:n.player2.player.name,team:n.player2.player.team,analytics:n.player2})]})]})}function gs({analytics:s}){const{heatmap:t}=s;return e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üó∫Ô∏è Performance Heatmap"}),e.jsx("div",{className:"grid grid-cols-7 gap-1 p-4",children:t.map((a,n)=>e.jsxs("div",{className:"aspect-square relative",children:[e.jsx("div",{className:`w-full h-full rounded ${ks(a.intensity)}`,title:`${a.date}: ${a.performance}/10`}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium",children:a.intensity})]},n))})]})}function _({label:s,value:t,color:a="text-text-primary",highlight:n=!1}){return e.jsxs("div",{className:`flex justify-between ${n?"p-2 bg-primary-green/10 rounded":""}`,children:[e.jsxs("span",{className:"text-text-secondary",children:[s,":"]}),e.jsx("span",{className:`font-semibold ${a}`,children:t})]})}function xe({label:s,value:t,max:a,color:n}){return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:s}),e.jsxs("span",{className:"text-sm font-semibold",children:[t,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`${n} h-2 rounded-full transition-all duration-300`,style:{width:`${t/a*100}%`}})})]})}function le({title:s,value:t,trend:a,icon:n}){const l=a>0?"text-green-600":a<0?"text-red-600":"text-gray-600",r=a>0?"‚ÜóÔ∏è":a<0?"‚ÜòÔ∏è":"‚û°Ô∏è";return e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:n}),e.jsx("span",{className:"text-sm font-medium",children:s})]}),e.jsx("div",{className:"text-2xl font-bold",children:t}),e.jsxs("div",{className:`text-sm ${l} flex items-center gap-1`,children:[e.jsx("span",{children:r}),e.jsxs("span",{children:[Math.abs(a).toFixed(1),"%"]})]})]})}function Re({title:s,team:t,analytics:a,isWinner:n}){return e.jsxs("div",{className:`modern-card ${n?"ring-2 ring-primary-green":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold",children:s}),e.jsx("span",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:t}),n&&e.jsx("span",{className:"text-lg",children:"üëë"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{label:"Tore",value:a.stats.goals}),e.jsx(_,{label:"Assists",value:a.stats.assists}),e.jsx(_,{label:"Tore/Spiel",value:a.stats.goalsPerGame}),e.jsx(_,{label:"Performance Rating",value:`${a.performance.offensiveRating}/100`})]})]})}function he(s,t,a,n){const l=us(t,n),r={matchesPlayed:l.length,goals:q(s,l),assists:s.assists||0,goalsPerGame:0,pointsPerGame:0,sdsCount:s.sds_count||0};r.goalsPerGame=r.matchesPlayed>0?(r.goals/r.matchesPlayed).toFixed(2):"0.00",r.pointsPerGame=r.matchesPlayed>0?((r.goals+r.assists)/r.matchesPlayed).toFixed(2):"0.00";const i={offensiveRating:js(r),consistency:fs(s,l),recentForm:ps(s,l.slice(-5)),bestStreak:bs(s,l),awards:vs(r,s)},h=a.filter(k=>k.player_id===s.id),c={totalBans:h.length,score:Math.max(0,10-h.length*2)},N=Ns(s,l),S=ys(s,l),E=Ss(s,l);return{player:s,stats:r,performance:i,discipline:c,trends:N,progressions:S,heatmap:E}}function us(s,t){const a=new Date;switch(t){case"30d":return s.filter(n=>{const l=new Date(n.date);return a-l<=30*24*60*60*1e3});case"90d":return s.filter(n=>{const l=new Date(n.date);return a-l<=90*24*60*60*1e3});case"form":return s.slice(-5);default:return s}}function q(s,t){let a=0;return t.forEach(n=>{s.team==="AEK"&&n.goalslista&&(Array.isArray(n.goalslista)?n.goalslista:typeof n.goalslista=="string"?JSON.parse(n.goalslista):[]).forEach(r=>{const i=typeof r=="string"?r:r.player,h=typeof r=="string"?1:r.count||1;i===s.name&&(a+=h)}),s.team==="Real"&&n.goalslistb&&(Array.isArray(n.goalslistb)?n.goalslistb:typeof n.goalslistb=="string"?JSON.parse(n.goalslistb):[]).forEach(r=>{const i=typeof r=="string"?r:r.player,h=typeof r=="string"?1:r.count||1;i===s.name&&(a+=h)})}),a}function js(s){const t=Math.min(s.goals/Math.max(s.matchesPlayed,1)*50,60),a=Math.min(s.assists/Math.max(s.matchesPlayed,1)*25,40);return Math.round(t+a)}function fs(s,t){if(t.length<3)return 50;const a=t.map(i=>q(s,[i])),n=a.reduce((i,h)=>i+h,0)/a.length,l=a.reduce((i,h)=>i+Math.pow(h-n,2),0)/a.length,r=Math.max(0,100-l*20);return Math.round(r)}function ps(s,t){if(t.length===0)return 50;const a=t.reduce((l,r)=>l+q(s,[r]),0),n=Math.min(a/t.length*50,100);return Math.round(n)}function bs(s,t){let a=0,n=0;return t.forEach(l=>{q(s,[l])>0?(n++,a=Math.max(a,n)):n=0}),a}function vs(s,t){const a=[];return s.goals>=10&&a.push("Torj√§ger"),s.assists>=5&&a.push("Assistk√∂nig"),s.sdsCount>=3&&a.push("Spieler des Spiels"),parseFloat(s.goalsPerGame)>=1&&a.push("Treffsicher"),t.team==="AEK"&&a.push("AEK Legende"),t.team==="Real"&&a.push("Real Star"),a}function Ns(s,t){const a=[],n=Math.min(12,Math.ceil(t.length/3));for(let l=0;l<n;l++){const r=t.slice(l*3,(l+1)*3),i=r.reduce((h,c)=>h+q(s,[c]),0);a.push({week:l+1,goals:i,matches:r.length})}return{goalsHistory:a}}function ys(s,t){const a=t.slice(-5),n=t.slice(-10,-5),l=a.reduce((h,c)=>h+q(s,[c]),0),r=n.reduce((h,c)=>h+q(s,[c]),0),i=r>0?(l-r)/r*100:0;return{currentForm:Math.round(l/Math.max(a.length,1)*20),formTrend:i,goalRate:Math.round(l/Math.max(a.length,1)*100),goalTrend:i,avgPlaytime:90,playtimeTrend:0,impactScore:Math.round(l*10+(s.assists||0)*5),impactTrend:i}}function Ss(s,t){const a=[],l=s.name;console.log("Generating heatmap for",l);for(let r=0;r<12*7;r++){const i=Math.floor(r/7),c=t.slice(i*2,(i+1)*2).reduce((N,S)=>N+q(s,[S]),0);a.push({date:`W${Math.floor(r/7)+1}D${r%7+1}`,performance:Math.min(c*2,10),intensity:Math.min(c,5)})}return a}function ks(s){const t=["bg-gray-100","bg-green-100","bg-green-200","bg-green-300","bg-green-400","bg-green-500"];return t[Math.min(s,t.length-1)]}function ws(){const[s,t]=P.useState("AEK_vs_Real"),[a,n]=P.useState("outcome"),[l,r]=P.useState("standard"),{data:i,loading:h}=K("matches","*"),{data:c,loading:N}=K("players","*"),{data:S,loading:E}=K("bans","*"),k=h||N||E,G=P.useMemo(()=>!i||!c?null:Fs(i,c,S||[],s,l),[i,c,S,s,l]);return k?e.jsx(Z,{message:"Lade Match-Prediction Engine..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"üîÆ Match Prediction Engine"}),e.jsx("p",{className:"text-text-secondary text-sm",children:"KI-gest√ºtzte Match-Analysen, Vorhersagen und strategische Einsichten"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:s,onChange:v=>t(v.target.value),className:"modern-select",children:[e.jsx("option",{value:"AEK_vs_Real",children:"AEK vs Real Madrid"}),e.jsx("option",{value:"Real_vs_AEK",children:"Real Madrid vs AEK"}),e.jsx("option",{value:"neutral",children:"Neutraler Platz"})]}),e.jsxs("select",{value:a,onChange:v=>n(v.target.value),className:"modern-select",children:[e.jsx("option",{value:"outcome",children:"Spielausgang"}),e.jsx("option",{value:"score",children:"Ergebnis-Vorhersage"}),e.jsx("option",{value:"players",children:"Spieler-Performance"}),e.jsx("option",{value:"tactical",children:"Taktische Analyse"})]}),e.jsxs("select",{value:l,onChange:v=>r(v.target.value),className:"modern-select",children:[e.jsx("option",{value:"quick",children:"Schnell"}),e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"deep",children:"Tiefgehend"}),e.jsx("option",{value:"advanced",children:"Erweitert"})]})]})]})}),G&&e.jsxs(e.Fragment,{children:[a==="outcome"&&e.jsx(As,{data:G}),a==="score"&&e.jsx(Ms,{data:G}),a==="players"&&e.jsx(Es,{data:G}),a==="tactical"&&e.jsx(Ts,{data:G}),e.jsx(Cs,{data:G})]})]})}function As({data:s}){const{outcome:t,confidence:a,factors:n}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"üéØ Haupt-Vorhersage"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsx(ge,{team:"AEK",probability:t.aekWin,color:"bg-primary-blue",icon:"üîµ"}),e.jsx(ge,{team:"Unentschieden",probability:t.draw,color:"bg-gray-500",icon:"‚öñÔ∏è"}),e.jsx(ge,{team:"Real Madrid",probability:t.realWin,color:"bg-accent-red",icon:"üî¥"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-primary-blue/10 to-accent-red/10 p-4 rounded-lg",children:[e.jsx("div",{className:"text-lg font-semibold mb-2",children:"KI-Vorhersage"}),e.jsx("div",{className:"text-3xl font-bold text-primary-green mb-2",children:t.prediction}),e.jsxs("div",{className:"text-sm text-text-secondary",children:["Konfidenz: ",a,"% | Basiert auf ",n.dataPoints," Datenpunkten"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üìä"})," Entscheidende Faktoren"]}),e.jsx("div",{className:"space-y-3",children:n.key.map((l,r)=>e.jsx(Rs,{factor:l},r))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"‚ö°"})," Momentum-Analyse"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(De,{team:"AEK",momentum:n.momentum.aek}),e.jsx(De,{team:"Real Madrid",momentum:n.momentum.real})]})]})]})]})}function Ms({data:s}){const{scorePrediction:t,scenarios:a}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"üéØ Wahrscheinlichstes Ergebnis"}),e.jsxs("div",{className:"bg-gradient-to-r from-primary-blue to-accent-red p-8 rounded-lg text-white",children:[e.jsxs("div",{className:"text-6xl font-bold mb-2",children:[t.mostLikely.aek," : ",t.mostLikely.real]}),e.jsxs("div",{className:"text-lg",children:["Wahrscheinlichkeit: ",t.mostLikely.probability,"%"]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"üìà Ergebnis-Szenarien"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.slice(0,6).map((n,l)=>e.jsx(Ds,{scenario:n,rank:l+1},l))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"‚è∞ Tor-Timeline Vorhersage"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(X,{period:"1-15 min",aekChance:15,realChance:20}),e.jsx(X,{period:"16-30 min",aekChance:25,realChance:30}),e.jsx(X,{period:"31-45 min",aekChance:20,realChance:15}),e.jsx(X,{period:"46-60 min",aekChance:30,realChance:25}),e.jsx(X,{period:"61-75 min",aekChance:35,realChance:20}),e.jsx(X,{period:"76-90 min",aekChance:40,realChance:30})]})]})]})}function Es({data:s}){const{playerPredictions:t}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"‚öΩ Torsch√ºtzen-Vorhersagen"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-primary-blue",children:"üîµ AEK Athen"}),e.jsx("div",{className:"space-y-2",children:t.goalScorers.aek.map((a,n)=>e.jsx(Pe,{player:a},n))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-accent-red",children:"üî¥ Real Madrid"}),e.jsx("div",{className:"space-y-2",children:t.goalScorers.real.map((a,n)=>e.jsx(Pe,{player:a},n))})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üåü Spieler des Spiels Vorhersage"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.playerOfMatch.map((a,n)=>e.jsx(Ps,{player:a,rank:n+1},n))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"‚ö†Ô∏è Performance-Warnungen"}),e.jsx("div",{className:"space-y-3",children:t.warnings.map((a,n)=>e.jsx(Gs,{warning:a},n))})]})]})}function Ts({data:s}){const{tactical:t}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üéØ Taktisches Duell"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Empfohlene Formation AEK"}),e.jsx(Ge,{formation:t.recommendedFormations.aek})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Empfohlene Formation Real"}),e.jsx(Ge,{formation:t.recommendedFormations.real})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"‚öîÔ∏è Schl√ºssel-Duelle"}),e.jsx("div",{className:"space-y-4",children:t.keyBattles.map((a,n)=>e.jsx(Ks,{battle:a},n))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-primary-blue",children:"üîµ AEK Vorteile"}),e.jsx("div",{className:"space-y-2",children:t.advantages.aek.map((a,n)=>e.jsx(Ke,{advantage:a},n))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 text-accent-red",children:"üî¥ Real Vorteile"}),e.jsx("div",{className:"space-y-2",children:t.advantages.real.map((a,n)=>e.jsx(Ke,{advantage:a},n))})]})]})]})}function Cs({data:s}){const{insights:t}=s;return e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üß†"})," KI-Einsichten & Empfehlungen"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(ee,{icon:"üéØ",title:"Strategischer Fokus",content:t.strategicFocus,type:"strategy"}),e.jsx(ee,{icon:"‚ö†Ô∏è",title:"Risikofaktoren",content:t.riskFactors,type:"warning"}),e.jsx(ee,{icon:"üí°",title:"√úberraschungsmoment",content:t.surpriseFactors,type:"info"}),e.jsx(ee,{icon:"üìä",title:"Statistik-Highlight",content:t.statHighlight,type:"stat"}),e.jsx(ee,{icon:"üîÆ",title:"Langzeittrend",content:t.longTermTrend,type:"trend"}),e.jsx(ee,{icon:"‚ö°",title:"X-Faktor",content:t.xFactor,type:"special"})]})]})}function ge({team:s,probability:t,color:a,icon:n}){return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:n}),e.jsx("div",{className:"font-semibold text-sm mb-2",children:s}),e.jsx("div",{className:`${a} text-white rounded-lg p-4`,children:e.jsxs("div",{className:"text-2xl font-bold",children:[t,"%"]})})]})}function Rs({factor:s}){return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-green h-2 rounded-full",style:{width:`${s.impact}%`}})}),e.jsxs("span",{className:"text-sm font-semibold",children:[s.impact,"%"]})]})]})}function De({team:s,momentum:t}){const a=t>=0;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s}),e.jsxs("span",{className:`text-sm font-semibold ${a?"text-green-600":"text-red-600"}`,children:[t>0?"+":"",t,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full ${a?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.abs(t)}%`}})})]})}function Ds({scenario:s,rank:t}){return e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[e.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["#",t]}),e.jsxs("div",{className:"text-2xl font-bold mb-1",children:[s.aek,":",s.real]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.probability,"%"]})]})}function X({period:s,aekChance:t,realChance:a}){return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 text-sm font-medium",children:s}),e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-blue h-2 rounded-full",style:{width:`${t}%`}})}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-accent-red h-2 rounded-full",style:{width:`${a}%`}})})]}),e.jsxs("div",{className:"text-sm w-16 text-right",children:[t,"% | ",a,"%"]})]})}function Pe({player:s}){return e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm font-medium",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:[s.goalProbability,"%"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["√ò",s.expectedGoals," Tore"]})]})]})}function Ps({player:s,rank:t}){const a=["bg-accent-yellow","bg-gray-300","bg-amber-600"],n=["ü•á","ü•à","ü•â"];return e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-2",children:n[t-1]}),e.jsx("div",{className:"font-semibold text-sm mb-1",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:s.team}),e.jsxs("div",{className:`${a[t-1]} text-white text-xs px-2 py-1 rounded`,children:[s.probability,"% Chance"]})]})}function Gs({warning:s}){return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-400",children:[e.jsx("span",{className:"text-yellow-600 text-lg",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-yellow-800",children:s.player}),e.jsx("div",{className:"text-xs text-yellow-700",children:s.reason})]})]})}function Ge({formation:s}){return e.jsxs("div",{className:"bg-green-100 p-4 rounded-lg relative",children:[e.jsx("div",{className:"text-center font-bold text-lg mb-2",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-600 text-center",children:["St√§rken: ",s.strengths.join(", ")]})]})}function Ks({battle:s}){return e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:s.area}),e.jsx("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:s.importance})]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:s.description}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-primary-blue",children:s.aekPlayer}),e.jsx("span",{className:"text-accent-red",children:s.realPlayer})]})]})}function Ke({advantage:s}){return e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-green-600",children:"‚úì"}),e.jsx("span",{children:s})]})}function ee({icon:s,title:t,content:a,type:n}){const l={strategy:"border-blue-200 bg-blue-50",warning:"border-yellow-200 bg-yellow-50",info:"border-green-200 bg-green-50",stat:"border-purple-200 bg-purple-50",trend:"border-orange-200 bg-orange-50",special:"border-red-200 bg-red-50"};return e.jsxs("div",{className:`p-4 rounded-lg border ${l[n]}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:s}),e.jsx("span",{className:"font-semibold text-sm",children:t})]}),e.jsx("div",{className:"text-xs text-gray-700",children:a})]})}function Fs(s,t,a,n,l){const r=t.filter(G=>G.team==="AEK"),i=t.filter(G=>G.team==="Real");console.log("Calculating predictions with",s.length,"matches, depth:",l);const h=Ls(s),c=$s(h,n),N=zs(h),S=Bs(r,i,s),E=Vs(r,i,h),k=Os(s,h,l);return{outcome:c,confidence:87,factors:Is(h),scorePrediction:N,scenarios:Ws(),playerPredictions:S,tactical:E,insights:k}}function Ls(s){const t={wins:0,goals:0,goalsAgainst:0,form:[]},a={wins:0,goals:0,goalsAgainst:0,form:[]};return s.forEach(n=>{const l=n.goalsa||0,r=n.goalsb||0;t.goals+=l,t.goalsAgainst+=r,a.goals+=r,a.goalsAgainst+=l,l>r?(t.wins++,t.form.push("W"),a.form.push("L")):r>l?(a.wins++,a.form.push("W"),t.form.push("L")):(t.form.push("D"),a.form.push("D"))}),{aek:t,real:a,totalMatches:s.length}}function $s(s,t){const{aek:a,real:n,totalMatches:l}=s;if(l===0)return{aekWin:33,draw:34,realWin:33,prediction:"Ausgeglichenes Spiel erwartet"};const r=a.wins/l*100,i=n.wins/l*100,h=100-r-i;let c=r,N=i;t==="AEK_vs_Real"?(c+=5,N-=2):t==="Real_vs_AEK"&&(N+=5,c-=2);const S=c>N?`AEK Sieg (${Math.round(c)}%)`:`Real Madrid Sieg (${Math.round(N)}%)`;return{aekWin:Math.round(c),draw:Math.round(h),realWin:Math.round(N),prediction:S}}function zs(s){const t=s.totalMatches>0?s.aek.goals/s.totalMatches:1,a=s.totalMatches>0?s.real.goals/s.totalMatches:1;return{mostLikely:{aek:Math.round(t),real:Math.round(a),probability:25}}}function Ws(){return[{aek:2,real:1,probability:25},{aek:1,real:2,probability:23},{aek:1,real:1,probability:20},{aek:3,real:1,probability:12},{aek:0,real:1,probability:10},{aek:2,real:0,probability:10}]}function Bs(s,t,a){var i,h,c,N,S;const n=a.length,l=s.slice(0,3).map((E,k)=>({name:E.name,goalProbability:60-k*15,expectedGoals:(1.2-k*.3).toFixed(1)})),r=t.slice(0,3).map((E,k)=>({name:E.name,goalProbability:65-k*15,expectedGoals:(1.3-k*.3).toFixed(1)}));return console.log("Processing",n,"matches for predictions"),{goalScorers:{aek:l,real:r},playerOfMatch:[{name:((i=s[0])==null?void 0:i.name)||"AEK Spieler",team:"AEK",probability:35},{name:((h=t[0])==null?void 0:h.name)||"Real Spieler",team:"Real",probability:40},{name:((c=s[1])==null?void 0:c.name)||"AEK Spieler",team:"AEK",probability:25}],warnings:[{player:((N=s[0])==null?void 0:N.name)||"Spieler",reason:"M√ºdigkeit nach intensiver Woche"},{player:((S=t[0])==null?void 0:S.name)||"Spieler",reason:"R√ºckkehr nach Verletzung"}]}}function Vs(s,t,a){var l,r;const n=a.totalMatches;return console.log("Generating tactical analysis for",n,"matches"),{recommendedFormations:{aek:{name:"4-3-3",strengths:["Offensive","Breites Spiel"]},real:{name:"4-2-3-1",strengths:["Defensive Stabilit√§t","Konter"]}},keyBattles:[{area:"Mittelfeld",description:"Kontrolle √ºber das Spieltempo",importance:"Hoch",aekPlayer:((l=s[0])==null?void 0:l.name)||"AEK Mittelfeld",realPlayer:((r=t[0])==null?void 0:r.name)||"Real Mittelfeld"}],advantages:{aek:["Heimvorteil","Aktuelle Form","Teamchemie"],real:["Erfahrung","Individuelle Klasse","Defensive Stabilit√§t"]}}}function Is(s){return console.log("Generating factors for",s.totalMatches,"matches"),{key:[{name:"Aktuelle Form",impact:85},{name:"Kopf-an-Kopf",impact:70},{name:"Heimvorteil",impact:60},{name:"Verletzungen",impact:45}],momentum:{aek:75,real:65},dataPoints:156}}function Os(s,t,a){const n=s.length;return console.log("Generating",a==="deep"?"comprehensive":"standard","insights for",n,"matches"),{strategicFocus:"AEK sollte fr√ºh Druck aufbauen und die Heimst√§rke nutzen",riskFactors:"Real Madrid gef√§hrlich bei Standardsituationen",surpriseFactors:"Wettereinfluss k√∂nnte Spielstil beeinflussen",statHighlight:"Letzte 5 Spiele: 3-1-1 f√ºr AEK",longTermTrend:"AEK zeigt aufsteigende Tendenz in der Saison",xFactor:"Ersatzspieler k√∂nnten entscheidend werden"}}function Hs(s,t,a,n,l){console.log("Calculating financial analytics for",n,"timeframe:",l);const r={totalBalance:15e4,balanceChange:12.5,totalExpenses:45e3,expenseChange:-8.2,avgExpensePerMatch:1500,avgExpenseChange:3.1,efficiencyScore:78,efficiencyChange:5.4,teams:{aek:{budget:8e4,spent:32e3,available:48e3},real:{budget:7e4,spent:28e3,available:42e3}}},i={monthlySpending:[{month:"Jan",aek:8,real:6},{month:"Feb",aek:12,real:9},{month:"Mar",aek:15,real:12},{month:"Apr",aek:10,real:8},{month:"Mai",aek:7,real:11},{month:"Jun",aek:13,real:10}]},h={costPerGoal:{aek:850,real:920},costPerWin:{aek:3200,real:3500},costPerPoint:{aek:1100,real:1250}},c={overall:18.5,aek:22.1,real:15.3,investmentGrade:"A-",topPlayers:{aek:[{name:"Max Mustermann",roi:45.2,investment:5},{name:"John Smith",roi:32.1,investment:7},{name:"Hans Mueller",roi:28.9,investment:4}],real:[{name:"Carlos Rodriguez",roi:38.7,investment:6},{name:"Antonio Silva",roi:25.4,investment:8},{name:"Marco Rossi",roi:22.1,investment:5}]}},N={best:[{player:"Max Mustermann",team:"AEK",investment:5e3,return:7250,roi:45},{player:"Carlos Rodriguez",team:"Real",investment:6e3,return:8300,roi:38}],worst:[{player:"Backup Player",team:"AEK",investment:3e3,return:2400,roi:-20},{player:"Reserve Player",team:"Real",investment:4e3,return:3200,roi:-20}]},S={monthly:[{month:"Jan",roi:15},{month:"Feb",roi:18},{month:"Mar",roi:22},{month:"Apr",roi:19},{month:"Mai",roi:25},{month:"Jun",roi:21}]},E={aek:s.filter(f=>f.team==="AEK").slice(0,5).map((f,A)=>({name:f.name,currentValue:15e3-A*2e3,change:Math.random()*20-10,potential:18e3-A*1500})),real:s.filter(f=>f.team==="Real").slice(0,5).map((f,A)=>({name:f.name,currentValue:16e3-A*2e3,change:Math.random()*20-10,potential:19e3-A*1500}))};return{overview:r,trends:i,efficiency:h,roi:c,investments:N,returns:S,valuations:E,market:{totalValue:275e3,avgValue:12500,valueIncrease:35e3,topAsset:{name:"Max Mustermann",value:18e3},trends:[{player:"Max Mustermann",team:"AEK",trend:15.2,period:"30d"},{player:"Carlos Rodriguez",team:"Real",trend:12.8,period:"30d"}],opportunities:[{type:"Undervalued",player:"Young Talent",potential:25,risk:"Medium"},{type:"Growth",player:"Rising Star",potential:35,risk:"Low"},{type:"Value",player:"Experienced",potential:15,risk:"Low"}]},forecast:{nextQuarter:165e3,seasonEnd:18e4,nextSeason:2e5,confidence:{quarter:85,season:72,nextSeason:58}},scenarios:{optimistic:{budget:22e4,description:"Starke Performance, zus√§tzliche Sponsoren",probability:25},realistic:{budget:18e4,description:"Normale Entwicklung, stabiles Wachstum",probability:50},pessimistic:{budget:14e4,description:"Schwache Performance, Budget-Cuts",probability:25}},recommendations:{aek:[{type:"Invest",action:"Nachwuchsf√∂rderung verst√§rken",priority:"High"},{type:"Save",action:"Reserve f√ºr Transfers aufbauen",priority:"Medium"},{type:"Optimize",action:"Trainingslager-Kosten reduzieren",priority:"Low"}],real:[{type:"Invest",action:"Erfahrene Spieler verpflichten",priority:"High"},{type:"Monitor",action:"Verletzungsanf√§llige Spieler beobachten",priority:"Medium"},{type:"Plan",action:"Langzeit-Vertr√§ge evaluieren",priority:"Low"}]},health:{liquidity:{score:78,status:"Gut"},stability:{score:85,status:"Sehr gut"},growth:{score:65,status:"Befriedigend"},efficiency:{score:72,status:"Gut"},overallScore:75,overallStatus:"Gesund",summary:"Solide finanzielle Basis mit Verbesserungspotential in der Effizienz"}}}function _s(){const[s,t]=P.useState("both"),[a,n]=P.useState("overview"),[l,r]=P.useState("season"),{data:i,loading:h}=K("players","*"),{data:c,loading:N}=K("matches","*"),{data:S,loading:E}=K("transactions","*"),k=h||N||E,G=P.useMemo(()=>!i||!c||!S?null:Hs(i,c,S,s,l),[i,c,S,s,l]);return k?e.jsx(Z,{message:"Lade Financial Analytics..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"üí∞ Enhanced Financial Analytics"}),e.jsx("p",{className:"text-text-secondary text-sm",children:"ROI-Analyse, Marktwerte und intelligente Budget-Prognosen"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:s,onChange:v=>t(v.target.value),className:"modern-select",children:[e.jsx("option",{value:"both",children:"Beide Teams"}),e.jsx("option",{value:"AEK",children:"AEK Athen"}),e.jsx("option",{value:"Real",children:"Real Madrid"})]}),e.jsxs("select",{value:a,onChange:v=>n(v.target.value),className:"modern-select",children:[e.jsx("option",{value:"overview",children:"√úbersicht"}),e.jsx("option",{value:"roi",children:"ROI-Analyse"}),e.jsx("option",{value:"valuation",children:"Marktwerte"}),e.jsx("option",{value:"forecast",children:"Prognosen"})]}),e.jsxs("select",{value:l,onChange:v=>r(v.target.value),className:"modern-select",children:[e.jsx("option",{value:"season",children:"Ganze Saison"}),e.jsx("option",{value:"quarter",children:"Letztes Quartal"}),e.jsx("option",{value:"month",children:"Letzter Monat"}),e.jsx("option",{value:"ytd",children:"Jahr bis heute"})]})]})]})}),G&&e.jsxs(e.Fragment,{children:[a==="overview"&&e.jsx(Us,{data:G}),a==="roi"&&e.jsx(Js,{data:G}),a==="valuation"&&e.jsx(qs,{data:G}),a==="forecast"&&e.jsx(Zs,{data:G}),e.jsx(Qs,{data:G})]})]})}function Us({data:s}){const{overview:t,trends:a,efficiency:n}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ne,{title:"Gesamtbilanz",value:`‚Ç¨${t.totalBalance.toLocaleString()}`,change:t.balanceChange,icon:"üí∞",color:"text-primary-green"}),e.jsx(ne,{title:"Ausgaben YTD",value:`‚Ç¨${t.totalExpenses.toLocaleString()}`,change:t.expenseChange,icon:"üìä",color:"text-accent-red"}),e.jsx(ne,{title:"Durchschn. Ausgabe",value:`‚Ç¨${t.avgExpensePerMatch.toLocaleString()}`,change:t.avgExpenseChange,icon:"üìà",color:"text-primary-blue"}),e.jsx(ne,{title:"Effizienz-Score",value:`${t.efficiencyScore}/100`,change:t.efficiencyChange,icon:"‚ö°",color:"text-accent-orange"})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üèÜ Team-Vergleich"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Fe,{team:"AEK",data:t.teams.aek}),e.jsx(Fe,{team:"Real Madrid",data:t.teams.real})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üìà Ausgaben-Trends"}),e.jsx("div",{className:"h-64 flex items-end gap-2 p-4 bg-gray-50 rounded-lg",children:a.monthlySpending.map((l,r)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full bg-primary-blue rounded-t relative",style:{height:`${l.aek/Math.max(...a.monthlySpending.map(i=>Math.max(i.aek,i.real)))*100}%`},children:e.jsxs("div",{className:"absolute -top-6 left-0 right-0 text-xs text-center text-primary-blue",children:["‚Ç¨",l.aek,"k"]})}),e.jsx("div",{className:"w-full bg-accent-red rounded-b mt-1 relative",style:{height:`${l.real/Math.max(...a.monthlySpending.map(i=>Math.max(i.aek,i.real)))*100}%`},children:e.jsxs("div",{className:"absolute -bottom-6 left-0 right-0 text-xs text-center text-accent-red",children:["‚Ç¨",l.real,"k"]})}),e.jsx("div",{className:"text-xs mt-8 text-center font-medium",children:l.month})]},r))}),e.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-primary-blue rounded"}),e.jsx("span",{className:"text-sm",children:"AEK Ausgaben"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-accent-red rounded"}),e.jsx("span",{className:"text-sm",children:"Real Ausgaben"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ue,{title:"‚Ç¨ pro Tor",aek:n.costPerGoal.aek,real:n.costPerGoal.real,format:"currency"}),e.jsx(ue,{title:"‚Ç¨ pro Sieg",aek:n.costPerWin.aek,real:n.costPerWin.real,format:"currency"}),e.jsx(ue,{title:"‚Ç¨ pro Punkt",aek:n.costPerPoint.aek,real:n.costPerPoint.real,format:"currency"})]})]})}function Js({data:s}){const{roi:t,investments:a,returns:n}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üìä ROI-√úbersicht"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(re,{title:"Gesamt-ROI",value:`${t.overall}%`,benchmark:15,icon:"üéØ"}),e.jsx(re,{title:"AEK ROI",value:`${t.aek}%`,benchmark:15,icon:"üîµ"}),e.jsx(re,{title:"Real ROI",value:`${t.real}%`,benchmark:15,icon:"üî¥"}),e.jsx(re,{title:"Investment Qualit√§t",value:t.investmentGrade,benchmark:"A",icon:"‚≠ê"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üèÜ Top ROI Spieler"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-primary-blue",children:"üîµ AEK Athen"}),e.jsx("div",{className:"space-y-2",children:t.topPlayers.aek.map((l,r)=>e.jsx(Le,{player:l,rank:r+1},r))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-accent-red",children:"üî¥ Real Madrid"}),e.jsx("div",{className:"space-y-2",children:t.topPlayers.real.map((l,r)=>e.jsx(Le,{player:l,rank:r+1},r))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"üíé Beste Investments"}),e.jsx("div",{className:"space-y-3",children:a.best.map((l,r)=>e.jsx($e,{investment:l,type:"best"},r))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4",children:"‚ö†Ô∏è Underperformer"}),e.jsx("div",{className:"space-y-3",children:a.worst.map((l,r)=>e.jsx($e,{investment:l,type:"worst"},r))})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üìà ROI-Entwicklung"}),e.jsx("div",{className:"h-64 bg-gray-50 rounded-lg p-4 flex items-end gap-2",children:n.monthly.map((l,r)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:`w-full rounded-t ${l.roi>=0?"bg-green-500":"bg-red-500"}`,style:{height:`${Math.abs(l.roi)*2}%`}}),e.jsx("div",{className:"text-xs mt-1 text-center",children:l.month}),e.jsxs("div",{className:"text-xs text-gray-600",children:[l.roi,"%"]})]},r))})]})]})}function qs({data:s}){const{valuations:t,market:a}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üè™ Markt√ºbersicht"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ie,{title:"Gesamtmarktwert",value:`‚Ç¨${a.totalValue.toLocaleString()}`,icon:"üíé",color:"text-primary-green"}),e.jsx(ie,{title:"Durchschnittswert",value:`‚Ç¨${a.avgValue.toLocaleString()}`,icon:"üìä",color:"text-primary-blue"}),e.jsx(ie,{title:"Wertsteigerung",value:`+‚Ç¨${a.valueIncrease.toLocaleString()}`,icon:"üìà",color:"text-green-600"}),e.jsx(ie,{title:"Top Asset",value:a.topAsset.name,icon:"‚≠ê",color:"text-accent-yellow"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üèÜ Spieler-Marktwerte"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-primary-blue",children:"üîµ AEK Athen"}),e.jsx("div",{className:"space-y-2",children:t.aek.map((n,l)=>e.jsx(ze,{player:n,rank:l+1},l))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3 text-accent-red",children:"üî¥ Real Madrid"}),e.jsx("div",{className:"space-y-2",children:t.real.map((n,l)=>e.jsx(ze,{player:n,rank:l+1},l))})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üìà Marktwert-Entwicklung"}),e.jsx("div",{className:"space-y-4",children:a.trends.map((n,l)=>e.jsx(Ys,{trend:n},l))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üí° Investment-Chancen"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.opportunities.map((n,l)=>e.jsx(Xs,{opportunity:n},l))})]})]})}function Zs({data:s}){const{forecast:t,scenarios:a,recommendations:n}=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üîÆ Finanz-Prognose"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(je,{period:"Next Quarter",value:`‚Ç¨${t.nextQuarter.toLocaleString()}`,confidence:t.confidence.quarter,icon:"üìÖ"}),e.jsx(je,{period:"Saisonende",value:`‚Ç¨${t.seasonEnd.toLocaleString()}`,confidence:t.confidence.season,icon:"üèÅ"}),e.jsx(je,{period:"N√§chste Saison",value:`‚Ç¨${t.nextSeason.toLocaleString()}`,confidence:t.confidence.nextSeason,icon:"üîÑ"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üé≠ Szenario-Analyse"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(fe,{title:"Optimistisch",scenario:a.optimistic,color:"bg-green-100 border-green-300",icon:"üìà"}),e.jsx(fe,{title:"Realistisch",scenario:a.realistic,color:"bg-blue-100 border-blue-300",icon:"üìä"}),e.jsx(fe,{title:"Pessimistisch",scenario:a.pessimistic,color:"bg-red-100 border-red-300",icon:"üìâ"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üí° Budget-Empfehlungen"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"üîµ AEK Empfehlungen"}),e.jsx("div",{className:"space-y-3",children:n.aek.map((l,r)=>e.jsx(We,{recommendation:l},r))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"üî¥ Real Empfehlungen"}),e.jsx("div",{className:"space-y-3",children:n.real.map((l,r)=>e.jsx(We,{recommendation:l},r))})]})]})]})]})}function Qs({data:s}){const{health:t}=s;return e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üè• Financial Health Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(ce,{title:"Liquidit√§t",score:t.liquidity.score,status:t.liquidity.status,icon:"üíß"}),e.jsx(ce,{title:"Stabilit√§t",score:t.stability.score,status:t.stability.status,icon:"üèõÔ∏è"}),e.jsx(ce,{title:"Wachstum",score:t.growth.score,status:t.growth.status,icon:"üìà"}),e.jsx(ce,{title:"Effizienz",score:t.efficiency.score,status:t.efficiency.status,icon:"‚ö°"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"üéØ Gesamt-Assessment"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-green",children:[t.overallScore,"/100"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Financial Health Score"})]}),e.jsxs("div",{className:"flex-2",children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:t.overallStatus}),e.jsx("div",{className:"text-xs text-gray-600",children:t.summary})]})]})]})]})}function ne({title:s,value:t,change:a,icon:n,color:l}){const r=a>=0;return e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:n}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:s})]}),e.jsx("div",{className:`text-2xl font-bold ${l}`,children:t}),e.jsxs("div",{className:`text-sm flex items-center gap-1 ${r?"text-green-600":"text-red-600"}`,children:[e.jsx("span",{children:r?"‚ÜóÔ∏è":"‚ÜòÔ∏è"}),e.jsxs("span",{children:[r?"+":"",a,"%"]})]})]})}function Fe({team:s,data:t}){return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-3",children:s}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Budget:"}),e.jsxs("span",{className:"font-semibold",children:["‚Ç¨",t.budget.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ausgegeben:"}),e.jsxs("span",{className:"font-semibold",children:["‚Ç¨",t.spent.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Verf√ºgbar:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["‚Ç¨",t.available.toLocaleString()]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-primary-blue h-2 rounded-full",style:{width:`${t.spent/t.budget*100}%`}})})]})]})}function ue({title:s,aek:t,real:a,format:n}){const l=r=>n==="currency"?`‚Ç¨${r.toLocaleString()}`:r.toString();return e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"font-semibold mb-3",children:s}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-primary-blue",children:"AEK:"}),e.jsx("span",{className:"font-semibold",children:l(t)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-accent-red",children:"Real:"}),e.jsx("span",{className:"font-semibold",children:l(a)})]}),e.jsx("div",{className:"text-xs text-gray-600 text-center pt-2 border-t",children:t<a?"AEK effizienter":a<t?"Real effizienter":"Gleichstand"})]})]})}function re({title:s,value:t,benchmark:a,icon:n}){const r=(typeof t=="string"?parseFloat(t):t)>=a;return e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:n}),e.jsx("span",{className:"text-sm font-medium",children:s})]}),e.jsx("div",{className:"text-2xl font-bold",children:t}),e.jsxs("div",{className:`text-xs ${r?"text-green-600":"text-red-600"}`,children:["Benchmark: ",a,typeof a=="number"?"%":""]})]})}function Le({player:s,rank:t}){return e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:["#",t]}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold text-green-600",children:[s.roi,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["‚Ç¨",s.investment,"k"]})]})]})}function $e({investment:s,type:t}){const a=t==="best"?"bg-green-50 border-green-200":"bg-red-50 border-red-200",n=t==="best"?"text-green-800":"text-red-800";return e.jsx("div",{className:`p-3 rounded-lg border ${a}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm",children:s.player}),e.jsx("div",{className:"text-xs text-gray-600",children:s.team})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold ${n}`,children:[s.roi,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["‚Ç¨",s.investment,"k"]})]})]})})}function ie({title:s,value:t,icon:a,color:n}){return e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:a}),e.jsx("span",{className:"text-sm font-medium",children:s})]}),e.jsx("div",{className:`text-2xl font-bold ${n}`,children:t})]})}function ze({player:s,rank:t}){const a=s.change>=0?"text-green-600":"text-red-600",n=s.change>=0?"‚ÜóÔ∏è":"‚ÜòÔ∏è";return e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:["#",t]}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-bold",children:["‚Ç¨",s.currentValue.toLocaleString()]}),e.jsxs("div",{className:`text-xs ${a}`,children:[n," ",Math.abs(s.change).toFixed(1),"%"]})]})]})}function Ys({trend:s}){return e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:s.player}),e.jsx("div",{className:"text-sm text-gray-600",children:s.team})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:["+",s.trend,"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:s.period})]})]})}function Xs({opportunity:s}){const t={Low:"text-green-600",Medium:"text-yellow-600",High:"text-red-600"};return e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:s.type}),e.jsxs("span",{className:`text-xs ${t[s.risk]}`,children:[s.risk," Risk"]})]}),e.jsx("div",{className:"text-lg font-bold mb-1",children:s.player}),e.jsxs("div",{className:"text-sm text-green-600 font-semibold",children:["+",s.potential,"% Potential"]})]})}function je({period:s,value:t,confidence:a,icon:n}){return e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl mb-2",children:n}),e.jsx("div",{className:"font-semibold text-sm mb-1",children:s}),e.jsx("div",{className:"text-2xl font-bold text-primary-green mb-1",children:t}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Konfidenz: ",a,"%"]})]})}function fe({title:s,scenario:t,color:a,icon:n}){return e.jsxs("div",{className:`p-4 rounded-lg border ${a}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:n}),e.jsx("span",{className:"font-semibold",children:s})]}),e.jsxs("div",{className:"text-2xl font-bold mb-2",children:["‚Ç¨",t.budget.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:t.description}),e.jsxs("div",{className:"text-xs",children:["Wahrscheinlichkeit: ",t.probability,"%"]})]})}function We({recommendation:s}){const t={Invest:"bg-green-100 text-green-800",Save:"bg-blue-100 text-blue-800",Optimize:"bg-yellow-100 text-yellow-800",Monitor:"bg-orange-100 text-orange-800",Plan:"bg-purple-100 text-purple-800"},a={High:"text-red-600",Medium:"text-yellow-600",Low:"text-green-600"};return e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${t[s.type]}`,children:s.type}),e.jsx("span",{className:`text-xs font-semibold ${a[s.priority]}`,children:s.priority})]}),e.jsx("div",{className:"text-sm",children:s.action})]})}function ce({title:s,score:t,status:a,icon:n}){const l=r=>r>=80?"text-green-600":r>=60?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl mb-2",children:n}),e.jsx("div",{className:"font-semibold text-sm mb-1",children:s}),e.jsxs("div",{className:`text-2xl font-bold ${l(t)}`,children:[t,"/100"]}),e.jsx("div",{className:"text-xs text-gray-600",children:a})]})}function et(){const[s,t]=P.useState("all"),[a,n]=P.useState("grid"),[l,r]=P.useState(!0),[i,h]=P.useState([]),{data:c,loading:N}=K("players","*"),{data:S,loading:E}=K("matches","*"),{data:k,loading:G}=K("bans","*"),v=N||E||G,w=P.useMemo(()=>!c||!S?null:mt(c,S,k||[]),[c,S,k]);if(P.useEffect(()=>{if(w){const f=w.achievements.filter(A=>A.unlocked&&A.isNew).slice(0,3);h(f)}},[w]),v)return e.jsx(Z,{message:"Lade Achievement System..."});const y=(w==null?void 0:w.achievements.filter(f=>!(s!=="all"&&f.category!==s||!l&&f.unlocked)))||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"üèÜ Achievement & Milestone System"}),e.jsx("p",{className:"text-text-secondary text-sm",children:"Verfolge Erfolge, erreiche Meilensteine und sammle Auszeichnungen"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("select",{value:s,onChange:f=>t(f.target.value),className:"modern-select",children:[e.jsx("option",{value:"all",children:"Alle Kategorien"}),e.jsx("option",{value:"goals",children:"Tore & Scoring"}),e.jsx("option",{value:"matches",children:"Spiele & Siege"}),e.jsx("option",{value:"team",children:"Team-Erfolge"}),e.jsx("option",{value:"individual",children:"Individuelle Erfolge"}),e.jsx("option",{value:"special",children:"Spezial-Awards"}),e.jsx("option",{value:"milestones",children:"Meilensteine"})]}),e.jsxs("select",{value:a,onChange:f=>n(f.target.value),className:"modern-select",children:[e.jsx("option",{value:"grid",children:"Grid-Ansicht"}),e.jsx("option",{value:"list",children:"Listen-Ansicht"}),e.jsx("option",{value:"timeline",children:"Timeline"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:f=>r(f.target.checked),className:"rounded"}),"Erreichte anzeigen"]})]})]})}),i.length>0&&e.jsx("div",{className:"modern-card bg-gradient-to-r from-primary-green/10 to-accent-yellow/10 border-primary-green",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üéâ"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-primary-green",children:"Neue Erfolge freigeschaltet!"}),e.jsx("div",{className:"text-sm text-gray-600",children:i.map(f=>f.name).join(", ")})]})]})}),w&&e.jsxs(e.Fragment,{children:[e.jsx(st,{data:w}),e.jsx(tt,{data:w}),a==="grid"&&e.jsx(at,{achievements:y}),a==="list"&&e.jsx(lt,{achievements:y}),a==="timeline"&&e.jsx(nt,{achievements:y}),e.jsx(rt,{data:w})]})]})}function st({data:s}){var n;const{stats:t,milestones:a}=s;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(de,{title:"Gesamt Erfolge",value:`${t.unlockedCount}/${t.totalCount}`,percentage:Math.round(t.unlockedCount/t.totalCount*100),icon:"üèÜ",color:"text-accent-yellow"}),e.jsx(de,{title:"Aktuelle Streak",value:t.currentStreak,subtitle:"Aufeinanderfolgende Erfolge",icon:"üî•",color:"text-accent-orange"}),e.jsx(de,{title:"Seltene Erfolge",value:t.rareAchievements,subtitle:"Schwer zu erreichen",icon:"üíé",color:"text-primary-blue"}),e.jsx(de,{title:"N√§chster Meilenstein",value:((n=a.next)==null?void 0:n.name)||"Alle erreicht",subtitle:a.next?`${a.next.progress}%`:"100%",icon:"üéØ",color:"text-primary-green"})]})}function tt({data:s}){const{inProgress:t}=s;return e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üìà"})," Aktuelle Fortschritte"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((a,n)=>e.jsx(it,{achievement:a},n))})]})}function at({achievements:s}){return e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üèÜ Erfolge & Auszeichnungen"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map((t,a)=>e.jsx(ct,{achievement:t},a))})]})}function lt({achievements:s}){return e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"üìã Erfolge-Liste"}),e.jsx("div",{className:"space-y-2",children:s.map((t,a)=>e.jsx(dt,{achievement:t},a))})]})}function nt({achievements:s}){const t=s.filter(a=>a.unlocked).sort((a,n)=>new Date(n.unlockedDate)-new Date(a.unlockedDate));return e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"‚è∞ Erfolge-Timeline"}),e.jsx("div",{className:"space-y-4",children:t.map((a,n)=>e.jsx(ot,{achievement:a},n))})]})}function rt({data:s}){const{leaderboards:t}=s;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(pe,{title:"ü•á Most Achievements",entries:t.mostAchievements,metric:"achievements"}),e.jsx(pe,{title:"üî• Longest Streak",entries:t.longestStreak,metric:"streak"}),e.jsx(pe,{title:"üíé Rare Collector",entries:t.rareCollector,metric:"rare"})]})}function de({title:s,value:t,percentage:a,subtitle:n,icon:l,color:r}){return e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xl",children:l}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:s})]}),e.jsx("div",{className:`text-2xl font-bold ${r}`,children:t}),a&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-primary-green h-2 rounded-full transition-all duration-300",style:{width:`${a}%`}})}),n&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:n})]})}function it({achievement:s}){return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:s.icon}),e.jsx("span",{className:"font-semibold text-sm",children:s.name})]}),e.jsx("div",{className:"text-xs text-gray-600 mb-2",children:s.description}),e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Fortschritt"}),e.jsxs("span",{className:"text-xs font-semibold",children:[s.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-blue h-2 rounded-full transition-all duration-300",style:{width:`${s.progress}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.current,"/",s.target," ",s.unit]})]})}function ct({achievement:s}){return e.jsx("div",{className:`
      p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer hover:scale-105
      ${s.unlocked?"bg-gradient-to-br from-accent-yellow/20 to-primary-green/20 border-accent-yellow":"bg-gray-50 border-gray-200"}
    `,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-3xl mb-2 ${s.unlocked?"":"grayscale opacity-50"}`,children:s.icon}),e.jsx("div",{className:"font-semibold text-sm mb-1",children:s.name}),e.jsx("div",{className:"text-xs text-gray-600 mb-2",children:s.description}),s.unlocked?e.jsxs("div",{className:"text-xs text-primary-green font-semibold",children:["‚úì Freigeschaltet",s.unlockedDate&&e.jsx("div",{className:"text-gray-500",children:Ne(s.unlockedDate)})]}):e.jsxs("div",{className:"text-xs text-gray-500",children:[s.progress,"% (",s.current,"/",s.target,")"]}),e.jsx("div",{className:`
          inline-block px-2 py-1 rounded text-xs mt-2
          ${ve(s.rarity)}
        `,children:s.rarity})]})})}function dt({achievement:s}){return e.jsxs("div",{className:`
      flex items-center gap-4 p-3 rounded-lg
      ${s.unlocked?"bg-green-50":"bg-gray-50"}
    `,children:[e.jsx("div",{className:`text-2xl ${s.unlocked?"":"grayscale opacity-50"}`,children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600",children:s.description}),!s.unlocked&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Fortschritt: ",s.current,"/",s.target," ",s.unit]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`
          px-2 py-1 rounded text-xs
          ${ve(s.rarity)}
        `,children:s.rarity}),s.unlocked?e.jsxs("div",{className:"text-xs text-primary-green mt-1",children:["‚úì ",Ne(s.unlockedDate)]}):e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.progress,"%"]})]})]})}function ot({achievement:s}){return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-primary-green rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:s.icon})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold",children:s.name}),e.jsx("span",{className:`
            px-2 py-1 rounded text-xs
            ${ve(s.rarity)}
          `,children:s.rarity})]}),e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:s.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Freigeschaltet am ",Ne(s.unlockedDate)]})]})]})}function pe({title:s,entries:t,metric:a}){return e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"font-semibold mb-3",children:s}),e.jsx("div",{className:"space-y-2",children:t.map((n,l)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-mono w-6",children:["#",l+1]}),e.jsx("span",{className:"text-sm",children:n.name})]}),e.jsxs("span",{className:"text-sm font-semibold",children:[n[a],a==="achievements"&&" üèÜ",a==="streak"&&" üî•",a==="rare"&&" üíé"]})]},l))})]})}function ve(s){const t={Common:"bg-gray-100 text-gray-700",Uncommon:"bg-green-100 text-green-700",Rare:"bg-blue-100 text-blue-700",Epic:"bg-purple-100 text-purple-700",Legendary:"bg-yellow-100 text-yellow-700"};return t[s]||t.Common}function Ne(s){return new Date(s).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}function mt(s,t,a){console.log("Calculating achievements for",s.length,"players,",t.length,"matches,",a.length,"bans");const n=[{id:"first_goal",name:"Erstes Tor",description:"Erziele dein erstes Tor",icon:"‚öΩ",category:"goals",rarity:"Common",target:1,unit:"Tore",unlocked:!0,unlockedDate:"2024-01-15",isNew:!1},{id:"hat_trick",name:"Hattrick",description:"Erziele 3 Tore in einem Spiel",icon:"üé©",category:"goals",rarity:"Rare",target:3,unit:"Tore in einem Spiel",unlocked:!1,progress:67,current:2},{id:"goal_machine",name:"Tormaschine",description:"Erziele 50 Tore insgesamt",icon:"üèÜ",category:"goals",rarity:"Epic",target:50,unit:"Tore",unlocked:!1,progress:60,current:30},{id:"first_win",name:"Erster Sieg",description:"Gewinne dein erstes Spiel",icon:"üèÖ",category:"matches",rarity:"Common",target:1,unit:"Siege",unlocked:!0,unlockedDate:"2024-01-20",isNew:!1},{id:"winning_streak",name:"Siegesserie",description:"Gewinne 5 Spiele in Folge",icon:"üî•",category:"matches",rarity:"Uncommon",target:5,unit:"Siege in Folge",unlocked:!0,unlockedDate:"2024-02-10",isNew:!0},{id:"century",name:"Jahrhundert",description:"Spiele 100 Matches",icon:"üíØ",category:"matches",rarity:"Rare",target:100,unit:"Spiele",unlocked:!1,progress:45,current:45},{id:"team_player",name:"Teamplayer",description:"Gebe 10 Assists",icon:"ü§ù",category:"team",rarity:"Uncommon",target:10,unit:"Assists",unlocked:!1,progress:70,current:7},{id:"captain",name:"Kapit√§n",description:"F√ºhre dein Team 25 Mal an",icon:"üëë",category:"team",rarity:"Rare",target:25,unit:"Spiele als Kapit√§n",unlocked:!1,progress:32,current:8},{id:"player_of_match",name:"Spieler des Spiels",description:"Werde 5 Mal Spieler des Spiels",icon:"‚≠ê",category:"individual",rarity:"Uncommon",target:5,unit:"SdS-Titel",unlocked:!0,unlockedDate:"2024-03-01",isNew:!0},{id:"consistent",name:"Konstant",description:"Spiele 20 Matches ohne Sperre",icon:"üìà",category:"individual",rarity:"Uncommon",target:20,unit:"Spiele ohne Sperre",unlocked:!1,progress:85,current:17},{id:"comeback_king",name:"Comeback-K√∂nig",description:"Drehe 3 Spiele nach R√ºckstand",icon:"üîÑ",category:"special",rarity:"Epic",target:3,unit:"Comeback-Siege",unlocked:!1,progress:33,current:1},{id:"legendary",name:"Legende",description:"Erreiche alle anderen Erfolge",icon:"üåü",category:"special",rarity:"Legendary",target:10,unit:"Andere Erfolge",unlocked:!1,progress:30,current:3}];n.forEach(c=>{c.unlocked||(c.current=c.current||Math.floor(c.target*(c.progress/100)))});const l={totalCount:n.length,unlockedCount:n.filter(c=>c.unlocked).length,currentStreak:3,rareAchievements:n.filter(c=>c.unlocked&&["Epic","Legendary"].includes(c.rarity)).length},r={next:n.find(c=>!c.unlocked&&c.progress>50)},i=n.filter(c=>!c.unlocked&&c.progress>0).sort((c,N)=>N.progress-c.progress).slice(0,6);return{achievements:n,stats:l,milestones:r,inProgress:i,leaderboards:{mostAchievements:[{name:"Max Mustermann",achievements:8},{name:"John Smith",achievements:6},{name:"Hans Mueller",achievements:5}],longestStreak:[{name:"Carlos Rodriguez",streak:7},{name:"Max Mustermann",streak:5},{name:"Antonio Silva",streak:4}],rareCollector:[{name:"Max Mustermann",rare:3},{name:"John Smith",rare:2},{name:"Carlos Rodriguez",rare:1}]}}}class xt{constructor(t,a,n,l){this.matches=t||[],this.players=a||[],this.bans=n||[],this.spielerDesSpiels=l||[],this.aekPlayers=(a||[]).filter(r=>r.team==="AEK"),this.realPlayers=(a||[]).filter(r=>r.team==="Real")}calculateTeamRecords(){const t={wins:0,losses:0},a={wins:0,losses:0};return this.matches.forEach(n=>{const l=n.goalsa||0,r=n.goalsb||0;l>r?(t.wins++,a.losses++):r>l&&(a.wins++,t.losses++)}),{aek:t,real:a}}calculateRecentForm(t=5){const a=this.matches.slice(-t),n=[],l=[];return a.forEach(r=>{const i=r.goalsa||0,h=r.goalsb||0;i>h?(n.push("W"),l.push("L")):h>i?(n.push("L"),l.push("W")):(n.push("D"),l.push("D"))}),{aek:n,real:l}}calculatePlayerStats(){return this.players.map(t=>{const a=this.countPlayerMatches(),n=this.bans.filter(i=>i.player_id===t.id),l=this.spielerDesSpiels.find(i=>i.name===t.name&&i.team===t.team),r=l&&l.count||0;return{...t,goals:t.goals||0,matchesPlayed:a,sdsCount:r,goalsPerGame:a>0?((t.goals||0)/a).toFixed(2):"0.00",totalBans:n.length,disciplinaryScore:this.calculateDisciplinaryScore(n)}}).sort((t,a)=>(a.goals||0)-(t.goals||0))}countPlayerGoalsFromMatches(t,a){let n=0;return this.matches.forEach(l=>{a==="AEK"&&l.goalslista&&(Array.isArray(l.goalslista)?l.goalslista:typeof l.goalslista=="string"?JSON.parse(l.goalslista):[]).forEach(i=>{const h=typeof i=="string"?i:i.player,c=typeof i=="string"?1:i.count||1;h===t&&(n+=c)}),a==="Real"&&l.goalslistb&&(Array.isArray(l.goalslistb)?l.goalslistb:typeof l.goalslistb=="string"?JSON.parse(l.goalslistb):[]).forEach(i=>{const h=typeof i=="string"?i:i.player,c=typeof i=="string"?1:i.count||1;h===t&&(n+=c)})}),n}countPlayerMatches(){return this.matches.length}calculateDisciplinaryScore(t){let a=0;return t.forEach(n=>{switch(n.type){case"Gelb-Rote Karte":a+=3;break;case"Rote Karte":a+=5;break;case"Verletzung":a+=1;break;default:a+=1}}),a}calculateAdvancedStats(){const t=this.matches.length,a=this.matches.reduce((n,l)=>n+(l.goalsa||0)+(l.goalsb||0),0);return{avgGoalsPerMatch:t>0?(a/t).toFixed(2):"0.00",totalMatches:t,totalGoals:a,aekTotalGoals:this.matches.reduce((n,l)=>n+(l.goalsa||0),0),realTotalGoals:this.matches.reduce((n,l)=>n+(l.goalsb||0),0),highestScoringMatch:t>0?Math.max(...this.matches.map(n=>(n.goalsa||0)+(n.goalsb||0))):0,cleanSheets:{aek:this.matches.filter(n=>n.goalsb===0).length,real:this.matches.filter(n=>n.goalsa===0).length}}}calculatePerformanceTrends(){const t={};return this.matches.forEach(a=>{const n=new Date(a.date),l=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;t[l]||(t[l]={month:l,aekWins:0,realWins:0,totalGoals:0,matchCount:0});const r=a.goalsa||0,i=a.goalsb||0;t[l].totalGoals+=r+i,t[l].matchCount++,r>i?t[l].aekWins++:i>r&&t[l].realWins++}),t}calculateHeadToHead(){const t={totalMatches:this.matches.length,aekWins:0,realWins:0,aekGoals:0,realGoals:0,biggestAekWin:{diff:0,score:"",date:"",opponent:"Real Madrid"},biggestRealWin:{diff:0,score:"",date:"",opponent:"AEK Athen"}};return this.matches.forEach(a=>{const n=a.goalsa||0,l=a.goalsb||0,r=Math.abs(n-l);t.aekGoals+=n,t.realGoals+=l,n>l?(t.aekWins++,r>t.biggestAekWin.diff&&(t.biggestAekWin={diff:r,score:`${n}:${l}`,date:a.date||"",opponent:"Real Madrid"})):l>n&&(t.realWins++,r>t.biggestRealWin.diff&&(t.biggestRealWin={diff:r,score:`${l}:${n}`,date:a.date||"",opponent:"AEK Athen"}))}),t}}const F={clToLiters:s=>(s/100).toFixed(3),clToShots:s=>(s/2).toFixed(0),clToGlasses:s=>(s/20).toFixed(1),formatAlcoholDisplay:s=>({cl:s,liters:(s/100).toFixed(3),shots:Math.floor(s/2),glasses:(s/20).toFixed(1)})};function gt({onNavigate:s}){const[t,a]=P.useState("dashboard"),n=()=>{var x,o,W,g;try{const u=localStorage.getItem("teamManagers");if(u){const M=JSON.parse(u);return{aekChef:{name:((x=M.aek)==null?void 0:x.name)||"Alexander",weight:((o=M.aek)==null?void 0:o.weight)||100,gender:"male"},realChef:{name:((W=M.real)==null?void 0:W.name)||"Philip",weight:((g=M.real)==null?void 0:g.weight)||105,gender:"male"}}}}catch(u){console.error("Error loading manager settings:",u)}return{aekChef:{name:"Alexander",weight:100,gender:"male"},realChef:{name:"Philip",weight:105,gender:"male"}}},[l,r]=P.useState({aekPlayer:"",realPlayer:"",aekGoals:0,realGoals:0,mode:"manual",playerData:n(),gameDay:new Date().toISOString().split("T")[0],beerCount:0}),{data:i,loading:h}=K("matches","*"),{data:c,loading:N}=K("players","*"),{data:S,loading:E}=K("spieler_des_spiels","*"),{data:k,loading:G}=K("bans","*");P.useEffect(()=>{const x=()=>{r(o=>({...o,playerData:n()}))};return window.addEventListener("storage",x),window.addEventListener("managerSettingsChanged",x),()=>{window.removeEventListener("storage",x),window.removeEventListener("managerSettingsChanged",x)}},[]);const v=h||N||E||G,w=new xt(i,c,k,S),y=w.calculateTeamRecords(),f=w.calculateRecentForm(5),A=w.calculatePlayerStats(),b=w.calculateAdvancedStats(),L=w.calculatePerformanceTrends(),j=w.calculateHeadToHead(),z=(i==null?void 0:i.length)||0,V=(c==null?void 0:c.filter(x=>x.team==="AEK"))||[],H=(c==null?void 0:c.filter(x=>x.team==="Real"))||[],Y=V.reduce((x,o)=>x+(o.value||0),0),Q=H.reduce((x,o)=>x+(o.value||0),0),se=Y+Q,U=y.aek.wins,p=y.real.wins,D=x=>x.map((o,W)=>e.jsx("span",{className:`inline-block w-6 h-6 text-xs font-bold rounded-full text-center leading-6 mx-0.5 ${o==="W"?"bg-green-500 text-white":o==="L"?"bg-red-500 text-white":"bg-gray-400 text-white"}`,children:o},W)),I=x=>`${(x||0).toFixed(1)}M ‚Ç¨`,Be=[{id:"dashboard",label:"Dashboard",icon:"üéØ"},{id:"overview",label:"√úbersicht",icon:"üìä"},{id:"players",label:"Spieler",icon:"üë•"},{id:"teams",label:"Teams",icon:"üèÜ"},{id:"trends",label:"Trends",icon:"üìà"},{id:"alkohol",label:"Alkohol",icon:"üç∫"},{id:"advanced",label:"Erweitert",icon:"üî¨"},{id:"playeranalytics",label:"Spieler-Analytics",icon:"üéØ"},{id:"matchprediction",label:"Match-Prediction",icon:"üîÆ"},{id:"financialanalytics",label:"Finanz-Analytics",icon:"üí∞"},{id:"achievements",label:"Achievements",icon:"üèÜ"}];if(v)return e.jsx(Z,{message:"Lade Statistiken..."});const Ve=()=>{const x=A.length>0?A[0]:null,o=A.filter(g=>g.sdsCount>0).sort((g,u)=>u.sdsCount-g.sdsCount)[0],W=i==null?void 0:i.reduce((g,u)=>{const M=d=>{if(!d)return[];try{return typeof d=="string"?JSON.parse(d):d}catch{return[]}},R=M(u.goalslista),$=M(u.goalslistb);return[...R,...$].forEach(d=>{const m=typeof d=="object"?d.player:d,T=typeof d=="object"?d.count:1;T>g.count&&(g={player:m,count:T,match:u})}),g},{player:null,count:0,match:null});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:z}),e.jsx("div",{className:"text-sm text-text-muted",children:"Spiele gespielt"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:b.totalGoals}),e.jsx("div",{className:"text-sm text-text-muted",children:"Tore insgesamt"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["‚åÄ ",z>0?(b.totalGoals/z).toFixed(1):"0.0","/Spiel"]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary-green",children:x?x.name:"Keine Daten"}),e.jsxs("div",{className:"text-sm text-text-muted",children:["ü•á Topscorer (",x?x.goals:0," Tore)"]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:x&&x.matchesPlayed>0?`‚åÄ ${(x.goals/x.matchesPlayed).toFixed(2)}/Spiel`:"‚åÄ 0.00/Spiel"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary-green",children:o?o.name:"Keine Daten"}),e.jsxs("div",{className:"text-sm text-text-muted",children:["‚≠ê Top SdS (",o?o.sdsCount:0,"x)"]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:o&&o.matchesPlayed>0?`${(o.sdsCount/o.matchesPlayed*100).toFixed(1)}% Quote`:"0.0% Quote"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:j.biggestAekWin.diff>0?j.biggestAekWin.score:"‚Äì"}),e.jsx("div",{className:"text-sm text-text-muted",children:"üîµ Gr√∂√üter AEK Sieg"}),j.biggestAekWin.diff>0&&e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["vs ",j.biggestAekWin.opponent,e.jsx("br",{}),new Date(j.biggestAekWin.date).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-red-600",children:j.biggestRealWin.diff>0?j.biggestRealWin.score:"‚Äì"}),e.jsx("div",{className:"text-sm text-text-muted",children:"üî¥ Gr√∂√üter Real Sieg"}),j.biggestRealWin.diff>0&&e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["vs ",j.biggestRealWin.opponent,e.jsx("br",{}),new Date(j.biggestRealWin.date).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-accent-blue",children:(W==null?void 0:W.player)||"Keine Daten"}),e.jsxs("div",{className:"text-sm text-text-muted",children:["‚öΩ Meiste Tore (",(W==null?void 0:W.count)||0," in einem Spiel)"]}),(W==null?void 0:W.match)&&e.jsx("div",{className:"text-xs text-text-muted mt-1",children:new Date(W.match.date).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-xl font-bold text-accent-red",children:(()=>{const g={};k==null||k.forEach(M=>{const R=c==null?void 0:c.find(d=>d.id===M.player_id),$=(R==null?void 0:R.name)||"Unbekannt";g[$]=(g[$]||0)+1});const u=Object.entries(g).sort((M,R)=>R[1]-M[1])[0];return u?u[0]:"Keine Daten"})()}),e.jsxs("div",{className:"text-sm text-text-muted",children:["üü• Meiste Sperren (",(()=>{const g={};k==null||k.forEach(M=>{const R=c==null?void 0:c.find(d=>d.id===M.player_id),$=(R==null?void 0:R.name)||"Unbekannt";g[$]=(g[$]||0)+1});const u=Object.entries(g).sort((M,R)=>R[1]-M[1])[0];return u?u[1]:0})(),"x)"]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìä Erweiterte Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-primary-green",children:(()=>{const g=(k==null?void 0:k.reduce((M,R)=>{const $=new Date(R.start_date),d=new Date(R.end_date),m=Math.ceil((d-$)/(1e3*60*60*24));return M+(m>0?m:0)},0))||0;return`${(k==null?void 0:k.length)>0?(g/k.length).toFixed(1):"0.0"} Tage`})()}),e.jsx("div",{className:"text-sm text-text-muted",children:"‚åÄ Sperrenl√§nge"})]}),e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-accent-blue",children:A.filter(g=>g.goals>0).length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Aktive Torsch√ºtzen"})]}),e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-accent-red",children:(k==null?void 0:k.length)||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Sperren"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üí° Besondere Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:(()=>{let g=0,u=0,M=0;return i==null||i.forEach(R=>{const $=R.goalsa||0,d=R.goalsb||0;$>d?(u++,M=0,u>g&&(g=u)):d>$?(M++,u=0,M>g&&(g=M)):(u=0,M=0)}),g})()}),e.jsx("div",{className:"text-sm text-green-700",children:"üî• L√§ngste Siegesserie"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:(()=>{let g=0,u=0,M=0,R="";return i==null||i.forEach($=>{const d=$.goalsa||0,m=$.goalsb||0;d>m?(u++,M=0,u>g&&(g=u,R="AEK")):m>d?(M++,u=0,M>g&&(g=M,R="Real")):(u=0,M=0)}),R||"Keine"})()})]}),e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"text-xl font-bold text-yellow-600",children:(()=>{let g=0;return A.forEach(u=>{if(u.matchesPlayed>0){const M=u.goals/u.matchesPlayed;M>g&&(g=M)}}),g.toFixed(2)})()}),e.jsx("div",{className:"text-sm text-yellow-700",children:"‚ö° H√∂chste Effizienz"}),e.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:(()=>{let g=0,u=null;return A.forEach(M=>{if(M.matchesPlayed>0){const R=M.goals/M.matchesPlayed;R>g&&(g=R,u=M.name)}}),u||"Keine Daten"})()})]}),e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:(()=>{const g=y.aek.wins,u=y.real.wins;return g+u===0?"100%":`${(Math.min(g,u)/Math.max(g,u)*100).toFixed(0)}%`})()}),e.jsx("div",{className:"text-sm text-blue-700",children:"‚öñÔ∏è Team-Balance"}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Ausgeglichenheit (",y.aek.wins,":",y.real.wins,")"]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card border-l-4 border-blue-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-blue-600",children:"AEK Athen"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-semibold text-green-600",children:U})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-semibold text-red-600",children:y.aek.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Marktwert:"}),e.jsx("span",{className:"font-semibold",children:I(Y)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null:"}),e.jsx("span",{className:"font-semibold",children:b.cleanSheets.aek})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm text-text-muted mb-1",children:"Form (letzte 5):"}),e.jsx("div",{className:"flex",children:D(f.aek)})]})]})]}),e.jsxs("div",{className:"modern-card border-l-4 border-red-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-red-600",children:"Real Madrid"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-semibold text-green-600",children:p})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-semibold text-red-600",children:y.real.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Marktwert:"}),e.jsx("span",{className:"font-semibold",children:I(Q)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null:"}),e.jsx("span",{className:"font-semibold",children:b.cleanSheets.real})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm text-text-muted mb-1",children:"Form (letzte 5):"}),e.jsx("div",{className:"flex",children:D(f.real)})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üèÜ Top-Torsch√ºtzen"}),e.jsx("div",{className:"space-y-2",children:A.slice(0,5).map((g,u)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${u===0?"bg-yellow-500 text-white":u===1?"bg-gray-400 text-white":u===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:u+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:g.name}),e.jsx("div",{className:"text-sm text-text-muted",children:g.team})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:[g.goals," Tore"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[g.goalsPerGame," ‚åÄ"]})]})]},g.id))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"‚≠ê Top-Spieler des Spiels"}),e.jsx("div",{className:"space-y-2",children:A.filter(g=>g.sdsCount>0).sort((g,u)=>u.sdsCount-g.sdsCount).slice(0,5).map((g,u)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${u===0?"bg-yellow-500 text-white":u===1?"bg-gray-400 text-white":u===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:u+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:g.name}),e.jsx("div",{className:"text-sm text-text-muted",children:g.team})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:[g.sdsCount,"x SdS"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[g.matchesPlayed>0?(g.sdsCount/g.matchesPlayed*100).toFixed(1):"0.0","% Quote"]})]})]},g.id))}),A.filter(g=>g.sdsCount>0).length===0&&e.jsx("div",{className:"text-center text-text-muted py-4",children:"Noch keine Spieler des Spiels Auszeichnungen vergeben"})]})]})},Ie=()=>e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìä Spielerstatistiken"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border-light",children:[e.jsx("th",{className:"text-left py-2",children:"Spieler"}),e.jsx("th",{className:"text-left py-2",children:"Team"}),e.jsx("th",{className:"text-center py-2",children:"Tore"}),e.jsx("th",{className:"text-center py-2",children:"‚åÄ/Spiel"}),e.jsx("th",{className:"text-center py-2",children:"SdS"}),e.jsx("th",{className:"text-center py-2",children:"Sperren"}),e.jsx("th",{className:"text-right py-2",children:"Marktwert"})]})}),e.jsx("tbody",{children:A.map(x=>e.jsxs("tr",{className:"border-b border-border-light hover:bg-bg-secondary",children:[e.jsx("td",{className:"py-2 font-medium",children:x.name}),e.jsx("td",{className:"py-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x.team==="AEK"?"bg-blue-100 text-blue-800":x.team==="Ehemalige"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:x.team})}),e.jsx("td",{className:"py-2 text-center font-bold",children:x.goals}),e.jsx("td",{className:"py-2 text-center",children:x.goalsPerGame}),e.jsx("td",{className:"py-2 text-center",children:x.sdsCount}),e.jsx("td",{className:"py-2 text-center",children:x.totalBans}),e.jsx("td",{className:"py-2 text-right",children:I(x.value)})]},x.id))})]})})]}),Oe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"‚öñÔ∏è Team-Vergleich"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-blue-600",children:"AEK Athen"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:V.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-medium",children:U})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-medium",children:y.aek.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gesamtmarktwert:"}),e.jsx("span",{className:"font-medium",children:I(Y)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsx("span",{className:"font-medium",children:b.cleanSheets.aek})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-red-600",children:"Real Madrid"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:H.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-medium",children:p})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-medium",children:y.real.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gesamtmarktwert:"}),e.jsx("span",{className:"font-medium",children:I(Q)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsx("span",{className:"font-medium",children:b.cleanSheets.real})]})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìà Erweiterte Statistiken"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Diese Statistiken bieten tiefere Einblicke in die Team-Performance und wichtige Kennzahlen."}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:b.highestScoringMatch}),e.jsx("div",{className:"text-sm text-text-muted",children:"H√∂chste Toranzahl"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"in einem einzelnen Spiel"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:I(se)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamtmarktwert"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"aller aktiven Spieler"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:Math.abs(U-p)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Siegesdifferenz"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"zwischen den Teams"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-blue",children:z>0?((V.length+H.length)*(z/2)).toFixed(0):0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesch√§tzte Spielminuten"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"pro Spieler (‚åÄ 45min)"})]})]}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:"üéØ Offensive Highlights"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Torreichstes Team:"}),e.jsxs("span",{className:"font-medium",children:[b.aekTotalGoals>=b.realTotalGoals?"AEK Athen":"Real Madrid","(",Math.max(b.aekTotalGoals,b.realTotalGoals)," Tore)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"H√∂chste Einzelspiel-Toranzahl:"}),e.jsxs("span",{className:"font-medium",children:[b.highestScoringMatch," Tore"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktivster Torsch√ºtze:"}),e.jsx("span",{className:"font-medium",children:A.length>0?`${A[0].name} (${A[0].goals} Tore)`:"Keine Daten"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:"‚öñÔ∏è Team-Balance"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Kader-Unterschied:"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(V.length-H.length)," Spieler"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Marktwert-Verh√§ltnis:"}),e.jsx("span",{className:"font-medium",children:V.reduce((x,o)=>x+(o.value||0),0)>H.reduce((x,o)=>x+(o.value||0),0)?"AEK f√ºhrt":"Real f√ºhrt"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Dominanteres Team:"}),e.jsx("span",{className:"font-medium",children:U>p?"AEK Athen":p>U?"Real Madrid":"Ausgeglichen"})]})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"‚öîÔ∏è Head-to-Head Bilanz"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Direkter Vergleich zwischen AEK Athen und Real Madrid √ºber alle Spiele."}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j.aekWins}),e.jsx("div",{className:"text-sm text-blue-700",children:"AEK Siege"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:j.totalMatches>0?`${(j.aekWins/j.totalMatches*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:j.realWins}),e.jsx("div",{className:"text-sm text-red-700",children:"Real Siege"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:j.totalMatches>0?`${(j.realWins/j.totalMatches*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:j.totalMatches-j.aekWins-j.realWins}),e.jsx("div",{className:"text-sm text-gray-700",children:"Unentschieden"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:j.totalMatches>0?`${((j.totalMatches-j.aekWins-j.realWins)/j.totalMatches*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:j.aekGoals+j.realGoals}),e.jsx("div",{className:"text-sm text-green-700",children:"Tore gesamt"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:j.totalMatches>0?`‚åÄ ${((j.aekGoals+j.realGoals)/j.totalMatches).toFixed(1)} pro Spiel`:"‚åÄ 0 pro Spiel"})]})]}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"üîµ Gr√∂√üter AEK Sieg"}),j.biggestAekWin.diff>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:j.biggestAekWin.score}),e.jsxs("div",{className:"text-sm text-blue-700",children:["Unterschied: ",j.biggestAekWin.diff," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(j.biggestAekWin.date).toLocaleDateString("de-DE")})]}):e.jsx("div",{className:"text-gray-500",children:"Noch kein Sieg verzeichnet"})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"üî¥ Gr√∂√üter Real Sieg"}),j.biggestRealWin.diff>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 mb-1",children:j.biggestRealWin.score}),e.jsxs("div",{className:"text-sm text-red-700",children:["Unterschied: ",j.biggestRealWin.diff," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(j.biggestRealWin.date).toLocaleDateString("de-DE")})]}):e.jsx("div",{className:"text-gray-500",children:"Noch kein Sieg verzeichnet"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üî¨ Detailanalyse"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Erweiterte Metriken f√ºr eine tiefgreifende Team-Analyse."}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-blue-600",children:"üí∞ Wirtschaftliche Effizienz"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"‚åÄ Marktwert AEK:"}),e.jsx("span",{className:"font-medium",children:V.length>0?`${(V.reduce((x,o)=>x+(o.value||0),0)/V.length).toFixed(1)}M ‚Ç¨`:"0M ‚Ç¨"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"‚åÄ Marktwert Real:"}),e.jsx("span",{className:"font-medium",children:H.length>0?`${(H.reduce((x,o)=>x+(o.value||0),0)/H.length).toFixed(1)}M ‚Ç¨`:"0M ‚Ç¨"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore pro 1M ‚Ç¨ (AEK):"}),e.jsx("span",{className:"font-medium",children:V.reduce((x,o)=>x+(o.value||0),0)>0?(b.aekTotalGoals/V.reduce((x,o)=>x+(o.value||0),0)).toFixed(2):"0.00"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore pro 1M ‚Ç¨ (Real):"}),e.jsx("span",{className:"font-medium",children:H.reduce((x,o)=>x+(o.value||0),0)>0?(b.realTotalGoals/H.reduce((x,o)=>x+(o.value||0),0)).toFixed(2):"0.00"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-red-600",children:"üé≤ Spielstatistiken"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Spiele gespielt:"}),e.jsx("span",{className:"font-medium",children:z})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Unentschieden:"}),e.jsx("span",{className:"font-medium",children:z-U-p})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"‚åÄ Spieldauer:"}),e.jsx("span",{className:"font-medium",children:"~90 Minuten"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"L√§ngste Serie:"}),e.jsxs("span",{className:"font-medium",children:[U>=p?"AEK":"Real"," (",Math.max(U,p)," Siege)"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-purple-600",children:"üèÜ Erfolgs-Metriken"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktivste Spieler:"}),e.jsx("span",{className:"font-medium",children:V.length+H.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Top-Performer:"}),e.jsxs("span",{className:"font-medium",children:[A.filter(x=>x.sdsCount>0).length," Spieler"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Konsistenz AEK:"}),e.jsx("span",{className:"font-medium",children:z>0?`${(U/z*100).toFixed(0)}% Erfolg`:"0% Erfolg"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Konsistenz Real:"}),e.jsx("span",{className:"font-medium",children:z>0?`${(p/z*100).toFixed(0)}% Erfolg`:"0% Erfolg"})]})]})]})]})]})]}),He=()=>e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìà Performance-Trends"}),e.jsx("div",{className:"space-y-4",children:Object.values(L).reverse().map(x=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-border-light last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:x.month}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-blue-600 font-medium",children:["AEK: ",x.aekWins]}),e.jsx("span",{className:"mx-2",children:"vs"}),e.jsxs("span",{className:"text-red-600 font-medium",children:["Real: ",x.realWins]})]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[x.matchCount," Spiele, ",x.totalGoals," Tore"]}),e.jsxs("div",{className:"text-sm font-medium",children:["‚åÄ ",(x.totalGoals/x.matchCount).toFixed(1)," Tore/Spiel"]})]})]},x.month))})]}),_e=()=>{const o=(()=>{const d={totalShots:0,aekShots:0,realShots:0,playerShots:{}},m=(i==null?void 0:i.slice().sort((C,B)=>{const O=new Date(C.date||0),J=new Date(B.date||0);return O-J}))||[],T={};return m.forEach(C=>{const O=new Date(C.date||0).toDateString();T[O]||(T[O]=[]),T[O].push(C)}),Object.keys(T).forEach(C=>{const B=T[C];let O=0,J=0,oe=0,te=0;B.forEach(me=>{const Je=me.goalsa||0,qe=me.goalsb||0;O+=Je,J+=qe;const ye=Math.floor(J/2),Se=Math.floor(O/2),ke=(ye-oe)*2,we=(Se-te)*2;d.aekShots+=ke,d.realShots+=we,d.totalShots+=ke+we,oe=ye,te=Se})}),c==null||c.forEach(C=>{C.goals>0&&(d.playerShots[C.name]||(d.playerShots[C.name]={totalGoals:0,alcoholCaused:0}),d.playerShots[C.name].totalGoals=C.goals,d.playerShots[C.name].alcoholCaused=Math.floor(C.goals/2)*2)}),d})(),W=Object.entries(o.playerShots).sort(([,d],[,m])=>m.alcoholCaused-d.alcoholCaused).slice(0,10),g=()=>{const d=new Date,m=new Date(d.getFullYear(),d.getMonth(),d.getDate()),T=new Date(m);return T.setDate(T.getDate()-1),(i==null?void 0:i.filter(C=>{const B=new Date(C.date),O=new Date(B.getFullYear(),B.getMonth(),B.getDate());return O>=T&&O<=m}))||[]},u=()=>{if(l.mode==="automatic"){const m=g().reduce((T,C)=>T+(C.goalsb||0),0);return Math.floor(m/2)*2}return Math.floor(l.realGoals/2)*2},M=()=>{if(l.mode==="automatic"){const m=g().reduce((T,C)=>T+(C.goalsa||0),0);return Math.floor(m/2)*2}return Math.floor(l.aekGoals/2)*2},R=()=>{if(l.mode==="automatic"){const m=g().reduce((T,C)=>T+(C.goalsa||0)+(C.goalsb||0),0);return Math.floor(m/2)*2}else return Math.floor((l.aekGoals+l.realGoals)/2)*2},$=(d,m,T=null,C=0)=>{if(!m.weight||d===0&&C===0)return"0.00";let B=d*10*.4*.8;B+=C*.5*1e3*.05*.8/1e3;const O=m.gender==="female"?.6:.7;let J=B/(m.weight*O);if(T){const te=(new Date-new Date(T))/(1e3*60*60);J=Math.max(0,J-te*.15/1e3)}return(J*1e3).toFixed(2)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"üç∫"}),e.jsxs("div",{className:"text-2xl font-bold text-primary-green",children:[o.totalShots,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Schnaps"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1 space-y-1",children:[e.jsxs("div",{children:["‚âà ",F.clToLiters(o.totalShots),"L"]}),e.jsxs("div",{children:["‚âà ",F.clToShots(o.totalShots)," Shots"]}),e.jsxs("div",{children:["‚âà ",F.clToGlasses(o.totalShots)," Gl√§ser"]})]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"üîµ"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[o.aekShots,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"AEK getrunken"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1 space-y-1",children:[e.jsxs("div",{children:["‚âà ",F.clToLiters(o.aekShots),"L"]}),e.jsxs("div",{children:["‚âà ",F.clToShots(o.aekShots)," Shots"]}),e.jsxs("div",{children:[o.totalShots>0?(o.aekShots/o.totalShots*100).toFixed(1):0,"% vom Gesamt"]})]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"üî¥"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[o.realShots,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Real getrunken"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1 space-y-1",children:[e.jsxs("div",{children:["‚âà ",F.clToLiters(o.realShots),"L"]}),e.jsxs("div",{children:["‚âà ",F.clToShots(o.realShots)," Shots"]}),e.jsxs("div",{children:[o.totalShots>0?(o.realShots/o.totalShots*100).toFixed(1):0,"% vom Gesamt"]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üçª Top Alkohol-Verursacher"}),e.jsx("div",{className:"text-sm text-text-muted mb-4",children:"Spieler, die mit ihren Toren am meisten Alkohol f√ºr den Gegner verursacht haben"}),e.jsxs("div",{className:"space-y-3",children:[W.map(([d,m],T)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${T===0?"bg-yellow-500 text-white":T===1?"bg-gray-400 text-white":T===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:T+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:d}),e.jsxs("div",{className:"text-sm text-text-muted space-x-2",children:[e.jsxs("span",{children:[m.totalGoals," Tore"]}),e.jsxs("span",{children:["‚âà ",F.clToLiters(m.alcoholCaused),"L"]}),e.jsxs("span",{children:["‚âà ",F.clToShots(m.alcoholCaused)," Shots"]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[m.alcoholCaused,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"verursacht"})]})]},d)),W.length===0&&e.jsx("div",{className:"text-center text-text-muted py-4",children:"Noch keine Tore geschossen - noch kein Alkohol verursacht!"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìã Spiele & Alkohol-√úbersicht"}),e.jsx("div",{className:"text-sm text-text-muted mb-4",children:"√úbersicht √ºber alle Spiele und den dabei konsumierten Alkohol"}),e.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[i==null?void 0:i.slice().reverse().map((d,m)=>{const T=d.goalsa||0,C=d.goalsb||0,B=Math.floor((T+C)/2)*2,O=Math.floor(C/2)*2,J=Math.floor(T/2)*2;return e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg border border-border-light",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-lg",children:[T,":",C,e.jsxs("span",{className:"text-sm text-text-muted ml-2",children:["(",d.date||"Kein Datum",")"]})]}),e.jsx("div",{className:"text-sm text-text-muted",children:"AEK vs Real Madrid"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[B,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[F.clToLiters(B),"L | ",F.clToShots(B)," Shots"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[e.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded",children:[e.jsxs("div",{className:"text-sm font-bold text-blue-600",children:[O,"cl"]}),e.jsx("div",{className:"text-xs text-blue-700",children:"AEK trinkt"})]}),e.jsxs("div",{className:"text-center p-2 bg-red-50 rounded",children:[e.jsxs("div",{className:"text-sm font-bold text-red-600",children:[J,"cl"]}),e.jsx("div",{className:"text-xs text-red-700",children:"Real trinkt"})]})]})]},d.id||m)}),(!i||i.length===0)&&e.jsx("div",{className:"text-center text-text-muted py-4",children:"Noch keine Spiele vorhanden"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üßÆ Erweiterte Alkohol-Rechner"}),e.jsx("div",{className:"text-sm text-text-muted mb-6",children:"Berechne Alkoholkonsum f√ºr Spiele und Spieltage inklusive Bier-Konsum und Blutalkohol"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"‚öΩ Spiel-Rechner"}),e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Berechnungsmodus"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"calculatorMode",value:"manual",checked:l.mode==="manual",onChange:d=>r(m=>({...m,mode:d.target.value})),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Manuell"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"calculatorMode",value:"automatic",checked:l.mode==="automatic",onChange:d=>r(m=>({...m,mode:d.target.value})),className:"mr-2"}),e.jsx("span",{className:"text-sm",children:"Automatisch (letzten 2 Spieltage)"})]})]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:l.mode==="manual"?"Geben Sie Tore manuell ein":"Berechnet automatisch aus Spielen der letzten zwei Tage (heute + gestern)"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 alcohol-calculator-grid",children:[e.jsxs("div",{className:"space-y-4",children:[l.mode==="manual"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"alcohol-input-group",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"AEK Tore"}),e.jsx("input",{type:"number",min:"0",max:"20",value:l.aekGoals,onChange:d=>r(m=>({...m,aekGoals:parseInt(d.target.value)||0})),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green"})]}),e.jsxs("div",{className:"alcohol-input-group",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Real Tore"}),e.jsx("input",{type:"number",min:"0",max:"20",value:l.realGoals,onChange:d=>r(m=>({...m,realGoals:parseInt(d.target.value)||0})),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green"})]})]}),l.mode==="automatic"&&e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"üìä Automatische Berechnung"}),e.jsx("div",{className:"text-sm text-blue-700 space-y-1",children:(()=>{const d=g(),m=d.reduce((T,C)=>T+(C.goalsa||0)+(C.goalsb||0),0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:["Spiele (letzte 2 Tage): ",d.length]}),e.jsxs("div",{children:["Gesamt-Tore: ",m]}),e.jsxs("div",{children:["Daraus resultierend: ",R(),"cl Schnaps"]})]})})()})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-bg-secondary rounded-lg alcohol-display-card",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ü•É"}),e.jsxs("div",{className:"text-2xl font-bold text-primary-green",children:[R(),"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Schnaps"}),e.jsxs("div",{className:"text-xs text-text-muted mt-1 space-y-1",children:[e.jsxs("div",{children:["‚âà ",F.clToLiters(R()),"L"]}),e.jsxs("div",{children:["‚âà ",F.clToShots(R())," Shots"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[u(),"cl"]}),e.jsx("div",{className:"text-sm text-blue-700",children:"AEK trinkt"}),e.jsxs("div",{className:"text-xs text-blue-700",children:[F.clToShots(u())," Shots"]})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-red-600",children:[M(),"cl"]}),e.jsx("div",{className:"text-sm text-red-700",children:"Real trinkt"}),e.jsxs("div",{className:"text-xs text-red-700",children:[F.clToShots(M())," Shots"]})]})]})]})]})]}),e.jsxs("div",{className:"mb-6 border-t pt-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"üìÖ Spieltag-Rechner"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Spieltag (Datum)"}),e.jsx("input",{type:"date",value:l.gameDay,onChange:d=>r(m=>({...m,gameDay:d.target.value})),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bier-Anzahl (0,5L je)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"0",max:"20",value:l.beerCount,onChange:d=>r(m=>({...m,beerCount:parseInt(d.target.value)||0})),className:"flex-1 px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsx("button",{onClick:()=>r(d=>({...d,beerCount:d.beerCount+1})),className:"beer-counter-button px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors",title:"0,5L Bier (5% Alkohol) hinzuf√ºgen",children:"üç∫ +0,5L"})]}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["Gesamt: ",(l.beerCount*.5).toFixed(1),"L Bier (5% Alkohol)"]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-bg-secondary rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-2",children:"Spieltag-Alkohol"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Schnaps: ",R(),"cl (40% Alkohol)"]}),e.jsxs("div",{children:["Bier: ",(l.beerCount*.5*5).toFixed(1),"cl reiner Alkohol"]}),e.jsxs("div",{className:"border-t pt-1 font-semibold",children:["Gesamt: ",(R()*.4+l.beerCount*.5*.05).toFixed(1),"cl reiner Alkohol"]})]})]})})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"üë• Spieler-Daten & Blutalkohol"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-blue-600 mb-2",children:"üîµ Chef AEK"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"Name",value:l.playerData.aekChef.name,onChange:d=>r(m=>({...m,playerData:{...m.playerData,aekChef:{...m.playerData.aekChef,name:d.target.value}}})),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",placeholder:"Gewicht (kg)",min:"40",max:"150",value:l.playerData.aekChef.weight,onChange:d=>r(m=>({...m,playerData:{...m.playerData,aekChef:{...m.playerData.aekChef,weight:parseInt(d.target.value)||70}}})),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsxs("select",{value:l.playerData.aekChef.gender,onChange:d=>r(m=>({...m,playerData:{...m.playerData,aekChef:{...m.playerData.aekChef,gender:d.target.value}}})),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"male",children:"M√§nnlich"}),e.jsx("option",{value:"female",children:"Weiblich"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-600 mb-2",children:"üî¥ Chef Real"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"Name",value:l.playerData.realChef.name,onChange:d=>r(m=>({...m,playerData:{...m.playerData,realChef:{...m.playerData.realChef,name:d.target.value}}})),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"number",placeholder:"Gewicht (kg)",min:"40",max:"150",value:l.playerData.realChef.weight,onChange:d=>r(m=>({...m,playerData:{...m.playerData,realChef:{...m.playerData.realChef,weight:parseInt(d.target.value)||70}}})),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",style:{fontSize:"16px"}}),e.jsxs("select",{value:l.playerData.realChef.gender,onChange:d=>r(m=>({...m,playerData:{...m.playerData,realChef:{...m.playerData.realChef,gender:d.target.value}}})),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"male",children:"M√§nnlich"}),e.jsx("option",{value:"female",children:"Weiblich"})]})]})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-bg-secondary rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-3",children:"üß™ Blutalkohol-Rechnung"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-blue-600",children:[l.playerData.aekChef.name||"Chef AEK"," trinkt: ",u(),"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["BAK: ‚âà ",(()=>{if(l.mode==="automatic"){const d=g(),m=d.length>0?d[d.length-1]:null;return $(u(),l.playerData.aekChef,m==null?void 0:m.date,l.beerCount)}return $(Math.floor(l.realGoals/2)*2,l.playerData.aekChef,null,l.beerCount)})(),"‚Ä∞"]})]}),e.jsxs("div",{className:"p-3 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-red-600",children:[l.playerData.realChef.name||"Chef Real"," trinkt: ",M(),"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["BAK: ‚âà ",(()=>{if(l.mode==="automatic"){const d=g(),m=d.length>0?d[d.length-1]:null;return $(M(),l.playerData.realChef,m==null?void 0:m.date,l.beerCount)}return $(Math.floor(l.aekGoals/2)*2,l.playerData.realChef,null,l.beerCount)})(),"‚Ä∞"]})]})]}),e.jsxs("div",{className:"text-xs text-text-muted mt-3",children:[e.jsx("strong",{children:"Hinweis:"})," BAK-Berechnung ist eine N√§herung (Widmark-Formel) mit Alkoholabbau (~0.15‚Ä∞/h). Exakte Werte k√∂nnen abweichen. Automatischer Modus ber√ºcksichtigt Zeit seit letztem Spiel."]})]})})]})]}),e.jsx("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Regeln:"})," F√ºr jedes zweite Tor muss der Gegner 2cl Schnaps (40%) trinken. 0,5L Bier (5% Alkohol) entspricht 2,5cl reinem Alkohol."]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card border-l-4 border-blue-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-blue-600",children:"üîµ AEK Alkohol-Bilanz"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Getrunken (durch Real Tore):"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-red-600",children:[o.aekShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[F.clToLiters(o.aekShots),"L | ",F.clToShots(o.aekShots)," Shots"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Verursacht (durch AEK Tore):"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-green-600",children:[o.realShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[F.clToLiters(o.realShots),"L | ",F.clToShots(o.realShots)," Shots"]})]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"font-medium",children:"Alkohol-Bilanz:"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold ${o.realShots>o.aekShots?"text-green-600":"text-red-600"}`,children:[o.realShots>o.aekShots?"+":"",o.realShots-o.aekShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[F.clToShots(Math.abs(o.realShots-o.aekShots))," Shots Differenz"]})]})]}),e.jsx("div",{className:"text-xs text-text-muted",children:o.realShots>o.aekShots?"AEK verursacht mehr als getrunken":"AEK trinkt mehr als verursacht"})]})]}),e.jsxs("div",{className:"modern-card border-l-4 border-red-400",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-red-600",children:"üî¥ Real Alkohol-Bilanz"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Getrunken (durch AEK Tore):"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-red-600",children:[o.realShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[F.clToLiters(o.realShots),"L | ",F.clToShots(o.realShots)," Shots"]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Verursacht (durch Real Tore):"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold text-green-600",children:[o.aekShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[F.clToLiters(o.aekShots),"L | ",F.clToShots(o.aekShots)," Shots"]})]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"font-medium",children:"Alkohol-Bilanz:"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`font-bold ${o.aekShots>o.realShots?"text-green-600":"text-red-600"}`,children:[o.aekShots>o.realShots?"+":"",o.aekShots-o.realShots,"cl"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[F.clToShots(Math.abs(o.aekShots-o.realShots))," Shots Differenz"]})]})]}),e.jsx("div",{className:"text-xs text-text-muted",children:o.aekShots>o.realShots?"Real verursacht mehr als getrunken":"Real trinkt mehr als verursacht"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"üìà Zus√§tzliche Alkohol-Statistiken"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[z>0?(o.totalShots/z).toFixed(1):"0.0","cl"]}),e.jsx("div",{className:"text-sm text-purple-700",children:"‚åÄ Alkohol pro Spiel"}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Durchschnittlicher Schnaps-Konsum"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-red-50 rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[(i==null?void 0:i.reduce((m,T)=>{const C=(T.goalsa||0)+(T.goalsb||0),B=Math.floor(C/2)*2;return B>m?B:m},0))||0,"cl"]}),e.jsx("div",{className:"text-sm text-orange-700",children:"üî• H√∂chster Alkohol-Verbrauch"}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"In einem einzelnen Spiel"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:(i==null?void 0:i.filter(m=>{const T=(m.goalsa||0)+(m.goalsb||0);return Math.floor(T/2)*2===0}).length)||0}),e.jsx("div",{className:"text-sm text-green-700",children:"üö´ Alkoholfreie Spiele"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Spiele ohne Alkohol-Konsum"})]})]})]})]})},Ue=()=>{switch(t){case"dashboard":return e.jsx(ds,{onNavigate:s});case"players":return Ie();case"teams":return Oe();case"trends":return He();case"alkohol":return _e();case"advanced":return e.jsx(Ze,{});case"playeranalytics":return e.jsx(os,{});case"matchprediction":return e.jsx(ws,{});case"financialanalytics":return e.jsx(_s,{});case"achievements":return e.jsx(et,{});default:return Ve()}};return e.jsxs("div",{className:"p-4 pb-24 mobile-safe-bottom",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary mb-2",children:"üìä Statistiken"}),e.jsx("p",{className:"text-text-muted",children:"Umfassende Analyse von Spielen, Spielern und Teams"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"icon-only-nav flex overflow-x-auto space-x-2 pb-2 scroll-indicator-container",children:Be.map(x=>e.jsxs("button",{onClick:()=>a(x.id),className:`stats-nav-button flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${t===x.id?"bg-primary-green text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary"}`,title:x.label,"aria-label":x.label,children:[e.jsx("span",{children:x.icon}),e.jsx("span",{className:"font-medium hidden sm:inline",children:x.label})]},x.id))}),e.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 w-4 h-8 bg-gradient-to-r from-bg-primary to-transparent pointer-events-none opacity-50 md:hidden"}),e.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 w-4 h-8 bg-gradient-to-l from-bg-primary to-transparent pointer-events-none opacity-50 md:hidden"})]}),e.jsx("div",{className:"form-container",children:Ue()})]})}export{gt as default};
