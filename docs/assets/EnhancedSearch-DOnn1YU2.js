import{r as u,j as t}from"./index-lki5-J2S.js";function $({data:l=[],searchFields:c=[],filterOptions:i=[],onResults:x,placeholder:w="Suchen...",showCount:E=!0}){const[d,y]=u.useState(""),[p,j]=u.useState({}),[o,f]=u.useState(""),[m,v]=u.useState("asc"),N=u.useRef(null),g=u.useMemo(()=>{let e=[...l];if(d.trim()){const s=d.toLowerCase().trim();e=e.filter(n=>c.some(a=>{const r=h(n,a);return r&&r.toString().toLowerCase().includes(s)}))}return Object.entries(p).forEach(([s,n])=>{if(n&&n!=="all"){const a=i.find(r=>r.key===s);a&&a.filterFn?e=e.filter(r=>a.filterFn(r,n)):e=e.filter(r=>h(r,s)===n)}}),o&&e.sort((s,n)=>{const a=h(s,o),r=h(n,o);let b=0;return typeof a=="number"&&typeof r=="number"?b=a-r:a instanceof Date&&r instanceof Date?b=a.getTime()-r.getTime():b=String(a).localeCompare(String(r)),m==="desc"?-b:b}),e},[l,d,p,o,m,c,i]);u.useEffect(()=>{x&&JSON.stringify(g)!==N.current&&(N.current=JSON.stringify(g),x(g))},[g,x]);const k=(e,s)=>{j(n=>({...n,[e]:s}))},A=e=>{o===e?v(m==="asc"?"desc":"asc"):(f(e),v("asc"))},T=()=>{y(""),j({}),f(""),v("asc")},S=d||Object.values(p).some(e=>e&&e!=="all")||o;return t.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm mb-4",children:[t.jsx("div",{className:"p-4 border-b border-border-light",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:t.jsx("span",{className:"text-text-secondary","aria-hidden":"true",children:"🔍"})}),t.jsx("input",{type:"text",value:d,onChange:e=>y(e.target.value),placeholder:`${w} (Strg+K für globale Suche)`,className:"w-full pl-10 pr-20 py-2 bg-bg-secondary border border-border-light rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary-green focus:border-transparent"}),t.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center gap-1 pr-3",children:[t.jsx("button",{onClick:()=>{const e=new CustomEvent("global-search-toggle");window.dispatchEvent(e)},className:"text-text-secondary hover:text-primary-green transition-colors p-1 rounded",title:"Globale Suche öffnen (Strg+K)",children:t.jsx("span",{"aria-hidden":"true",children:"🌐"})}),d&&t.jsx("button",{onClick:()=>y(""),className:"text-text-secondary hover:text-text-primary transition-colors p-1 rounded",title:"Suchfeld leeren",children:t.jsx("span",{"aria-hidden":"true",children:"✕"})})]})]})}),(i.length>0||o)&&t.jsx("div",{className:"p-4 border-b border-border-light",children:t.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[i.map(e=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("label",{className:"text-sm font-medium text-text-primary",children:[e.label,":"]}),t.jsxs("select",{value:p[e.key]||"",onChange:s=>k(e.key,s.target.value),className:"px-3 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[t.jsx("option",{value:"",children:"Alle"}),e.options.map(s=>t.jsx("option",{value:s.value,children:s.label},s.value))]})]},e.key)),c.length>0&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Sortieren:"}),t.jsxs("select",{value:o,onChange:e=>f(e.target.value),className:"px-3 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[t.jsx("option",{value:"",children:"Standard"}),c.map(e=>t.jsx("option",{value:e,children:C(e)},e))]}),o&&t.jsx("button",{onClick:()=>A(o),className:"px-2 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary hover:bg-bg-tertiary transition-colors duration-200",title:`Sortierung: ${m==="asc"?"Aufsteigend":"Absteigend"}`,children:m==="asc"?"↑":"↓"})]}),S&&t.jsx("button",{onClick:T,className:"px-3 py-1 bg-red-100 text-red-800 border border-red-200 rounded text-sm hover:bg-red-200 transition-colors duration-200",children:"Filter zurücksetzen"})]})}),E&&t.jsx("div",{className:"px-4 py-2 bg-bg-secondary border-b border-border-light",children:t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-text-secondary",children:g.length===l.length?`${l.length} Einträge`:`${g.length} von ${l.length} Einträgen`}),S&&t.jsxs("div",{className:"flex items-center gap-2",children:[d&&t.jsxs("span",{className:"bg-primary-green bg-opacity-10 text-primary-green px-2 py-1 rounded text-xs",children:['🔍 "',d,'"']}),Object.entries(p).filter(([,e])=>e&&e!=="all").map(([e,s])=>{const n=i.find(r=>r.key===e),a=n==null?void 0:n.options.find(r=>r.value===s);return t.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:[n==null?void 0:n.label,": ",(a==null?void 0:a.label)||s]},e)}),o&&t.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:["📊 ",C(o)," ",m==="asc"?"↑":"↓"]})]})]})})]})}function h(l,c){return!l||!c?"":c.split(".").reduce((i,x)=>i&&i[x]!==void 0?i[x]:"",l)}function C(l){return{name:"Name",team:"Team",position:"Position",value:"Wert",date:"Datum",goalsa:"AEK Tore",goalsb:"Real Tore",type:"Typ",amount:"Betrag",description:"Beschreibung",totalgames:"Gesamt Spiele",matchesserved:"Gespielte Spiele"}[l]||l.charAt(0).toUpperCase()+l.slice(1)}export{$ as E};
