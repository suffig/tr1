var Y=Object.defineProperty;var ee=(d,s,i)=>s in d?Y(d,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[s]=i;var O=(d,s,i)=>ee(d,typeof s!="symbol"?s+"":s,i);import{r as k,j as e,z as R,u as te,a as se,L as ae,P as B}from"./index-nYKkSwnu.js";import{E as ie}from"./ExportImportManager-DBDUApKR.js";function re({onClose:d,players:s=[]}){const[i,t]=k.useState("4-4-2"),[a,r]=k.useState({}),[l,h]=k.useState([]),y={"4-4-2":{name:"4-4-2 Classic",positions:{GK:[{x:50,y:85,id:"gk1"}],CB:[{x:35,y:70,id:"cb1"},{x:65,y:70,id:"cb2"}],LB:[{x:15,y:65,id:"lb1"}],RB:[{x:85,y:65,id:"rb1"}],CM:[{x:35,y:45,id:"cm1"},{x:65,y:45,id:"cm2"}],LM:[{x:20,y:40,id:"lm1"}],RM:[{x:80,y:40,id:"rm1"}],ST:[{x:40,y:20,id:"st1"},{x:60,y:20,id:"st2"}]}},"4-3-3":{name:"4-3-3 Attack",positions:{GK:[{x:50,y:85,id:"gk1"}],CB:[{x:35,y:70,id:"cb1"},{x:65,y:70,id:"cb2"}],LB:[{x:15,y:65,id:"lb1"}],RB:[{x:85,y:65,id:"rb1"}],CDM:[{x:50,y:55,id:"cdm1"}],CM:[{x:30,y:40,id:"cm1"},{x:70,y:40,id:"cm2"}],LW:[{x:20,y:25,id:"lw1"}],RW:[{x:80,y:25,id:"rw1"}],ST:[{x:50,y:15,id:"st1"}]}},"3-5-2":{name:"3-5-2 Control",positions:{GK:[{x:50,y:85,id:"gk1"}],CB:[{x:25,y:70,id:"cb1"},{x:50,y:70,id:"cb2"},{x:75,y:70,id:"cb3"}],LWB:[{x:15,y:45,id:"lwb1"}],RWB:[{x:85,y:45,id:"rwb1"}],CDM:[{x:50,y:50,id:"cdm1"}],CM:[{x:35,y:40,id:"cm1"},{x:65,y:40,id:"cm2"}],ST:[{x:40,y:20,id:"st1"},{x:60,y:20,id:"st2"}]}}};k.useEffect(()=>{h([...s]),r({})},[s]);const v=m=>{t(m),r({}),h([...s])},j=(m,p)=>{if(!p)return;const g={...a};Object.keys(g).forEach(x=>{var c;((c=g[x])==null?void 0:c.id)===p.id&&delete g[x]}),g[m]=p,r(g),h(x=>x.filter(c=>c.id!==p.id))},M=m=>{const p=a[m];if(!p)return;const g={...a};delete g[m],r(g),h(x=>[...x,p])},P=()=>{const p=Object.values(a).length;if(p===0)return{attack:0,midfield:0,defense:0,overall:0};const g=["ST","LW","RW","LF","RF"],x=["CM","CDM","CAM","LM","RM","LWB","RWB"],c=["CB","LB","RB","GK"],f=y[i];let N=0,S=0,I=0;Object.entries(f.positions).forEach(([$,U])=>{const T=U.length;g.includes($)?N+=T:x.includes($)?S+=T:c.includes($)&&(I+=T)});const L=N+S+I;return{attack:Math.round(N/L*100),midfield:Math.round(S/L*100),defense:Math.round(I/L*100),overall:p}},u=m=>m==="GK"?"#10B981":["CB","LB","RB"].includes(m)?"#3B82F6":["CM","CDM","CAM","LM","RM","LWB","RWB"].includes(m)?"#F59E0B":["ST","LW","RW","LF","RF"].includes(m)?"#EF4444":"#6B7280",D=()=>{const m={formation:i,players:a,analysis:P(),exportDate:new Date().toISOString()},p=JSON.stringify(m,null,2),g=new Blob([p],{type:"application/json"}),x=document.createElement("a");x.href=URL.createObjectURL(g),x.download=`formation-${i}-${new Date().toISOString().split("T")[0]}.json`,x.click(),R.success("Formation exportiert!")},A=P();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-2",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg w-full max-w-4xl modal-content",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"‚öΩ Formation Visualizer"}),e.jsx("button",{onClick:d,className:"text-text-muted hover:text-text-primary text-2xl transition-colors",children:"√ó"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Formation ausw√§hlen:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(y).map(([m,p])=>e.jsx("button",{onClick:()=>v(m),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${i===m?"bg-primary-green text-white":"bg-bg-tertiary text-text-secondary hover:bg-bg-primary"}`,children:p.name},m))})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative bg-green-600 rounded-lg overflow-hidden",style:{aspectRatio:"2/3"},children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 border-2 border-white rounded-full"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-2 h-2 bg-white rounded-full"}),e.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 w-16 h-12 border-2 border-white"}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 w-16 h-12 border-2 border-white"}),e.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 w-8 h-2 bg-white"}),e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-8 h-2 bg-white"}),e.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-white"})]}),Object.entries(y[i].positions).map(([m,p])=>p.map(g=>{const x=a[g.id];return e.jsxs("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 cursor-pointer group",style:{left:`${g.x}%`,top:`${g.y}%`},onClick:()=>{x&&M(g.id)},children:[e.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white flex items-center justify-center text-white text-xs font-bold shadow-lg transition-transform group-hover:scale-110",style:{backgroundColor:u(m)},children:x?x.name.slice(0,2).toUpperCase():m}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-1 text-xs text-white bg-black bg-opacity-50 px-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:x?x.name:`${m} Position`})]},g.id)}))]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-text-primary mb-2",children:["Verf√ºgbare Spieler (",l.length,")"]}),e.jsx("div",{className:"bg-bg-tertiary rounded-lg p-3 max-h-48 overflow-y-auto",children:l.length>0?e.jsx("div",{className:"space-y-2",children:l.map(m=>e.jsxs("div",{className:"p-2 bg-bg-secondary rounded cursor-pointer hover:bg-bg-primary transition-colors",onClick:()=>{const p=y[i],g=Object.entries(p.positions).flatMap(([x,c])=>c.map(f=>({...f,type:x}))).find(x=>!a[x.id]);g?j(g.id,m):R.error("Alle Positionen sind besetzt")},children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:m.name}),e.jsxs("div",{className:"text-xs text-text-muted",children:[m.position," ‚Ä¢ ",m.team]})]},m.id))}):e.jsx("div",{className:"text-center py-4 text-text-muted text-sm",children:"Alle Spieler sind aufgestellt"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary mb-2",children:"Formation Analyse"}),e.jsxs("div",{className:"bg-bg-tertiary rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Angriff:"}),e.jsxs("span",{className:"font-medium text-red-600",children:[A.attack,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Mittelfeld:"}),e.jsxs("span",{className:"font-medium text-yellow-600",children:[A.midfield,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Verteidigung:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:[A.defense,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm font-medium border-t border-border-light pt-2",children:[e.jsx("span",{children:"Aufgestellt:"}),e.jsxs("span",{children:[A.overall,"/11"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:D,className:"w-full btn-primary text-sm py-2",disabled:A.overall===0,children:"üìã Formation exportieren"}),e.jsx("button",{onClick:()=>{r({}),h([...s]),R.success("Formation zur√ºckgesetzt")},className:"w-full btn-secondary text-sm py-2",children:"üîÑ Zur√ºcksetzen"})]})]})]})]})})})}class E{static async fetchPlayerData(s,i){try{const t=`${i}`,a=this.cache.get(t);if(a&&Date.now()-a.timestamp<this.CACHE_DURATION)return console.log(`üì¶ Cache hit for SoFIFA ID: ${i}`),a.data;if(!this.checkRateLimit())return console.warn("‚ö†Ô∏è Rate limit exceeded for SoFIFA requests"),null;console.log(`üåê Attempting to fetch data from SoFIFA: ${s}`);const r=[()=>this.fetchWithCorsProxy(s),()=>this.fetchWithAllowOrigins(s),()=>this.fetchWithServerProxy(s),()=>this.parsePlayerIdFromUrl(s)];for(const l of r)try{const h=await l();if(h)return this.cache.set(t,{data:h,timestamp:Date.now()}),h}catch(h){console.warn(`‚ùå Strategy failed: ${h.message}`);continue}return console.warn(`‚ö†Ô∏è All SoFIFA fetch strategies failed for: ${s}`),null}catch(t){return console.error("‚ùå Error fetching SoFIFA data:",t.message),null}}static checkRateLimit(){const s=Date.now();return s>this.rateLimit.resetTime&&(this.rateLimit.requests=0,this.rateLimit.resetTime=s+6e4),this.rateLimit.requests>=this.rateLimit.maxRequests?!1:(this.rateLimit.requests++,!0)}static async fetchWithCorsProxy(s){const i=[`https://cors-anywhere.herokuapp.com/${s}`,`https://api.allorigins.win/get?url=${encodeURIComponent(s)}`,`https://thingproxy.freeboard.io/fetch/${s}`];for(const t of i)try{console.log(`üîÑ Trying CORS proxy: ${t.split("/")[2]}`);const a=new AbortController,r=setTimeout(()=>a.abort(),1e4),l=await fetch(t,{method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"},signal:a.signal});if(clearTimeout(r),l.ok){let h=await l.text();t.includes("allorigins.win")&&(h=JSON.parse(h).contents);const y=this.parsePlayerDataFromHTML(h);if(y)return console.log(`‚úÖ Successfully fetched via proxy: ${t.split("/")[2]}`),y}}catch(a){console.warn(`‚ùå Proxy failed (${t.split("/")[2]}): ${a.message}`);continue}return null}static async fetchWithAllowOrigins(s){try{console.log("üîÑ Trying direct fetch with CORS headers");const i=await fetch(s,{method:"GET",mode:"cors",headers:{Origin:window.location.origin,Referer:window.location.origin,"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}});if(i.ok){const t=await i.text(),a=this.parsePlayerDataFromHTML(t);if(a)return console.log("‚úÖ Direct fetch successful"),a}}catch(i){console.warn("‚ùå Direct fetch failed (expected due to CORS):",i.message)}return null}static async fetchWithServerProxy(s){try{const i="/api/proxy-sofifa";console.log("üîÑ Trying server proxy");const t=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:s})});if(t.ok){const a=await t.json();if(a.success&&a.html){const r=this.parsePlayerDataFromHTML(a.html);if(r)return console.log("‚úÖ Server proxy successful"),r}}}catch(i){console.warn("‚ùå Server proxy not available:",i.message)}return null}static parsePlayerIdFromUrl(s){try{console.log("üîÑ Parsing player ID from URL structure");const i=s.match(/player\/(\d+)\/([^\/]+)\/(\d+)/);if(i){const[,t,a,r]=i,l=a.replace(/-/g," ").replace(/\b\w/g,h=>h.toUpperCase());return console.log(`üìù Extracted from URL: ID ${t}, Name: ${l}`),{sofifaId:parseInt(t),extractedName:l,versionId:parseInt(r),source:"url_parsing",timestamp:Date.now()}}}catch(i){console.warn("‚ùå URL parsing failed:",i.message)}return null}static parsePlayerDataFromHTML(s){try{console.log("üîç Parsing HTML for player data...");const t=new DOMParser().parseFromString(s,"text/html"),a={source:"sofifa_live",timestamp:Date.now()},r=t.querySelector(".bp-overall");r&&(a.overall=parseInt(r.textContent.trim()));const l=t.querySelector(".bp-potential");l&&(a.potential=parseInt(l.textContent.trim()));const h=t.querySelector("h1[data-title]")||t.querySelector(".player-name");h&&(a.name=h.textContent.trim());const y=t.querySelectorAll(".bp-positions .badge");y.length>0&&(a.positions=Array.from(y).map(P=>P.textContent.trim()));const v=t.querySelector(".bp-age");v&&(a.age=parseInt(v.textContent.trim()));const j=t.querySelector(".bp-club a");j&&(a.club=j.textContent.trim());const M=t.querySelector(".bp-nationality a");return M&&(a.nationality=M.textContent.trim()),a.overall||a.name?(console.log(`‚úÖ Successfully parsed player data: ${a.name||"Unknown"} (Overall: ${a.overall||"N/A"})`),a):(console.warn("‚ö†Ô∏è No meaningful data found in HTML"),null)}catch(i){return console.error("‚ùå Error parsing HTML:",i.message),null}}static clearCache(){this.cache.clear(),console.log("üóëÔ∏è SoFIFA cache cleared")}static getCacheStats(){return{size:this.cache.size,entries:Array.from(this.cache.keys()),rateLimit:this.rateLimit}}}O(E,"CACHE_DURATION",1e3*60*60),O(E,"cache",new Map),O(E,"rateLimit",{requests:0,resetTime:0,maxRequests:10});class z{static async getPlayerData(s,i={useLiveData:!0,fallbackToMock:!0}){if(console.log(`üîç Searching for player: ${s}`),!s||typeof s!="string"||s.trim().length===0)return console.warn("‚ö†Ô∏è Invalid player name provided"),this.generateDefaultPlayerData("Unknown Player");const t=s.trim();let a=null;if(this.fifaDatabase[t]&&(a={...this.fifaDatabase[t],searchName:t,found:!0,source:"mock_database"},console.log(`‚úÖ Found exact match in database: ${t}`)),!a){const r=this.performFuzzyMatch(t);r&&(a={...r.data,searchName:t,suggestedName:r.name,found:!0,source:"mock_database_fuzzy"},console.log(`‚úÖ Found fuzzy match: ${t} -> ${r.name}`))}if(a&&i.useLiveData&&a.sofifaUrl)try{console.log("üåê Attempting to fetch live data from SoFIFA...");const r=await E.fetchPlayerData(a.sofifaUrl,a.sofifaId);if(r){const l={...a,...r,searchName:t,found:!0,source:"sofifa_enhanced",lastUpdated:new Date().toISOString(),mockDataAvailable:!0};return console.log(`‚úÖ Enhanced with live SoFIFA data for: ${t}`),l}else console.log("‚ö†Ô∏è Live data fetch failed, using mock data"),a.source="mock_fallback",a.sofifaAttempted=!0,a.sofifaFetchTime=new Date().toISOString()}catch(r){console.error("‚ùå Error fetching live data:",r.message),a&&(a.source="mock_error_fallback",a.fetchError=r.message)}return a||(i.fallbackToMock?(console.log(`üîÑ Generating default data for unknown player: ${t}`),this.generateDefaultPlayerData(t)):(console.log(`‚ùå No data found for player: ${t}`),null))}static performFuzzyMatch(s){const i=s.toLowerCase().split(" ");for(const[t,a]of Object.entries(this.fifaDatabase)){const l=this.normalizeString(t.toLowerCase()).split(" ");if(i.every(y=>{const v=this.normalizeString(y);return l.some(j=>j.includes(v)||v.includes(j)||this.calculateSimilarity(v,j)>.7)}))return{name:t,data:a}}return null}static normalizeString(s){return s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/g,"").toLowerCase()}static calculateSimilarity(s,i){const t=s.length>i.length?s:i,a=s.length>i.length?i:s;if(t.length===0)return 1;const r=this.levenshteinDistance(t,a);return(t.length-r)/t.length}static levenshteinDistance(s,i){const t=[];for(let a=0;a<=i.length;a++)t[a]=[a];for(let a=0;a<=s.length;a++)t[0][a]=a;for(let a=1;a<=i.length;a++)for(let r=1;r<=s.length;r++)i.charAt(a-1)===s.charAt(r-1)?t[a][r]=t[a-1][r-1]:t[a][r]=Math.min(t[a-1][r-1]+1,t[a][r-1]+1,t[a-1][r]+1);return t[i.length][s.length]}static generateDefaultPlayerData(s){const i=65+Math.floor(Math.random()*15);return{overall:i,potential:Math.min(i+Math.floor(Math.random()*8),85),positions:["Unknown"],age:25,height:175+Math.floor(Math.random()*15),weight:70+Math.floor(Math.random()*15),foot:Math.random()>.5?"Right":"Left",pace:this.generateAttribute(i),shooting:this.generateAttribute(i),passing:this.generateAttribute(i),dribbling:this.generateAttribute(i),defending:this.generateAttribute(i),physical:this.generateAttribute(i),skills:this.generateDetailedSkills(i),workrates:"Medium/Medium",weakFoot:2+Math.floor(Math.random()*3),skillMoves:2+Math.floor(Math.random()*3),nationality:"Unknown",club:"Unknown",value:"‚Ç¨"+(Math.random()*5+.5).toFixed(1)+"M",wage:"‚Ç¨"+Math.floor(Math.random()*20+5)+"K",contract:"2025",sofifaId:null,sofifaUrl:null,searchName:s,found:!1,generated:!0}}static generateAttribute(s){const t=Math.max(35,s-15),a=Math.min(90,s+15);return t+Math.floor(Math.random()*(a-t))}static generateDetailedSkills(s){const i={};return["crossing","finishing","headingAccuracy","shortPassing","volleys","curve","fkAccuracy","longPassing","ballControl","acceleration","sprintSpeed","agility","reactions","balance","shotPower","jumping","stamina","strength","longShots","aggression","interceptions","positioning","vision","penalties","composure"].forEach(a=>{i[a]=this.generateAttribute(s)}),i}static getAvailablePlayers(){return Object.keys(this.fifaDatabase)}static addPlayer(s,i){this.fifaDatabase[s]=i}static hasPlayer(s){return this.fifaDatabase.hasOwnProperty(s)}static getPlayerCardColor(s){return s>=90?"fifa-card-icon bg-gradient-to-br from-purple-600 to-purple-700 text-white shadow-purple-500/30":s>=85?"fifa-card-gold bg-gradient-to-br from-yellow-400 to-yellow-500 text-yellow-900 shadow-yellow-500/30":s>=80?"fifa-card-silver bg-gradient-to-br from-gray-400 to-gray-500 text-gray-900 shadow-gray-500/30":s>=75?"fifa-card-bronze bg-gradient-to-br from-orange-400 to-orange-500 text-orange-900 shadow-orange-500/30":"fifa-card-common bg-gradient-to-br from-gray-600 to-gray-700 text-white shadow-gray-600/30"}static formatOverallRating(s){let i="";return s>=90?i="üåü":s>=85?i="ü•á":s>=80?i="ü•à":s>=75&&(i="ü•â"),`${s} ${i}`}static getRatingColor(s){return s>=85?"text-green-400":s>=75?"text-yellow-400":s>=65?"text-orange-400":"text-red-400"}static async batchGetPlayerData(s,i={}){console.log(`üì¶ Batch fetching ${s.length} players...`);const t=[],a=i.batchSize||3;for(let r=0;r<s.length;r+=a){const h=s.slice(r,r+a).map(v=>this.getPlayerData(v,i).catch(j=>({searchName:v,error:j.message,found:!1}))),y=await Promise.all(h);t.push(...y),r+a<s.length&&await new Promise(v=>setTimeout(v,1e3))}return console.log(`‚úÖ Batch fetch complete: ${t.length} players processed`),t}static async getPlayersByClub(s,i=!1){console.log(`üèüÔ∏è Searching for players from club: ${s}`);const t=Object.entries(this.fifaDatabase).filter(([a,r])=>r.club&&r.club.toLowerCase().includes(s.toLowerCase())).map(([a,r])=>({name:a,...r}));if(i){const a=t.map(r=>r.name);return await this.batchGetPlayerData(a,{useLiveData:!0})}return t.map(a=>({...a,searchName:a.name,found:!0,source:"mock_database"}))}static getSofifaStats(){const s=E.getCacheStats(),i=Object.keys(this.fifaDatabase).length,t=Object.values(this.fifaDatabase).filter(a=>a.sofifaUrl).length;return{cache:s,database:{totalPlayers:i,playersWithSofifaUrls:t,sofifaUrlCoverage:`${(t/i*100).toFixed(1)}%`},integration:{status:"active",lastCheck:new Date().toISOString()}}}static validateSofifaUrls(){console.log("üîç Validating SoFIFA URLs in database...");const s={valid:[],invalid:[],missing:[]};return Object.entries(this.fifaDatabase).forEach(([i,t])=>{t.sofifaUrl?this.isValidSofifaUrl(t.sofifaUrl)?s.valid.push({name:i,url:t.sofifaUrl,id:t.sofifaId}):s.invalid.push({name:i,url:t.sofifaUrl}):s.missing.push(i)}),console.log(`‚úÖ URL validation complete: ${s.valid.length} valid, ${s.invalid.length} invalid, ${s.missing.length} missing`),s}static isValidSofifaUrl(s){return typeof s!="string"?!1:/^https:\/\/sofifa\.com\/player\/\d+\/[^\/]+\/\d+\/?$/.test(s)}static clearAllCaches(){E.clearCache(),console.log("üóëÔ∏è All FIFA service caches cleared")}static async testSofifaConnectivity(){console.log("üß™ Testing SoFIFA connectivity...");const s=Object.entries(this.fifaDatabase).find(([a,r])=>r.sofifaUrl);if(!s)return{success:!1,error:"No players with SoFIFA URLs available for testing"};const[i,t]=s;try{const a=Date.now(),r=await E.fetchPlayerData(t.sofifaUrl,t.sofifaId),l=Date.now();return{success:!!r,testPlayer:i,responseTime:`${l-a}ms`,result:r,timestamp:new Date().toISOString()}}catch(a){return{success:!1,testPlayer:i,error:a.message,timestamp:new Date().toISOString()}}}}O(z,"fifaDatabase",{"Erling Haaland":{overall:91,potential:94,positions:["ST","CF"],age:23,height:195,weight:88,foot:"Left",pace:89,shooting:91,passing:65,dribbling:80,defending:45,physical:88,skills:{crossing:55,finishing:94,headingAccuracy:85,shortPassing:65,volleys:86,curve:77,fkAccuracy:84,longPassing:65,ballControl:81,acceleration:87,sprintSpeed:90,agility:77,reactions:93,balance:70,shotPower:94,jumping:95,stamina:88,strength:92,longShots:85,aggression:84,interceptions:30,positioning:95,vision:68,penalties:85,composure:88},workrates:"High/Medium",weakFoot:3,skillMoves:3,nationality:"Norway",club:"Manchester City",value:"‚Ç¨180M",wage:"‚Ç¨375K",contract:"2027",sofifaId:239085,sofifaUrl:"https://sofifa.com/player/239085/erling-haaland/250001/"},"Kylian Mbapp√©":{overall:91,potential:95,positions:["LW","ST","RW"],age:25,height:178,weight:73,foot:"Right",pace:97,shooting:89,passing:80,dribbling:92,defending:39,physical:77,skills:{crossing:80,finishing:89,headingAccuracy:78,shortPassing:83,volleys:87,curve:80,fkAccuracy:79,longPassing:75,ballControl:92,acceleration:97,sprintSpeed:97,agility:92,reactions:92,balance:84,shotPower:88,jumping:78,stamina:88,strength:76,longShots:86,aggression:78,interceptions:41,positioning:90,vision:80,penalties:80,composure:85},workrates:"High/Low",weakFoot:4,skillMoves:5,nationality:"France",club:"Real Madrid",value:"‚Ç¨180M",wage:"‚Ç¨1.2M",contract:"2029",sofifaId:231747,sofifaUrl:"https://sofifa.com/player/231747/kylian-mbappe/250001/"},"Jude Bellingham":{overall:90,potential:94,positions:["CM","CAM","CDM"],age:20,height:186,weight:75,foot:"Right",pace:75,shooting:83,passing:88,dribbling:86,defending:78,physical:82,skills:{crossing:84,finishing:82,headingAccuracy:85,shortPassing:90,volleys:80,curve:85,fkAccuracy:81,longPassing:86,ballControl:87,acceleration:78,sprintSpeed:72,agility:84,reactions:89,balance:86,shotPower:85,jumping:84,stamina:88,strength:79,longShots:84,aggression:80,interceptions:76,positioning:88,vision:89,penalties:78,composure:84},workrates:"High/High",weakFoot:4,skillMoves:4,nationality:"England",club:"Real Madrid",value:"‚Ç¨150M",wage:"‚Ç¨350K",contract:"2029",sofifaId:252371,sofifaUrl:"https://sofifa.com/player/252371/jude-bellingham/250001/"},"Vinicius Jr.":{overall:89,potential:93,positions:["LW","LM"],age:23,height:176,weight:73,foot:"Right",pace:95,shooting:83,passing:78,dribbling:92,defending:29,physical:68,skills:{crossing:81,finishing:83,headingAccuracy:62,shortPassing:80,volleys:78,curve:81,fkAccuracy:76,longPassing:76,ballControl:93,acceleration:97,sprintSpeed:93,agility:94,reactions:90,balance:82,shotPower:82,jumping:69,stamina:83,strength:53,longShots:79,aggression:56,interceptions:25,positioning:85,vision:79,penalties:75,composure:78},workrates:"High/Low",weakFoot:2,skillMoves:5,nationality:"Brazil",club:"Real Madrid",value:"‚Ç¨120M",wage:"‚Ç¨200K",contract:"2027",sofifaId:238794,sofifaUrl:"https://sofifa.com/player/238794/vinicius-junior/250001/"},"Sergio Ara√∫jo":{overall:72,potential:75,positions:["ST","CF"],age:32,height:180,weight:75,foot:"Left",pace:68,shooting:75,passing:62,dribbling:71,defending:30,physical:73,skills:{crossing:55,finishing:78,headingAccuracy:72,shortPassing:65,volleys:74,curve:68,fkAccuracy:70,longPassing:58,ballControl:73,acceleration:70,sprintSpeed:66,agility:72,reactions:76,balance:70,shotPower:76,jumping:71,stamina:72,strength:74,longShots:72,aggression:65,interceptions:25,positioning:77,vision:60,penalties:75,composure:74},workrates:"Medium/Low",weakFoot:3,skillMoves:3,nationality:"Argentina",club:"AEK Athens",value:"‚Ç¨2.8M",wage:"‚Ç¨15K",contract:"2025",sofifaId:199455,sofifaUrl:"https://sofifa.com/player/199455/sergio-araujo/250001/"},"Nordin Amrabat":{overall:70,potential:70,positions:["RW","RM","RWB"],age:37,height:173,weight:65,foot:"Right",pace:76,shooting:65,passing:73,dribbling:76,defending:61,physical:65,skills:{crossing:78,finishing:62,headingAccuracy:55,shortPassing:74,volleys:68,curve:71,fkAccuracy:75,longPassing:72,ballControl:78,acceleration:78,sprintSpeed:74,agility:80,reactions:72,balance:74,shotPower:68,jumping:58,stamina:76,strength:52,longShots:70,aggression:68,interceptions:65,positioning:68,vision:75,penalties:65,composure:74},workrates:"High/Medium",weakFoot:4,skillMoves:4,nationality:"Morocco",club:"AEK Athens",value:"‚Ç¨800K",wage:"‚Ç¨8K",contract:"2024",sofifaId:199014,sofifaUrl:"https://sofifa.com/player/199014/nordin-amrabat/250001/"},"Levi Garc√≠a":{overall:73,potential:76,positions:["LW","RW","ST"],age:26,height:175,weight:70,foot:"Left",pace:82,shooting:71,passing:68,dribbling:77,defending:35,physical:72,skills:{crossing:70,finishing:73,headingAccuracy:65,shortPassing:70,volleys:68,curve:72,fkAccuracy:67,longPassing:66,ballControl:78,acceleration:84,sprintSpeed:80,agility:81,reactions:75,balance:78,shotPower:74,jumping:68,stamina:76,strength:67,longShots:69,aggression:64,interceptions:30,positioning:74,vision:67,penalties:68,composure:72},workrates:"High/Medium",weakFoot:3,skillMoves:4,nationality:"Trinidad and Tobago",club:"AEK Athens",value:"‚Ç¨4.5M",wage:"‚Ç¨12K",contract:"2025",sofifaId:236772,sofifaUrl:"https://sofifa.com/player/236772/levi-garcia/250001/"}});const ne=({player:d,isOpen:s,onClose:i})=>{const[t,a]=k.useState(null),[r,l]=k.useState(!1),[h,y]=k.useState(null);k.useEffect(()=>{s&&d&&v()},[s,d,v]);const v=k.useCallback(async()=>{l(!0);try{const c=await z.getPlayerData(d.name);a(c)}catch(c){console.error("Error loading FIFA data:",c),a(null)}finally{l(!1)}},[d.name]),j=()=>{switch(d==null?void 0:d.team){case"AEK":return"team-aek";case"Real":return"team-real";case"Ehemalige":return"team-ehemalige";default:return""}},M=()=>{switch(d==null?void 0:d.team){case"AEK":return"AEK Athens";case"Real":return"Real Madrid";case"Ehemalige":return"Former Players";default:return d==null?void 0:d.team}},P=c=>c>=85?"#10b981":c>=75?"#f59e0b":c>=65?"#f97316":"#ef4444",u=c=>c.replace(/([A-Z])/g," $1").replace(/^./,f=>f.toUpperCase()).trim(),D=c=>{y(h===c?null:c)},A=()=>{const c=typeof d.value=="number"?d.value:d.value?parseFloat(d.value):0;return e.jsxs("div",{className:"basic-info-section mb-8",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-user text-blue-400"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Team"}),e.jsx("span",{className:`font-semibold ${j()==="team-aek"?"text-blue-400":j()==="team-real"?"text-red-400":"text-gray-400"}`,children:M()})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Position"}),e.jsx("span",{className:"text-white font-semibold",children:d.position||"Not specified"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Market Value"}),e.jsx("span",{className:"text-green-400 font-semibold",children:c?c+"M ‚Ç¨":"Not valued"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[e.jsx("label",{className:"block text-sm text-slate-400 mb-1",children:"Goals Scored"}),e.jsx("span",{className:"text-yellow-400 font-semibold",children:d.goals||0})]})]})]})},m=()=>t?e.jsxs("div",{className:"fifa-overview grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:`fifa-card p-6 rounded-2xl text-center ${z.getPlayerCardColor(t.overall)} shadow-lg`,children:[e.jsxs("div",{className:"fifa-rating mb-3",children:[e.jsx("span",{className:"block text-4xl font-black",children:t.overall}),e.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide opacity-80",children:"OVR"})]}),e.jsx("div",{className:"fifa-positions mb-3",children:t.positions.map((c,f)=>e.jsx("span",{className:"inline-block bg-black/20 px-2 py-1 rounded text-xs font-semibold mx-1",children:c},f))}),e.jsxs("div",{className:"fifa-potential pt-3 border-t border-black/20",children:[e.jsx("span",{className:"block text-2xl font-bold",children:t.potential}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide opacity-80",children:"POT"})]})]}),e.jsx("div",{className:"player-details bg-white/5 rounded-lg p-6 border border-white/10",children:e.jsx("div",{className:"space-y-3",children:[{label:"Age",value:t.age},{label:"Height",value:`${t.height}cm`},{label:"Weight",value:`${t.weight}kg`},{label:"Preferred Foot",value:t.foot},{label:"Weak Foot",value:"‚≠ê".repeat(t.weakFoot)+"‚òÜ".repeat(5-t.weakFoot)},{label:"Skill Moves",value:"‚≠ê".repeat(t.skillMoves)+"‚òÜ".repeat(5-t.skillMoves)},{label:"Work Rates",value:t.workrates},...t.nationality!=="Unknown"?[{label:"Nationality",value:t.nationality}]:[],...t.value?[{label:"FIFA Value",value:t.value}]:[]].map((c,f)=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/10 last:border-b-0",children:[e.jsxs("span",{className:"text-slate-400 text-sm",children:[c.label,":"]}),e.jsx("span",{className:"text-white font-semibold text-sm",children:c.value})]},f))})})]}):null,p=()=>{if(!t)return null;const c=[{name:"Pace",value:t.pace,icon:"üèÉ"},{name:"Shooting",value:t.shooting,icon:"‚öΩ"},{name:"Passing",value:t.passing,icon:"üéØ"},{name:"Dribbling",value:t.dribbling,icon:"‚ö°"},{name:"Defending",value:t.defending,icon:"üõ°Ô∏è"},{name:"Physical",value:t.physical,icon:"üí™"}];return e.jsxs("div",{className:"fifa-attributes mb-8",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Main Attributes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map((f,N)=>e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:f.icon}),e.jsx("span",{className:"text-white font-medium",children:f.name})]}),e.jsx("span",{className:"text-white font-bold text-lg",children:f.value})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:`${f.value}%`,backgroundColor:P(f.value)}})})]},N))})]})},g=()=>{if(!(t!=null&&t.skills))return null;const c=[{name:"Shooting",skills:["finishing","volleys","penalties","shotPower","longShots"]},{name:"Passing",skills:["vision","crossing","curve","shortPassing","longPassing"]},{name:"Movement",skills:["acceleration","sprintSpeed","agility","reactions","balance"]},{name:"Physical",skills:["jumping","stamina","strength","aggression"]},{name:"Mentality",skills:["positioning","composure","interceptions"]},{name:"Technical",skills:["ballControl","headingAccuracy","fkAccuracy"]}];return e.jsxs("div",{className:"fifa-skills",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Detailed Skills"}),e.jsx("div",{className:"space-y-2",children:c.map((f,N)=>e.jsxs("div",{className:"bg-white/5 rounded-lg border border-white/10 overflow-hidden",children:[e.jsxs("button",{className:"w-full px-6 py-4 text-left flex justify-between items-center text-white font-medium hover:bg-white/5 transition-colors",onClick:()=>D(N),children:[e.jsx("span",{children:f.name}),e.jsx("i",{className:`fas fa-chevron-${h===N?"up":"down"} text-slate-400`})]}),h===N&&e.jsx("div",{className:"px-6 pb-4 border-t border-white/10",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:f.skills.filter(S=>t.skills[S]!==void 0).map(S=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-slate-400 text-sm flex-1",children:u(S)}),e.jsx("span",{className:"text-white font-semibold text-sm w-8 text-right",children:t.skills[S]}),e.jsx("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${t.skills[S]}%`,backgroundColor:P(t.skills[S])}})})]},S))})})]},N))})]})},x=()=>e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl text-slate-600 mb-6",children:e.jsx("i",{className:"fas fa-search"})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:"FIFA Data Not Available"}),e.jsx("p",{className:"text-slate-400 mb-6 max-w-md mx-auto",children:t!=null&&t.generated?"This player was not found in our FIFA database. Showing estimated ratings.":"FIFA statistics for this player are not currently available."}),(t==null?void 0:t.generated)&&e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4 mx-auto max-w-md mb-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Overall:"}),e.jsxs("span",{className:"text-white",children:[t.overall," (Est.)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Potential:"}),e.jsxs("span",{className:"text-white",children:[t.potential," (Est.)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Height:"}),e.jsxs("span",{className:"text-white",children:[t.height,"cm (Est.)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Foot:"}),e.jsxs("span",{className:"text-white",children:[t.foot," (Est.)"]})]})]}),e.jsxs("p",{className:"text-yellow-400 text-xs mt-3 flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),"These are estimated values and may not reflect actual FIFA ratings."]})]}),e.jsxs("div",{className:"text-slate-500 text-sm",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"FIFA ratings are sourced from ",e.jsx("a",{href:"https://sofifa.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"SoFIFA.com"})]})]});return!s||!d?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl border border-white/10",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:d.name}),e.jsxs("div",{className:"flex gap-3 mt-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${j()==="team-aek"?"bg-blue-500/20 text-blue-300":j()==="team-real"?"bg-red-500/20 text-red-300":"bg-gray-500/20 text-gray-300"}`,children:M()}),e.jsx("span",{className:"bg-white/20 text-white px-3 py-1 rounded-full text-sm font-semibold",children:d.position||"N/A"}),(t==null?void 0:t.found)&&e.jsxs("span",{className:"bg-gradient-to-r from-yellow-400 to-yellow-500 text-yellow-900 px-3 py-1 rounded-full text-sm font-bold",children:["FIFA ",t.overall]})]})]}),e.jsx("button",{onClick:i,className:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-colors",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("div",{className:"p-6 max-h-[calc(90vh-120px)] overflow-y-auto",children:r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl text-blue-400 mb-4",children:e.jsx("i",{className:"fas fa-spinner fa-spin"})}),e.jsx("p",{className:"text-slate-400",children:"Loading FIFA data..."})]}):e.jsxs(e.Fragment,{children:[A(),t!=null&&t.found?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"fifa-stats-section",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-chart-bar text-blue-400"}),"FIFA Statistics",t.sofifaUrl&&e.jsxs("a",{href:t.sofifaUrl,target:"_blank",rel:"noopener noreferrer",className:"ml-auto bg-blue-500/10 text-blue-400 px-3 py-1 rounded-lg text-sm font-medium hover:bg-blue-500/20 transition-colors border border-blue-500/20",children:[e.jsx("i",{className:"fas fa-external-link-alt mr-2"}),"View on SoFIFA"]})]}),m(),p(),g()]})}):x()]})})]})})};function he({onNavigate:d}){const[s,i]=k.useState(null),[t,a]=k.useState(!1),[r,l]=k.useState(!1),[h,y]=k.useState(null),[v,j]=k.useState(null),[M,P]=k.useState(!1),{data:u,loading:D,error:A,refetch:m}=te("players","*"),{update:p}=se("players"),g={TH:0,IV:1,LV:2,RV:3,ZDM:4,ZM:5,ZOM:6,LM:7,RM:8,LF:9,RF:10,ST:11},x=n=>n==="TH"?"inline-block px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800 border border-green-200":["IV","LV","RV","ZDM"].includes(n)?"inline-block px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200":["ZM","ZOM","LM","RM"].includes(n)?"inline-block px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200":["LF","RF","ST"].includes(n)?"inline-block px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 border border-red-200":"inline-block px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200",c=n=>(u||[]).filter(o=>o.team===n).sort((o,w)=>(g[o.position]||99)-(g[w.position]||99)),f=n=>u?u.filter(o=>o.team===n).reduce((o,w)=>o+(w.value||0),0):0,N=n=>`${(n||0).toFixed(1)}M ‚Ç¨`,S=n=>{const o="modern-card";return n==="AEK"?`${o} border-l-4 border-blue-400`:n==="Real"?`${o} border-l-4 border-red-400`:n==="Ehemalige"?`${o} border-l-4 border-slate-400`:o},I=()=>{if(!u||u.length===0){alert("Keine Spieler f√ºr Report verf√ºgbar");return}const n=u.map(o=>`${o.name} (${o.team}): ${o.goals||0} Tore, ${o.position||"Unbekannt"}, Wert: ${N(o.value||0)}`).join(`
`);alert(`üìä Spieler-Report:

${n}`)},L=()=>{if(!u||u.length<4){R.error("üîÑ Nicht gen√ºgend Spieler f√ºr Transfer-Analyse");return}const n=c("AEK"),o=c("Real"),w=[],_=[...n,...o].reduce((b,F)=>(b[F.position]=(b[F.position]||0)+1,b),{}),J=[{name:"Pedri Gonz√°lez",position:"ZOM",age:21,marketValue:80,eafc25:85,club:"FC Barcelona",nationality:"ESP"},{name:"Jamal Musiala",position:"LF",age:21,marketValue:100,eafc25:84,club:"Bayern M√ºnchen",nationality:"GER"},{name:"Eduardo Camavinga",position:"ZDM",age:22,marketValue:90,eafc25:83,club:"Real Madrid",nationality:"FRA"},{name:"Florian Wirtz",position:"ZOM",age:21,marketValue:85,eafc25:82,club:"Bayer Leverkusen",nationality:"GER"},{name:"Arda G√ºler",position:"RV",age:19,marketValue:25,eafc25:77,club:"Real Madrid",nationality:"TUR"},{name:"Jude Bellingham",position:"ZM",age:21,marketValue:120,eafc25:86,club:"Real Madrid",nationality:"ENG"},{name:"Gavi",position:"ZM",age:20,marketValue:60,eafc25:81,club:"FC Barcelona",nationality:"ESP"},{name:"Warren Za√Øre-Emery",position:"ZM",age:18,marketValue:40,eafc25:78,club:"PSG",nationality:"FRA"}],C=[];Object.entries({TH:1,IV:2,ZM:2,ST:2}).forEach(([b,F])=>{(_[b]||0)<F&&C.push(b)}),C.length===0&&(n.length>o.length+1?C.push("ZM","ST"):o.length>n.length+1?C.push("ZM","IV"):C.push("ZOM","LF"));const Q=J.filter(b=>C.includes(b.position)||C.length===0).slice(0,3);if(n.length>o.length+2){const b=n.sort((F,K)=>(F.value||0)-(K.value||0))[0];w.push(`üîÑ Interner Transfer: ${b.name} von AEK zu Real`)}else if(o.length>n.length+2){const b=o.sort((F,K)=>(F.value||0)-(K.value||0))[0];w.push(`üîÑ Interner Transfer: ${b.name} von Real zu AEK`)}w.push("üåê TRANSFERMARKT.DE EMPFEHLUNGEN:"),Q.forEach((b,F)=>{w.push(`${F+1}. ${b.name} (${b.age}J) - ${b.position}
   üí∞ ${b.marketValue}M ‚Ç¨ | üéÆ EA FC 25: ${b.eafc25}
   üèÜ ${b.club} (${b.nationality})`)}),C.length>0&&w.push(`
üéØ Positions-Bedarf: ${C.join(", ")}`);const X=u.reduce((b,F)=>b+(F.value||0),0)/u.length;w.push(`
üí° Empfohlenes Budget: ~${(X*1.5).toFixed(0)}M ‚Ç¨ pro Transfer`),w.length===1&&w.push("ü§ñ Teams sind optimal ausbalanciert!"),R.success(`ü§ñ KI Transfer-Empfehlungen:

${w.join(`
`)}`,{duration:8e3})},$=n=>n==="AEK"?"text-blue-600":n==="Real"?"text-red-600":n==="Ehemalige"?"text-slate-600":"text-gray-600",U=async n=>{y(n)},T=async n=>{try{await p(n,h.id),R.success(`Spieler ${n.name} erfolgreich aktualisiert`),y(null),m()}catch(o){R.error("Fehler beim Aktualisieren des Spielers: "+o.message)}},V=n=>{j(n),P(!0)},W=()=>{P(!1),j(null)};if(D)return e.jsx(ae,{message:"Lade Kader..."});if(A)return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-accent-red mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-2xl"})}),e.jsx("p",{className:"text-text-muted mb-4",children:"Fehler beim Laden des Kaders"}),e.jsx("button",{onClick:m,className:"btn-primary",children:"Erneut versuchen"})]});const q=c("AEK"),G=c("Real"),H=c("Ehemalige"),Z=[{id:"aek",name:"AEK",displayName:"AEK Athen",players:q,squadValue:f("AEK"),icon:"üîµ"},{id:"real",name:"Real",displayName:"Real Madrid",players:G,squadValue:f("Real"),icon:"üî¥"},{id:"ehemalige",name:"Ehemalige",displayName:"Ehemalige",players:H,squadValue:f("Ehemalige"),icon:"‚ö™"}];return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Kader-√úbersicht"}),e.jsxs("p",{className:"text-text-muted",children:[(u==null?void 0:u.length)||0," Spieler insgesamt"]})]}),e.jsxs("div",{className:"modern-card mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"‚ö°"}),"Kader-Management"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:I,className:"flex items-center justify-center space-x-2 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx("span",{children:"üìä"}),e.jsx("span",{children:"Spieler-Report"})]}),e.jsxs("button",{onClick:L,className:"flex items-center justify-center space-x-2 bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[e.jsx("span",{children:"ü§ñ"}),e.jsx("span",{children:"KI Transfer-Tipps"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center justify-center space-x-2 bg-red-600 text-white py-3 px-4 rounded-lg hover:bg-red-700 transition-colors text-sm",children:[e.jsx("span",{children:"‚öΩ"}),e.jsx("span",{children:"Formation Planner"})]}),e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center justify-center space-x-2 bg-orange-600 text-white py-3 px-4 rounded-lg hover:bg-orange-700 transition-colors text-sm",children:[e.jsx("span",{children:"üì¶"}),e.jsx("span",{children:"Export/Import"})]}),e.jsxs("button",{onClick:()=>{const n=f("AEK")+f("Real")+f("Ehemalige"),o=u!=null&&u.length?n/u.length:0;R.success(`üìà Kader-Analyse:

Gesamtwert: ${N(n)}
Durchschnitt: ${N(o)}
Spieler gesamt: ${(u==null?void 0:u.length)||0}`,{duration:5e3})},className:"flex items-center justify-center space-x-2 bg-teal-600 text-white py-3 px-4 rounded-lg hover:bg-teal-700 transition-colors text-sm",children:[e.jsx("span",{children:"üìà"}),e.jsx("span",{children:"Kader-Analyse"})]})]})]}),e.jsx("div",{className:"space-y-4",children:Z.map(n=>e.jsxs("div",{className:S(n.name),children:[e.jsx("button",{onClick:()=>i(s===n.id?null:n.id),className:"w-full text-left p-4 focus:outline-none",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:n.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold text-lg ${$(n.name)}`,children:n.displayName}),e.jsxs("p",{className:"text-sm text-text-muted",children:[n.players.length," Spieler",n.squadValue>0&&e.jsxs("span",{className:"ml-2",children:["‚Ä¢ Kaderwert: ",N(n.squadValue)]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:n.players.length}),e.jsx("i",{className:`fas fa-chevron-${s===n.id?"up":"down"} transition-transform`})]})]})}),s===n.id&&e.jsx("div",{className:"px-4 pb-4 border-t border-border-light mt-4 pt-4",children:n.players.length>0?e.jsx("div",{className:"grid gap-3",children:n.players.map(o=>e.jsxs("div",{className:"bg-bg-tertiary rounded-lg p-3 hover:bg-bg-secondary transition-colors cursor-pointer relative group",onClick:()=>V(o),children:[e.jsx("div",{className:"absolute top-2 right-2 text-xs bg-blue-600 text-white px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:"üéÆ FIFA"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary group-hover:text-blue-400 transition-colors",children:o.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:x(o.position),children:o.position}),o.staerke&&e.jsxs("span",{className:"text-xs text-text-muted",children:["St√§rke: ",o.staerke]}),o.value&&e.jsx("span",{className:"text-xs text-primary-green font-medium",children:N(o.value)})]}),e.jsxs("div",{className:"text-xs text-blue-400 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Click for FIFA statistics"]})]})})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:w=>{w.stopPropagation(),V(o)},className:"text-blue-400 hover:text-blue-300 transition-colors p-2 rounded-full hover:bg-blue-400/10",title:"FIFA Statistics",children:e.jsx("i",{className:"fas fa-chart-bar text-sm"})}),e.jsx("button",{onClick:w=>{w.stopPropagation(),U(o)},className:"text-text-muted hover:text-primary-green transition-colors p-1",title:"Bearbeiten",children:e.jsx("i",{className:"fas fa-edit text-sm"})})]})]})]},o.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:n.icon}),e.jsxs("p",{className:"text-text-muted",children:["Keine Spieler in ",n.displayName]})]})})]},n.id))}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:(u==null?void 0:u.length)||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Spieler"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:B.length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Positionen"})]})]}),t&&e.jsx(ie,{onClose:()=>a(!1)}),r&&e.jsx(re,{players:u||[],onClose:()=>l(!1)}),M&&v&&e.jsx(ne,{player:v,isOpen:M,onClose:W}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Spieler bearbeiten"}),e.jsx("button",{onClick:()=>y(null),className:"text-text-muted hover:text-text-primary",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx(le,{player:h,onSave:T,onCancel:()=>y(null)})]})})})]})}function le({player:d,onSave:s,onCancel:i}){const[t,a]=k.useState({name:d.name||"",position:d.position||"",value:d.value||0,team:d.team||""}),r=l=>{if(l.preventDefault(),!t.name||!t.position||!t.team){R.error("Bitte alle Pflichtfelder ausf√ºllen");return}s(t)};return e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:t.name,onChange:l=>a({...t,name:l.target.value}),className:"w-full px-3 py-2 border border-border-light rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent",placeholder:"Spielername",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Position *"}),e.jsxs("select",{value:t.position,onChange:l=>a({...t,position:l.target.value}),className:"w-full px-3 py-2 border border-border-light rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Position w√§hlen"}),B.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Team *"}),e.jsxs("select",{value:t.team,onChange:l=>a({...t,team:l.target.value}),className:"w-full px-3 py-2 border border-border-light rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Team w√§hlen"}),e.jsx("option",{value:"AEK",children:"AEK Athen"}),e.jsx("option",{value:"Real",children:"Real Madrid"}),e.jsx("option",{value:"Ehemalige",children:"Ehemalige"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-1",children:"Marktwert (in Millionen ‚Ç¨)"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:t.value,onChange:l=>a({...t,value:parseFloat(l.target.value)||0}),onFocus:l=>l.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg focus:ring-2 focus:ring-primary-green focus:border-transparent",placeholder:"0.0"})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-primary-green text-white py-2 px-4 rounded-lg hover:bg-primary-green/90 transition-colors",children:"Speichern"}),e.jsx("button",{type:"button",onClick:i,className:"flex-1 bg-bg-secondary text-text-muted py-2 px-4 rounded-lg hover:bg-bg-tertiary transition-colors",children:"Abbrechen"})]})]})}export{he as default};
