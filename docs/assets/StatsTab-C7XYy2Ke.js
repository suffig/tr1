import{j as e,L as G}from"./index-AUrx9QUr.js";import{u as N}from"./useSupabase-BSKDRK-K.js";function z(){const{data:a,loading:k}=N("matches","*"),{data:l,loading:M}=N("players","*"),{data:o,loading:A}=N("spieler_des_spiels","*"),F=k||M||A,x=(a==null?void 0:a.length)||0,E=(l==null?void 0:l.length)||0,b=(l==null?void 0:l.filter(t=>t.team==="AEK"))||[],u=(l==null?void 0:l.filter(t=>t.team==="Real"))||[],v=(a==null?void 0:a.reduce((t,s)=>t+(s.goalsa||0)+(s.goalsb||0),0))||0,f=b.reduce((t,s)=>t+(s.value||0),0),g=u.reduce((t,s)=>t+(s.value||0),0),K=f+g,T=()=>{const t={};return a==null||a.forEach(s=>{let i=[];try{typeof s.goalslista=="string"?i=JSON.parse(s.goalslista):Array.isArray(s.goalslista)&&(i=s.goalslista)}catch(d){console.warn("Failed to parse goalslista in stats:",d),i=[]}i==null||i.forEach(d=>{const m=typeof d=="object"&&d!==null,c=m?d.player:d,j=m&&d.count||1;if(!t[c]){const n=l==null?void 0:l.find(h=>h.name===c);t[c]={name:c,goals:0,team:(n==null?void 0:n.team)||"AEK",value:(n==null?void 0:n.value)||0}}t[c].goals+=j});let r=[];try{typeof s.goalslistb=="string"?r=JSON.parse(s.goalslistb):Array.isArray(s.goalslistb)&&(r=s.goalslistb)}catch(d){console.warn("Failed to parse goalslistb in stats:",d),r=[]}r==null||r.forEach(d=>{const m=typeof d=="object"&&d!==null,c=m?d.player:d,j=m&&d.count||1;if(!t[c]){const n=l==null?void 0:l.find(h=>h.name===c);t[c]={name:c,goals:0,team:(n==null?void 0:n.team)||"Real",value:(n==null?void 0:n.value)||0}}t[c].goals+=j})}),Object.values(t).sort((s,i)=>i.goals-s.goals).slice(0,5)},R=()=>{const t={};return o==null||o.forEach(s=>{const i=l==null?void 0:l.find(r=>r.name===s.name&&r.team===s.team);t[s.name]={name:s.name,count:s.count||0,team:s.team,value:(i==null?void 0:i.value)||0}}),a==null||a.forEach(s=>{if(s.manofthematch){if(!t[s.manofthematch]){const i=l==null?void 0:l.find(r=>r.name===s.manofthematch);t[s.manofthematch]={name:s.manofthematch,count:0,team:(i==null?void 0:i.team)||"Unbekannt",value:(i==null?void 0:i.value)||0}}t[s.manofthematch].count++}}),Object.values(t).sort((s,i)=>i.count-s.count).slice(0,10)},p=T(),S=R(),y=(a==null?void 0:a.filter(t=>t.teama==="AEK"&&t.goalsa>t.goalsb||t.teamb==="AEK"&&t.goalsb>t.goalsa).length)||0,w=(a==null?void 0:a.filter(t=>t.teama==="Real"&&t.goalsa>t.goalsb||t.teamb==="Real"&&t.goalsb>t.goalsa).length)||0;return F?e.jsx(G,{message:"Lade Statistiken..."}):e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Statistiken"}),e.jsx("p",{className:"text-text-muted",children:"Übersicht über alle wichtigen Zahlen"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-green mb-2",children:x}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Spiele"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-accent-orange mb-2",children:v}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Tore"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-accent-blue mb-2",children:E}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Spieler"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-text-primary mb-2",children:x>0?(v/x).toFixed(1):"0.0"}),e.jsx("div",{className:"text-sm text-text-muted",children:"⌀ Tore/Spiel"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Marktwert-Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card text-center border-l-4 border-blue-400",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:[f.toFixed(1),"M €"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"AEK Kaderwert"})]}),e.jsxs("div",{className:"modern-card text-center border-l-4 border-red-400",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600 mb-2",children:[g.toFixed(1),"M €"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Real Kaderwert"})]}),e.jsxs("div",{className:"modern-card text-center border-l-4 border-green-400",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-2",children:[K.toFixed(1),"M €"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Kaderwert"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Team-Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"modern-card border-l-4 border-blue-400",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:"text-2xl mr-3",children:"🔵"}),e.jsx("h4",{className:"text-lg font-semibold text-blue-600",children:"AEK Athen"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Spieler:"}),e.jsx("span",{className:"font-medium",children:b.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Siege:"}),e.jsx("span",{className:"font-medium text-primary-green",children:y})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Siegesrate:"}),e.jsxs("span",{className:"font-medium",children:[x>0?(y/x*100).toFixed(1):"0.0","%"]})]})]})]}),e.jsxs("div",{className:"modern-card border-l-4 border-purple-400",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:"text-2xl mr-3",children:"🟣"}),e.jsx("h4",{className:"text-lg font-semibold text-purple-600",children:"Real Madrid"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Spieler:"}),e.jsx("span",{className:"font-medium",children:u.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Siege:"}),e.jsx("span",{className:"font-medium text-primary-green",children:w})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Siegesrate:"}),e.jsxs("span",{className:"font-medium",children:[x>0?(w/x*100).toFixed(1):"0.0","%"]})]})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"⚽ Top Torschützen"}),p.length>0?e.jsx("div",{className:"space-y-3",children:p.map((t,s)=>e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:`text-2xl font-bold ${s===0?"text-yellow-500":s===1?"text-gray-400":s===2?"text-orange-600":"text-text-muted"}`,children:["#",s+1]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:t.name}),e.jsxs("div",{className:"text-sm text-text-muted",children:[t.team," • Marktwert: ",t.value.toFixed(1),"M €"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:t.goals}),e.jsx("div",{className:"text-xs text-text-muted",children:"Tore"})]})]})},t.name))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⚽"}),e.jsx("p",{className:"text-text-muted",children:"Noch keine Torschützen verfügbar"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"⭐ Spieler des Spiels (SdS)"}),S.length>0?e.jsx("div",{className:"space-y-3",children:S.map((t,s)=>e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:`text-2xl font-bold ${s===0?"text-yellow-500":s===1?"text-gray-400":s===2?"text-orange-600":"text-text-muted"}`,children:["#",s+1]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:t.name}),e.jsxs("div",{className:"text-sm text-text-muted",children:[t.team," • Marktwert: ",t.value.toFixed(1),"M €"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.count}),e.jsx("div",{className:"text-xs text-text-muted",children:"SdS"})]})]})},t.name))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⭐"}),e.jsx("p",{className:"text-text-muted",children:"Noch keine Spieler des Spiels vergeben"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Letzte Aktivität"}),a&&a.length>0?e.jsx("div",{className:"space-y-3",children:a.sort((t,s)=>new Date(s.date)-new Date(t.date)).slice(0,5).map(t=>e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-text-primary",children:[t.teama," vs ",t.teamb]}),e.jsx("div",{className:"text-sm text-text-muted",children:new Date(t.date).toLocaleDateString("de-DE")})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-lg font-bold text-text-primary",children:[t.goalsa," : ",t.goalsb]})})]})},t.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"📊"}),e.jsx("p",{className:"text-text-muted",children:"Noch keine Spiele für Statistiken verfügbar"})]})]}),e.jsx("div",{className:"modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Statistiken-Modul"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Grundlegende Statistiken sind implementiert. Erweiterte Analysen und Charts können bei Bedarf hinzugefügt werden."})]})]})})]})}export{z as default};
