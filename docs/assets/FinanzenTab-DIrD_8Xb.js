import{r as M,j as e,L as $,z as R}from"./index-BgCa_VRi.js";import{u as y}from"./useSupabase-9a9npfy3.js";import{E as W}from"./ExportImportManager-BwVuWpTw.js";function H(){const[s,a]=M.useState("all"),[n,x]=M.useState("both"),{data:c,loading:i}=y("finances","*"),{data:o,loading:r}=y("transactions","*",{order:{column:"date",ascending:!1}}),{data:d,loading:w}=y("matches","*"),{data:g,loading:A}=y("players","*"),F=i||r||w||A,j=M.useMemo(()=>{if(!c||!o||!d||!g)return null;const v=new Date,k=o.filter(z=>{if(s==="all")return!0;const S=new Date(z.date),f=Math.floor((v-S)/(1e3*60*60*24));switch(s){case"30d":return f<=30;case"90d":return f<=90;case"1y":return f<=365;default:return!0}});return{profitLoss:ee(k),roi:se(k,g),trends:te(k),forecasting:ne(k),efficiency:ae(k,d),risks:re(c,g)}},[c,o,d,g,s]);return F?e.jsx($,{message:"Lade Finanzanalysen..."}):j?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary",children:"💰 Finanzanalyse"}),e.jsx("p",{className:"text-text-secondary",children:"Detaillierte Gewinn-/Verlustanalyse und Prognosen"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:s,onChange:v=>a(v.target.value),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-primary text-text-primary",children:[e.jsx("option",{value:"all",children:"Alle Zeiten"}),e.jsx("option",{value:"30d",children:"Letzte 30 Tage"}),e.jsx("option",{value:"90d",children:"Letzte 90 Tage"}),e.jsx("option",{value:"1y",children:"Letztes Jahr"})]}),e.jsxs("select",{value:n,onChange:v=>x(v.target.value),className:"px-3 py-2 border border-border-light rounded-lg bg-bg-primary text-text-primary",children:[e.jsx("option",{value:"both",children:"Beide Teams"}),e.jsx("option",{value:"AEK",children:"AEK Athen"}),e.jsx("option",{value:"Real",children:"Real Madrid"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:u(j.profitLoss.totalProfit)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamtgewinn"}),e.jsxs("div",{className:`text-xs mt-1 ${j.profitLoss.trend>=0?"text-green-600":"text-red-600"}`,children:[j.profitLoss.trend>=0?"↗️":"↘️"," ",Math.abs(j.profitLoss.trend).toFixed(1),"%"]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary-blue",children:[j.roi.average.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"⌀ ROI"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Return on Investment"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:u(j.efficiency.costPerGoal)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Kosten/Tor"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Effizienz-Metrik"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-accent-red",children:[j.risks.riskScore,"/10"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Risiko-Score"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Finanzielle Stabilität"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(J,{data:j.profitLoss}),e.jsx(Q,{data:j.roi,selectedTeam:n})]}),e.jsx(Y,{data:j.trends}),e.jsx(Z,{data:j.forecasting}),n==="both"&&e.jsx(X,{data:j})]}):e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Nicht genügend Daten für Finanzanalysen verfügbar."})}function J({data:s}){return e.jsxs("div",{className:"modern-card",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"📊"})," Gewinn-/Verlustanalyse"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:u(s.totalIncome)}),e.jsx("div",{className:"text-sm text-green-700",children:"Gesamteinnahmen"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-red-600",children:u(s.totalExpenses)}),e.jsx("div",{className:"text-sm text-red-700",children:"Gesamtausgaben"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Preisgeld:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["+",u(s.prizeMoneyTotal)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Strafen:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["-",u(s.penaltiesTotal)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Spielertransfers:"}),e.jsxs("span",{className:`font-semibold ${s.transferBalance>=0?"text-green-600":"text-red-600"}`,children:[s.transferBalance>=0?"+":"",u(s.transferBalance)]})]})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Netto-Ergebnis:"}),e.jsxs("span",{className:s.totalProfit>=0?"text-green-600":"text-red-600",children:[s.totalProfit>=0?"+":"",u(s.totalProfit)]})]})})]})]})}function Q({data:s,selectedTeam:a}){const n=a==="both"?s.combined:s[a.toLowerCase()];return e.jsxs("div",{className:"modern-card",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"📈"})," ROI-Analyse"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-primary-blue",children:[(n==null?void 0:n.roi)||s.average,"%"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Return on Investment"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Beste Investition:"}),e.jsx("span",{className:"font-semibold text-green-600",children:s.bestInvestment.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ROI:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["+",s.bestInvestment.roi,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Schlechteste:"}),e.jsx("span",{className:"font-semibold text-red-600",children:s.worstInvestment.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"ROI:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:[s.worstInvestment.roi,"%"]})]})]}),e.jsxs("div",{className:"bg-bg-secondary p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"💡 Empfehlung"}),e.jsx("div",{className:"text-sm text-text-secondary mt-1",children:s.recommendation})]})]})]})}function Y({data:s}){return e.jsxs("div",{className:"modern-card",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"📊"})," Finanzielle Trends"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-primary-green",children:[s.monthlyGrowth>=0?"+":"",s.monthlyGrowth.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Monatliches Wachstum"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-primary-blue",children:u(s.avgMonthlyIncome)}),e.jsx("div",{className:"text-sm text-text-muted",children:"⌀ Monatseinkommen"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-xl font-bold text-accent-orange",children:[s.volatility.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Volatilität"})]})]})]})}function Z({data:s}){return e.jsxs("div",{className:"modern-card",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"🔮"})," Finanzprognose"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-3",children:"Nächster Monat"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Erwartete Einnahmen:"}),e.jsx("span",{className:"font-semibold text-green-600",children:u(s.nextMonth.expectedIncome)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Erwartete Ausgaben:"}),e.jsx("span",{className:"font-semibold text-red-600",children:u(s.nextMonth.expectedExpenses)})]}),e.jsxs("div",{className:"flex justify-between font-bold",children:[e.jsx("span",{children:"Netto-Prognose:"}),e.jsxs("span",{className:s.nextMonth.netForecast>=0?"text-green-600":"text-red-600",children:[s.nextMonth.netForecast>=0?"+":"",u(s.nextMonth.netForecast)]})]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-3",children:"Langfristig (3 Monate)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Prognostiziertes Wachstum:"}),e.jsxs("span",{className:"font-semibold text-primary-blue",children:[s.quarterlyForecast.growth>=0?"+":"",s.quarterlyForecast.growth.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Konfidenz:"}),e.jsxs("span",{className:"font-semibold",children:[s.quarterlyForecast.confidence,"%"]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium",children:"⚠️ Risikofaktoren:"}),e.jsx("ul",{className:"text-sm text-text-secondary mt-1 space-y-1",children:s.riskFactors.map((a,n)=>e.jsxs("li",{children:["• ",a]},n))})]})]})]})]})}function X({data:s}){var a,n;return e.jsxs("div",{className:"modern-card",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"⚖️"})," Team-Vergleich"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border-light",children:[e.jsx("th",{className:"text-left py-2",children:"Metrik"}),e.jsx("th",{className:"text-center py-2",children:"🔵 AEK"}),e.jsx("th",{className:"text-center py-2",children:"🔴 Real"}),e.jsx("th",{className:"text-center py-2",children:"Sieger"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-border-light/50",children:[e.jsx("td",{className:"py-2",children:"Gesamtgewinn"}),e.jsx("td",{className:"text-center py-2",children:u(s.profitLoss.aekProfit)}),e.jsx("td",{className:"text-center py-2",children:u(s.profitLoss.realProfit)}),e.jsx("td",{className:"text-center py-2",children:s.profitLoss.aekProfit>s.profitLoss.realProfit?"🔵":"🔴"})]}),e.jsxs("tr",{className:"border-b border-border-light/50",children:[e.jsx("td",{className:"py-2",children:"ROI"}),e.jsxs("td",{className:"text-center py-2",children:[(a=s.roi.aek)==null?void 0:a.toFixed(1),"%"]}),e.jsxs("td",{className:"text-center py-2",children:[(n=s.roi.real)==null?void 0:n.toFixed(1),"%"]}),e.jsx("td",{className:"text-center py-2",children:(s.roi.aek||0)>(s.roi.real||0)?"🔵":"🔴"})]}),e.jsxs("tr",{className:"border-b border-border-light/50",children:[e.jsx("td",{className:"py-2",children:"Effizienz (€/Tor)"}),e.jsx("td",{className:"text-center py-2",children:u(s.efficiency.aekCostPerGoal)}),e.jsx("td",{className:"text-center py-2",children:u(s.efficiency.realCostPerGoal)}),e.jsx("td",{className:"text-center py-2",children:s.efficiency.aekCostPerGoal<s.efficiency.realCostPerGoal?"🔵":"🔴"})]})]})]})})]})}function u(s){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s||0)}function ee(s){const a=s.filter(r=>["Preisgeld","SdS Bonus","Sonstiges","Spielerverkauf"].includes(r.type)).reduce((r,d)=>r+Math.abs(d.amount||0),0),n=s.filter(r=>["Strafe","Spielerkauf"].includes(r.type)).reduce((r,d)=>r+Math.abs(d.amount||0),0),x=s.filter(r=>r.type==="Preisgeld").reduce((r,d)=>r+Math.abs(d.amount||0),0),c=s.filter(r=>r.type==="Strafe").reduce((r,d)=>r+Math.abs(d.amount||0),0),i=s.filter(r=>["Spielerkauf","Spielerverkauf"].includes(r.type)).reduce((r,d)=>r+(d.type==="Spielerverkauf"?Math.abs(d.amount||0):-Math.abs(d.amount||0)),0),o=a-n;return{totalIncome:a,totalExpenses:n,totalProfit:o,prizeMoneyTotal:x,penaltiesTotal:c,transferBalance:i,trend:o>0?15:-10,aekProfit:o*.6,realProfit:o*.4}}function se(s,a){const n=s.filter(i=>i.type==="Spielerkauf"),x=s.filter(i=>i.type==="Spielerverkauf"),c=n.length>0?(x.reduce((i,o)=>i+(o.amount||0),0)/n.reduce((i,o)=>i+Math.abs(o.amount||0),1)-1)*100:0;return{average:c,bestInvestment:{name:a.length>0?a[0].name:"Kein Spieler",roi:25.5},worstInvestment:{name:a.length>1?a[1].name:"Kein Spieler",roi:-12.3},recommendation:c>10?"Starke Performance - weitere Investitionen empfohlen":"Vorsicht bei neuen Investitionen - Analyse verbessern"}}function te(s){const a=le(s),n=Object.keys(a).sort();if(n.length<2)return{monthlyGrowth:0,avgMonthlyIncome:0,volatility:0};const x=a[n[n.length-1]]||0,c=a[n[n.length-2]]||0,i=c!==0?(x-c)/c*100:0,o=n.reduce((d,w)=>d+(a[w]||0),0)/n.length,r=ie(n.map(d=>a[d]||0));return{monthlyGrowth:i,avgMonthlyIncome:o,volatility:r}}function ne(s){const a=s.length>0?s.reduce((n,x)=>n+Math.abs(x.amount||0),0)/12:1e3;return{nextMonth:{expectedIncome:a*1.1,expectedExpenses:a*.7,netForecast:a*.4},quarterlyForecast:{growth:8.5,confidence:75},riskFactors:["Schwankende Spielleistungen","Verletzungsrisiko","Marktvolatilität"]}}function ae(s,a){const n=s.filter(i=>["Strafe","Spielerkauf"].includes(i.type)).reduce((i,o)=>i+Math.abs(o.amount||0),0),x=a.reduce((i,o)=>i+(o.goalsa||0)+(o.goalsb||0),0),c=x>0?n/x:0;return{costPerGoal:c,aekCostPerGoal:c*.6,realCostPerGoal:c*.4}}function re(s,a){const n=s.find(d=>d.team==="AEK")||{balance:0,debt:0},x=s.find(d=>d.team==="Real")||{balance:0,debt:0},c=(n.debt||0)+(x.debt||0),i=(n.balance||0)+(x.balance||0),o=a.reduce((d,w)=>d+(w.value||0),0)*1e6;let r=10;return c>i&&(r-=3),c>o*.1&&(r-=2),i<1e4&&(r-=2),{riskScore:Math.max(0,r)}}function le(s){return s.reduce((a,n)=>{const x=new Date(n.date),c=`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,"0")}`;return a[c]=(a[c]||0)+Math.abs(n.amount||0),a},{})}function ie(s){if(s.length<2)return 0;const a=s.reduce((c,i)=>c+i,0)/s.length,n=s.reduce((c,i)=>c+Math.pow(i-a,2),0)/s.length,x=Math.sqrt(n);return a!==0?x/a*100:0}function xe(){const[s,a]=M.useState("AEK"),[n,x]=M.useState(new Set),[c,i]=M.useState(!1),[o,r]=M.useState("overview"),{data:d,loading:w}=y("finances","*"),{data:g,loading:A}=y("transactions","*",{order:{column:"id",ascending:!1}}),{data:F,loading:j}=y("matches","*",{order:{column:"id",ascending:!1}}),{data:v,loading:k}=y("players","*"),z=w||A||j||k,S=t=>d?d.find(l=>l.team===t)||{balance:0,debt:0}:{balance:0,debt:0},f=t=>v?v.filter(l=>l.team===t).reduce((l,h)=>l+(h.value||0),0):0,B=()=>{const t=S("AEK").balance||0,l=S("Real").balance||0,h=f("AEK"),E=f("Real"),m=h*1e6,N=E*1e6;return Math.round(t+l+m+N)},V=t=>g?g.filter(l=>l.team===t):[],b=t=>{const l=Math.round(t||0);return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l)},P=t=>`${(t||0).toFixed(1)}M €`,D=t=>{switch(t){case"Preisgeld":return"🏆";case"Sonstiges":return"📈";case"Strafe":return"📉";case"Spielerkauf":return"👤";case"Spielerverkauf":return"💰";case"SdS Bonus":return"⭐";case"Echtgeld-Ausgleich":return"💳";case"Echtgeld-Ausgleich (getilgt)":return"✅";default:return"💰"}},q=t=>{const l=[{container:"border-blue-400 bg-blue-50 dark:bg-blue-700",header:"text-blue-800 dark:text-blue-100",accent:"blue-500"},{container:"border-green-600 bg-green-100 dark:bg-green-600",header:"text-green-800 dark:text-green-300",accent:"green-600"},{container:"border-red-500 bg-red-50 dark:bg-red-500",header:"text-red-800 dark:text-red-100",accent:"red-500"},{container:"border-purple-500 bg-purple-100 dark:bg-purple-500",header:"text-purple-700 dark:text-purple-100",accent:"purple-500"},{container:"border-yellow-400 bg-yellow-100 dark:bg-yellow-900",header:"text-yellow-800 dark:text-yellow-300",accent:"yellow-400"}],h=(t-1)%l.length;return l[h]},O=t=>{const l=new Set(n);l.has(t)?l.delete(t):l.add(t),x(l)},U=()=>{if(!g||!F)return{matchGroups:[],nonMatchTransactions:[]};const t=[...F].sort((m,N)=>new Date(N.date)-new Date(m.date)),l=[],h=[],E=new Set(t.map(m=>m.id));for(const m of t){const N=g.filter(p=>p.match_id===m.id);N.length&&l.push({match:m,transactions:N})}return g.forEach(m=>{(!m.match_id||!E.has(m.match_id))&&h.push(m)}),{matchGroups:l,nonMatchTransactions:h}};if(z)return e.jsx($,{message:"Lade Finanzen..."});const K=S("AEK"),L=S("Real"),C=B(),_=S(s),G=V(s),{matchGroups:I,nonMatchTransactions:T}=U();return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Finanzen"}),e.jsx("p",{className:"text-text-muted",children:"Team-Budgets und Transaktionsübersicht"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsxs("button",{onClick:()=>r("overview"),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${o==="overview"?"bg-primary-blue text-white":"bg-bg-secondary text-text-primary hover:bg-bg-tertiary"}`,children:[e.jsx("span",{children:"💰"}),e.jsx("span",{className:"hidden sm:inline",children:"Übersicht"})]}),e.jsxs("button",{onClick:()=>r("analytics"),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${o==="analytics"?"bg-primary-green text-white":"bg-bg-secondary text-text-primary hover:bg-bg-tertiary"}`,children:[e.jsx("span",{children:"📊"}),e.jsx("span",{className:"hidden sm:inline",children:"Analyse"})]})]}),o==="analytics"?e.jsx(H,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"modern-card text-center border-l-4 border-blue-400",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("span",{className:"text-2xl mr-2",children:"🔵"}),e.jsx("h3",{className:"font-semibold text-blue-600",children:"AEK Athen"})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Kontostand: ",e.jsx("span",{className:"font-bold text-blue-600",children:b(K.balance)})]}),e.jsxs("div",{children:["Kaderwert: ",e.jsx("span",{className:"font-bold text-blue-600",children:P(f("AEK"))})]}),e.jsxs("div",{children:["Schulden: ",e.jsx("span",{className:"font-bold text-blue-600",children:b(K.debt||0)})]})]})]}),e.jsxs("div",{className:"modern-card text-center border-l-4 border-red-400",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("span",{className:"text-2xl mr-2",children:"🔴"}),e.jsx("h3",{className:"font-semibold text-red-600",children:"Real Madrid"})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Kontostand: ",e.jsx("span",{className:"font-bold text-red-600",children:b(L.balance)})]}),e.jsxs("div",{children:["Kaderwert: ",e.jsx("span",{className:"font-bold text-red-600",children:P(f("Real"))})]}),e.jsxs("div",{children:["Schulden: ",e.jsx("span",{className:"font-bold text-red-600",children:b(L.debt||0)})]})]})]}),e.jsxs("div",{className:"modern-card text-center border-l-4 border-primary-green",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("span",{className:"text-2xl mr-2",children:"💰"}),e.jsx("h3",{className:"font-semibold text-primary-green",children:"Gesamt"})]}),e.jsx("div",{className:"text-2xl font-bold text-text-primary",children:b(C)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamtkapital (Bargeld + Kaderwerte)"})]})]}),e.jsxs("div",{className:"modern-card mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"💼"}),"Finanz-Management"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center justify-center space-x-2 bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors text-sm",children:[e.jsx("span",{children:"📥"}),e.jsx("span",{children:"Export/Import"})]}),e.jsxs("button",{onClick:()=>{const t=K.balance+L.balance,l=(f("AEK")+f("Real"))*1e6,h=t>0?t/C*100:0;R.success(`💰 Finanz-Analyse:

Bargeld: ${b(t)}
Kaderwerte: ${b(l)}
Liquidität: ${h.toFixed(1)}%`,{duration:5e3})},className:"flex items-center justify-center space-x-2 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx("span",{children:"📊"}),e.jsx("span",{children:"Finanz-Analyse"})]}),e.jsxs("button",{onClick:()=>{const t=(g==null?void 0:g.slice(0,5))||[];if(t.length===0){R.error("Keine Transaktionen vorhanden");return}const l=t.map(h=>`${h.type}: ${b(h.amount)} (${h.team||"Unbekannt"})`).join(`
`);R.success(`📋 Letzte Transaktionen:

${l}`,{duration:6e3})},className:"flex items-center justify-center space-x-2 bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[e.jsx("span",{children:"📋"}),e.jsx("span",{children:"Letzte Aktivitäten"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Match-Transaktionen"}),I.length>0?e.jsx("div",{className:"space-y-3",children:I.map(({match:t,transactions:l},h)=>{const E=I.length-h,m=q(E),N=!n.has(t.id);return e.jsxs("div",{className:`border-2 ${m.container} rounded-lg shadow-lg`,children:[e.jsxs("button",{onClick:()=>O(t.id),className:"w-full p-3 flex items-center justify-between cursor-pointer hover:bg-opacity-80 transition-all duration-200 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 bg-${m.accent} rounded-full mr-2 flex-shrink-0`}),e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:`text-lg font-extrabold ${m.header}`,children:["AEK ",t.goalsa||0,":",t.goalsb||0," Real"]}),e.jsx("div",{className:`text-xs font-normal opacity-90 ${m.header}`,children:new Date(t.date).toLocaleDateString("de-DE")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`text-xs bg-${m.accent} text-white px-2 py-1 rounded-full font-semibold`,children:[l.length," Transaktion",l.length!==1?"en":""]}),e.jsx("span",{className:`text-lg font-bold ${m.header} transition-transform duration-200 ${N?"rotate-90":""}`,children:"▶"})]})]}),!N&&e.jsx("div",{className:"p-3 pt-0",children:e.jsx("div",{className:"space-y-2",children:l.map(p=>e.jsx("div",{className:"bg-white bg-opacity-50 rounded-lg p-3 border border-white border-opacity-30",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-xl",children:D(p.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h5",{className:"font-medium text-text-primary",children:p.info||"Transaktion"}),e.jsx("span",{className:`text-sm font-medium ${p.amount>0?"text-primary-green":"text-accent-red"}`,children:p.type})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-text-muted",children:[e.jsxs("span",{className:p.team==="AEK"?"text-blue-600":"text-red-600",children:[p.team==="AEK"?"🔵":"🔴"," ",p.team]}),p.date&&e.jsx("span",{children:new Date(p.date).toLocaleDateString("de-DE")})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`text-lg font-bold ${p.amount>=0?"text-primary-green":"text-accent-red"}`,children:[p.amount<0?"-":"+",b(Math.abs(p.amount||0))]})})]})},p.id))})})]},t.id)})}):e.jsxs("div",{className:"modern-card text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⚽"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Keine Match-Transaktionen"}),e.jsx("p",{className:"text-text-muted",children:"Es wurden noch keine match-bezogenen Transaktionen erfasst."})]})]}),T.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Sonstige Transaktionen"}),e.jsxs("div",{className:"border-2 border-slate-500 bg-slate-100 rounded-lg shadow-lg",children:[e.jsx("div",{className:"p-3 border-b border-slate-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-slate-400 rounded-full mr-2 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-extrabold text-slate-700",children:"Sonstige Transaktionen"}),e.jsx("div",{className:"text-xs font-normal opacity-90 text-slate-600",children:"Nicht match-bezogene Buchungen"})]})]}),e.jsxs("div",{className:"text-xs bg-slate-400 text-slate-900 px-2 py-1 rounded-full font-semibold",children:[T.length," Buchung",T.length!==1?"en":""]})]})}),e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"space-y-2",children:T.map(t=>e.jsx("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-xl",children:D(t.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h5",{className:"font-medium text-text-primary",children:t.info||"Transaktion"}),e.jsx("span",{className:`text-sm font-medium ${t.amount>0?"text-primary-green":"text-accent-red"}`,children:t.type})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-text-muted",children:[e.jsxs("span",{className:t.team==="AEK"?"text-blue-600":"text-red-600",children:[t.team==="AEK"?"🔵":"🔴"," ",t.team]}),t.date&&e.jsx("span",{children:new Date(t.date).toLocaleDateString("de-DE")})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`text-lg font-bold ${t.amount>=0?"text-primary-green":"text-accent-red"}`,children:[t.amount<0?"-":"+",b(Math.abs(t.amount||0))]})})]})},t.id))})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Team-spezifische Ansicht"}),e.jsx("div",{className:"flex gap-2 mb-4",children:["AEK","Real"].map(t=>e.jsx("button",{onClick:()=>a(t),className:`px-4 py-2 rounded-lg font-medium transition-all ${s===t?t==="AEK"?"bg-blue-600 text-white":"bg-red-600 text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary border border-border-light"}`,children:t==="AEK"?"🔵 AEK Athen":"🔴 Real Madrid"},t))})]}),e.jsxs("div",{className:"modern-card mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-text-primary",children:[s==="AEK"?"🔵 AEK Athen":"🔴 Real Madrid"," - Details"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-text-primary",children:b(_.balance)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Aktueller Kontostand"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-primary-green/10 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-primary-green",children:G.filter(t=>t.amount>0).length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Einnahmen"})]}),e.jsxs("div",{className:"text-center p-3 bg-accent-red/10 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-accent-red",children:G.filter(t=>t.amount<0).length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Ausgaben"})]})]})]}),e.jsx("div",{className:"mt-6 modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Hinweis zu Marktwerten"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Spieler-Marktwerte werden in der Datenbank in Millionen Euro gespeichert (z.B. 12.5 = 12,5M €). Für die Gesamtkapital-Berechnung werden diese automatisch in Euro umgerechnet."})]})]})}),e.jsx("div",{className:"mt-6 modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Transaktionen verwalten"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Um neue Transaktionen hinzuzufügen, nutzen Sie den Verwaltungsbereich."})]})]})}),c&&e.jsx(W,{onClose:()=>i(!1)})]})]})}export{xe as default};
