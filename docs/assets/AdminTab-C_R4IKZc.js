import{s as p,r as A,j as e,z as E}from"./index-Cen6uZUL.js";import{u as q}from"./useSupabase-VXxsY6GG.js";import{B as C}from"./banTypes-DuNOJEIt.js";class D{static async submitMatch(c){const{date:a,teama:t="AEK",teamb:n="Real",goalsa:i,goalsb:m,goalslista:h=[],goalslistb:f=[],ownGoalsA:r=0,ownGoalsB:l=0,yellowa:b=0,reda:N=0,yellowb:j=0,redb:d=0,manofthematch:v,editId:g=null}=c;try{const{prizeaek:w,prizereal:T,winner:s,loser:u}=this.calculatePrizeMoney(i,m,b,N,j,d);g&&await this.deleteMatchTransactions(g);const o=[...h],x=[...f];r>0&&x.push({count:r,player:"Eigentore_AEK"}),l>0&&o.push({count:l,player:"Eigentore_Real"});const S={date:a,teama:t,teamb:n,goalsa:parseInt(i)||0,goalsb:parseInt(m)||0,goalslista:h,goalslistb:f,yellowa:parseInt(b)||0,reda:parseInt(N)||0,yellowb:parseInt(j)||0,redb:parseInt(d)||0,manofthematch:v||null,prizeaek:w,prizereal:T},z=await p.insert("matches",S);if(z.error)throw new Error(`Match insert failed: ${z.error.message}`);const M=z.data.id,B=new Date().toISOString().slice(0,10);if(o.length>0){const K=o.filter(k=>typeof k=="object"&&k.player?!k.player.startsWith("Eigentore_"):!k.startsWith("Eigentore_"));await this.updatePlayersGoals(K,"AEK")}if(x.length>0){const K=x.filter(k=>typeof k=="object"&&k.player?!k.player.startsWith("Eigentore_"):!k.startsWith("Eigentore_"));await this.updatePlayersGoals(K,"Real")}return v&&await this.updatePlayerOfTheMatchStats(v),await this.processFinancialTransactions({matchId:M,date:B,prizeaek:w,prizereal:T,manofthematch:v,winner:s,loser:u}),await this.decrementBansAfterMatch(),{success:!0,matchId:M,message:`Match ${t} vs ${n} (${i}:${m}) erfolgreich hinzugefÃ¼gt`}}catch(w){throw console.error("Error in submitMatch:",w),new Error(`Fehler beim Speichern des Matches: ${w.message}`)}}static calculatePrizeMoney(c,a,t,n,i,m){let h=0,f=0,r=null,l=null;return c>a?(r="AEK",l="Real"):c<a&&(r="Real",l="AEK"),r&&l&&(r==="AEK"?(h=1e6-a*5e4-t*2e4-n*5e4,f=-(5e5+c*5e4+i*2e4+m*5e4)):(f=1e6-c*5e4-i*2e4-m*5e4,h=-(5e5+a*5e4+t*2e4+n*5e4))),{prizeaek:h,prizereal:f,winner:r,loser:l}}static async updatePlayersGoals(c,a){const t={};if(c.length>0&&typeof c[0]=="object"&&c[0].player!==void 0)c.forEach(n=>{n.player&&!n.player.startsWith("Eigentore_")&&(t[n.player]=(t[n.player]||0)+(n.count||1))});else for(const n of c)!n||!n.trim()||n.startsWith("Eigentore_")||(t[n]=(t[n]||0)+1);for(const[n,i]of Object.entries(t))try{const m=await p.select("players","id, goals",{eq:{name:n,team:a}});if(m.data&&m.data.length>0){const h=m.data[0],f=(h.goals||0)+i;await p.update("players",{goals:f},h.id)}}catch(m){console.warn(`Failed to update goals for player ${n}:`,m)}}static async updatePlayerOfTheMatchStats(c){try{const a=await p.select("players","team",{eq:{name:c}});if(!a.data||a.data.length===0){console.warn(`Player ${c} not found for SdS stats`);return}const t=a.data[0].team,n=await p.select("spieler_des_spiels","*",{eq:{name:c,team:t}});if(n.data&&n.data.length>0){const i=n.data[0];await p.update("spieler_des_spiels",{count:i.count+1},i.id)}else await p.insert("spieler_des_spiels",{name:c,team:t,count:1})}catch(a){console.warn(`Failed to update SdS stats for ${c}:`,a)}}static async processFinancialTransactions({matchId:c,date:a,prizeaek:t,prizereal:n,manofthematch:i,winner:m,loser:h}){const f=await this.getTeamFinance("AEK"),r=await this.getTeamFinance("Real");let l=f.balance||0,b=r.balance||0;const N=i?await this.getSdSBonus(i,"AEK"):0,j=i?await this.getSdSBonus(i,"Real"):0;N>0&&(l+=N,await this.insertTransaction({date:a,type:"SdS Bonus",team:"AEK",amount:N,match_id:c,info:"SdS Bonus"}),await this.updateTeamBalance("AEK",l)),j>0&&(b+=j,await this.insertTransaction({date:a,type:"SdS Bonus",team:"Real",amount:j,match_id:c,info:"SdS Bonus"}),await this.updateTeamBalance("Real",b)),t!==0&&(l+=t,l<0&&(l=0),await this.insertTransaction({date:a,type:"Preisgeld",team:"AEK",amount:t,match_id:c,info:"Preisgeld"}),await this.updateTeamBalance("AEK",l)),n!==0&&(b+=n,b<0&&(b=0),await this.insertTransaction({date:a,type:"Preisgeld",team:"Real",amount:n,match_id:c,info:"Preisgeld"}),await this.updateTeamBalance("Real",b)),m&&h&&await this.processEchtgeldAusgleich({date:a,matchId:c,winner:m,loser:h,aekBalance:l,realBalance:b,prizeaek:t,prizereal:n,sdsBonusAek:N>0?1:0,sdsBonusReal:j>0?1:0,manofthematch:i})}static async getTeamFinance(c){const a=await p.select("finances","*",{eq:{team:c}});return a.data&&a.data.length>0?a.data[0]:{balance:0,debt:0}}static async getSdSBonus(c,a){const t=await p.select("players","team",{eq:{name:c}});return t.data&&t.data.length>0&&t.data[0].team===a?1e5:0}static async insertTransaction(c){return await p.insert("transactions",c)}static async updateTeamBalance(c,a){const t=await p.select("finances","id",{eq:{team:c}});return t.data&&t.data.length>0?await p.update("finances",{balance:a},t.data[0].id):await p.insert("finances",{team:c,balance:a,debt:0})}static async processEchtgeldAusgleich({date:c,matchId:a,winner:t,loser:n,aekBalance:i,realBalance:m,prizeaek:h,prizereal:f,sdsBonusAek:r,sdsBonusReal:l,manofthematch:b}){const N=await this.getTeamFinance("AEK"),j=await this.getTeamFinance("Real"),d={AEK:N.debt||0,Real:j.debt||0},v=(B,K,k)=>{let F=B;k&&(F+=1e5);let R=(Math.abs(K)-F)/1e5;return R<0&&(R=0),5+Math.round(R)},g=v(i,h,r),w=v(m,f,l),T=n==="AEK"?g:w,s=d[t],u=d[n],o=Math.min(s,T*1),x=Math.max(0,s-o),S=T*1-o,z=u+Math.max(0,S),M=await p.select("finances","id",{eq:{team:t}});if(M.data&&M.data.length>0&&await p.update("finances",{debt:x},M.data[0].id),S>0){await this.insertTransaction({date:c,type:"Echtgeld-Ausgleich",team:n,amount:Math.max(0,S),match_id:a,info:"Echtgeld-Ausgleich"});const B=await p.select("finances","id",{eq:{team:n}});B.data&&B.data.length>0&&await p.update("finances",{debt:z},B.data[0].id)}o>0&&await this.insertTransaction({date:c,type:"Echtgeld-Ausgleich (getilgt)",team:t,amount:-o,match_id:a,info:"Echtgeld-Ausgleich (getilgt)"})}static async deleteMatchTransactions(c){const a=await p.select("transactions","*",{eq:{match_id:c}});if(a.data)for(const t of a.data)await p.delete("transactions",t.id);await p.delete("matches",c)}static async decrementBansAfterMatch(){try{const c=await p.select("bans","*");if(!c.data)return;for(const a of c.data)if(a.matchesserved<a.totalgames){const t=a.matchesserved+1;await p.update("bans",{matchesserved:t},a.id)}}catch(c){console.warn("Failed to decrement bans:",c)}}}function G(){const{data:y}=q("players","*"),[c,a]=A.useState(!1),[t,n]=A.useState({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),[i,m]=A.useState(!1),h=(s,u,o)=>s.reduce((S,z)=>S+z.count,0)+o,f=s=>{n(u=>{const o={...u,...s};o.goalsa=h(o.goalslista,o.ownGoalsA,o.ownGoalsB),o.goalsb=h(o.goalslistb,o.ownGoalsB,o.ownGoalsA);const{prizeaek:x,prizereal:S}=D.calculatePrizeMoney(o.goalsa,o.goalsb,o.yellowa,o.reda,o.yellowb,o.redb);return o.prizeaek=x,o.prizereal=S,o})},r=(s,u)=>{f({[s]:u})},l=async s=>{s.preventDefault(),m(!0);try{const u=[],o=[],x=await D.submitMatch({date:t.date,teama:t.teama.trim(),teamb:t.teamb.trim(),goalsa:t.goalsa,goalsb:t.goalsb,goalslista:t.goalslista,goalslistb:t.goalslistb,ownGoalsA:t.ownGoalsA,ownGoalsB:t.ownGoalsB,yellowa:parseInt(t.yellowa)||0,reda:parseInt(t.reda)||0,yellowb:parseInt(t.yellowb)||0,redb:parseInt(t.redb)||0,manofthematch:t.manofthematch||null});n({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),a(!1),E.success(x.message)}catch(u){console.error("Match submission error:",u),E.error(u.message||"Fehler beim HinzufÃ¼gen des Spiels")}finally{m(!1)}},b=t.date,N=s=>y?y.filter(u=>u.team===s):[],j=()=>y?t.motmTeamFilter==="all"?y:y.filter(s=>s.team===t.motmTeamFilter):[],d=(s,u)=>{const o=s==="AEK"?"goalslista":"goalslistb";f({[o]:t[o].map(x=>x.player===u?{...x,count:x.count+1}:x).concat(t[o].find(x=>x.player===u)?[]:[{player:u,count:1}])})},v=(s,u)=>{const o=s==="AEK"?"goalslista":"goalslistb";f({[o]:t[o].map(x=>x.player===u?{...x,count:Math.max(0,x.count-1)}:x).filter(x=>x.count>0)})},g=(s,u)=>{const o=s==="AEK"?"ownGoalsA":"ownGoalsB",x=Math.max(0,t[o]+u);f({[o]:x})},w=(s,u)=>{if(!u)return;const o=s==="AEK"?"goalslista":"goalslistb",x=t[o].find(S=>S.player===u);f(x?{[o]:t[o].map(S=>S.player===u?{...S,count:S.count+1}:S)}:{[o]:[...t[o],{player:u,count:1}]})},T=(s,u)=>{const o=s==="AEK"?"goalslista":"goalslistb";f({[o]:t[o].filter(x=>x.player!==u)})};return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neues Spiel hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"FÃ¼gen Sie ein neues Spiel zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"âš½"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Spiel hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um ein neues Spiel zu erfassen."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neues Spiel erfassen"]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-2 sm:p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg w-full max-w-lg modal-content",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neues Spiel"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:i,children:"Ã—"})]}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"âš½ Spielpaarung"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-medium",children:"AEK Athen"}),e.jsx("div",{className:"text-gray-500 font-bold text-xl",children:"vs"}),e.jsx("div",{className:"bg-red-100 text-red-800 px-4 py-2 rounded-lg font-medium",children:"Real Madrid"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:t.date,onChange:s=>r("date",s.target.value),className:"form-input",required:!0,disabled:i})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"âš½ Live Torwertung"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-700",children:[t.goalsa," : ",t.goalsb]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["AEK Athen ",t.goalsa," - ",t.goalsb," Real Madrid"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-blue-600 mb-3",children:"âš½ AEK Athen TorschÃ¼tzen"})}),e.jsx("div",{className:"space-y-2",children:t.goalslista.map((s,u)=>e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:s.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.count," Tor",s.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>v("AEK",s.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:i,children:"âˆ’"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:s.count}),e.jsx("button",{type:"button",onClick:()=>d("AEK",s.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:i,children:"+"}),e.jsx("button",{type:"button",onClick:()=>T("AEK",s.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:i,title:"TorschÃ¼tze entfernen",children:"âœ•"})]})]},`aek-${s.player}-${u}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:s=>{s.target.value&&(w("AEK",s.target.value),s.target.value="")},className:"w-full form-input bg-blue-100 border-blue-300 text-blue-800",disabled:i,children:[e.jsx("option",{value:"",children:"+ TorschÃ¼tze hinzufÃ¼gen"}),N("AEK").map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.position,")"]},s.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"ZÃ¤hlen fÃ¼r Real Madrid"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>g("AEK",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:i||t.ownGoalsA===0,children:"âˆ’"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:t.ownGoalsA}),e.jsx("button",{type:"button",onClick:()=>g("AEK",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:i,children:"+"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-red-600 mb-3",children:"âš½ Real Madrid TorschÃ¼tzen"})}),e.jsx("div",{className:"space-y-2",children:t.goalslistb.map((s,u)=>e.jsxs("div",{className:"flex items-center justify-between bg-red-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:s.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.count," Tor",s.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>v("Real",s.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:i,children:"âˆ’"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:s.count}),e.jsx("button",{type:"button",onClick:()=>d("Real",s.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:i,children:"+"}),e.jsx("button",{type:"button",onClick:()=>T("Real",s.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:i,title:"TorschÃ¼tze entfernen",children:"âœ•"})]})]},`real-${s.player}-${u}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:s=>{s.target.value&&(w("Real",s.target.value),s.target.value="")},className:"w-full form-input bg-red-100 border-red-300 text-red-800",disabled:i,children:[e.jsx("option",{value:"",children:"+ TorschÃ¼tze hinzufÃ¼gen"}),N("Real").map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.position,")"]},s.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"ZÃ¤hlen fÃ¼r AEK Athen"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>g("Real",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:i||t.ownGoalsB===0,children:"âˆ’"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:t.ownGoalsB}),e.jsx("button",{type:"button",onClick:()=>g("Real",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:i,children:"+"})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"ðŸŸ¨ðŸŸ¥ Karten"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Heimteam"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"ðŸŸ¨ Gelbe Karten"}),e.jsx("input",{type:"number",min:"0",value:t.yellowa,onChange:s=>r("yellowa",s.target.value),className:"form-input",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"ðŸŸ¥ Rote Karten"}),e.jsx("input",{type:"number",min:"0",value:t.reda,onChange:s=>r("reda",s.target.value),className:"form-input",disabled:i})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Gastteam"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"ðŸŸ¨ Gelbe Karten"}),e.jsx("input",{type:"number",min:"0",value:t.yellowb,onChange:s=>r("yellowb",s.target.value),className:"form-input",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"ðŸŸ¥ Rote Karten"}),e.jsx("input",{type:"number",min:"0",value:t.redb,onChange:s=>r("redb",s.target.value),className:"form-input",disabled:i})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"â­ Spieler des Spiels"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-text-muted mb-2",children:"Team Filter:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>r("motmTeamFilter","all"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="all"?"bg-gray-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:i,children:"Alle"}),e.jsx("button",{type:"button",onClick:()=>r("motmTeamFilter","AEK"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="AEK"?"bg-blue-600 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,disabled:i,children:"AEK"}),e.jsx("button",{type:"button",onClick:()=>r("motmTeamFilter","Real"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="Real"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,disabled:i,children:"Real"})]})]}),e.jsxs("select",{value:t.manofthematch,onChange:s=>r("manofthematch",s.target.value),className:"form-input",disabled:i,children:[e.jsx("option",{value:"",children:"Keinen Spieler auswÃ¤hlen"}),j().map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.team," - ",s.position,")"]},s.id))]}),!y||y.length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler verfÃ¼gbar. Bitte fÃ¼gen Sie erst Spieler hinzu."})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"ðŸ’° Preisgelder (automatisch berechnet)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld AEK (â‚¬)"}),e.jsx("input",{type:"number",value:t.prizeaek,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld Real (â‚¬)"}),e.jsx("input",{type:"number",value:t.prizereal,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Basierend auf Ergebnis und Karten: Gewinner 1Mâ‚¬ - (Verlierer-Tore Ã— 50kâ‚¬) - (Karten Ã— 20kâ‚¬/50kâ‚¬)"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:i,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!b||i,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsx("div",{className:"mt-6 modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Nach dem HinzufÃ¼gen kÃ¶nnen Sie das Spiel in der Spiele-Ãœbersicht einsehen und bearbeiten."})]})]})})]})}function O(){const{data:y}=q("players","*"),[c,a]=A.useState(!1),[t,n]=A.useState(""),[i,m]=A.useState({player_id:"",type:"",reason:"",customDuration:1}),[h,f]=A.useState(!1),r=(d,v)=>{m(g=>({...g,[d]:v})),d==="team"&&m(g=>({...g,player_id:""}))},l=()=>!y||!t?[]:y.filter(d=>d.team===t),b=async d=>{var v;d.preventDefault(),f(!0);try{const g=y==null?void 0:y.find(x=>x.id===parseInt(i.player_id)),w=C.find(x=>x.value===i.type);if(!g)throw new Error("Spieler nicht gefunden");if(!w)throw new Error("Sperrart nicht gefunden");const s=(v=(await p.select("bans","*",{eq:{player_id:g.id}})).data)==null?void 0:v.find(x=>(x.matchesserved||0)<(x.totalgames||0));if(s)throw new Error(`Spieler "${g.name}" ist bereits gesperrt (${s.totalgames-s.matchesserved} Spiele verbleibend)`);const u=w.fixedDuration?w.duration:i.customDuration,o=await p.insert("bans",{player_id:g.id,team:g.team,type:w.value,totalgames:u,matchesserved:0,reason:i.reason||w.value});if(o.error)throw new Error(`Ban insert failed: ${o.error.message}`);m({player_id:"",type:"",reason:"",customDuration:1}),n(""),a(!1),E.success(`Sperre fÃ¼r "${g.name}" erfolgreich hinzugefÃ¼gt!`)}catch(g){console.error("Ban submission error:",g),E.error(g.message||"Fehler beim HinzufÃ¼gen der Sperre")}finally{f(!1)}},N=t&&i.player_id&&i.type,j=C.find(d=>d.value===i.type);return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Sperre hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erstellen Sie eine neue Spielersperre in der Datenbank."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸš«"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Sperre hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Spielersperre zu erfassen."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Sperre erfassen"]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Sperre"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:h,children:"Ã—"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:t,onChange:d=>{n(d.target.value),m(v=>({...v,player_id:""}))},className:"form-input",required:!0,disabled:h,children:[e.jsx("option",{value:"",children:"Team wÃ¤hlen"}),e.jsx("option",{value:"AEK",children:"ðŸ”µ AEK Athen"}),e.jsx("option",{value:"Real",children:"ðŸ”´ Real Madrid"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spieler *"}),e.jsxs("select",{value:i.player_id,onChange:d=>r("player_id",d.target.value),className:"form-input",required:!0,disabled:h||!t,children:[e.jsx("option",{value:"",children:t?"Spieler wÃ¤hlen":"Bitte zuerst Team wÃ¤hlen"}),l().map(d=>e.jsxs("option",{value:d.id,children:[d.name," (",d.position,")"]},d.id))]}),t&&l().length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler im gewÃ¤hlten Team verfÃ¼gbar."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Sperrart *"}),e.jsxs("select",{value:i.type,onChange:d=>r("type",d.target.value),className:"form-input",required:!0,disabled:h,children:[e.jsx("option",{value:"",children:"Sperrart wÃ¤hlen"}),C.map(d=>e.jsxs("option",{value:d.value,children:[d.icon," ",d.label,d.fixedDuration?` (${d.duration} Spiel${d.duration!==1?"e":""})`:` (1-${d.maxDuration} Spiele)`]},d.value))]})]}),j&&!j.fixedDuration&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Spiele *"}),e.jsx("select",{value:i.customDuration,onChange:d=>r("customDuration",parseInt(d.target.value)),className:"form-input",required:!0,disabled:h,children:Array.from({length:j.maxDuration},(d,v)=>v+1).map(d=>e.jsxs("option",{value:d,children:[d," Spiel",d!==1?"e":""]},d))}),e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["WÃ¤hlen Sie zwischen ",j.minDuration," und ",j.maxDuration," Spielen"]})]}),j&&j.fixedDuration&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"Gelb-Rote Karten haben immer eine feste Sperre von 1 Spiel."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"ZusÃ¤tzlicher Grund (optional)"}),e.jsx("input",{type:"text",value:i.reason,onChange:d=>r("reason",d.target.value),className:"form-input",placeholder:"Weitere Details zur Sperre...",disabled:h})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:h,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!N||h||!y||y.length===0,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:h?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"VerfÃ¼gbare Sperrarten"}),e.jsx("div",{className:"space-y-2",children:C.map(d=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:d.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:d.label})]}),e.jsx("span",{className:"text-sm text-text-muted",children:d.fixedDuration?`${d.duration} Spiel${d.duration!==1?"e":""} (fest)`:`1-${d.maxDuration} Spiele (variabel)`})]},d.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-yellow-50 border-yellow-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-yellow-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Nach dem HinzufÃ¼gen kÃ¶nnen Sie die Sperre in der Sperren-Ãœbersicht einsehen und verwalten."})]})]})})]})}const $=[{value:"TH",label:"Torwart (TH)"},{value:"IV",label:"Innenverteidiger (IV)"},{value:"AV",label:"AuÃŸenverteidiger (AV)"},{value:"ZM",label:"Zentrales Mittelfeld (ZM)"},{value:"OM",label:"Offensives Mittelfeld (OM)"},{value:"ST",label:"StÃ¼rmer (ST)"}],_=[{value:"AEK",label:"ðŸ”µ AEK Athen",color:"blue"},{value:"Real",label:"ðŸ”´ Real Madrid",color:"red"},{value:"Ehemalige",label:"Ehemalige",color:"gray"}];function V(){const[y,c]=A.useState(!1),[a,t]=A.useState({name:"",team:"",position:"",goals:0,value:0}),[n,i]=A.useState(!1),m=(r,l)=>{t(b=>({...b,[r]:l}))},h=async r=>{r.preventDefault(),i(!0);try{const l=await p.select("players","*",{eq:{name:a.name.trim(),team:a.team.trim()}});if(l.data&&l.data.length>0)throw new Error(`Spieler "${a.name}" existiert bereits im Team "${a.team}"`);const b=await p.insert("players",{name:a.name.trim(),team:a.team.trim(),position:a.position.trim().toUpperCase(),goals:parseInt(a.goals)||0,value:parseFloat(a.value)||0});if(b.error)throw new Error(`Player insert failed: ${b.error.message}`);t({name:"",team:"",position:"",goals:0,value:0}),c(!1),E.success(`Spieler "${a.name}" erfolgreich hinzugefÃ¼gt!`)}catch(l){console.error("Player submission error:",l),E.error(l.message||"Fehler beim HinzufÃ¼gen des Spielers")}finally{i(!1)}},f=a.name&&a.team&&a.position&&a.value!=="";return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neuen Spieler hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"FÃ¼gen Sie einen neuen Spieler zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ‘¤"}),e.jsxs("h4",{className:"text-lg font-medium text-text-primary mb-2",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"}),"Spieler hinzufÃ¼gen"]}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um einen neuen Spieler zu erfassen."}),e.jsxs("button",{onClick:()=>c(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neuen Spieler erfassen"]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neuer Spieler"}),e.jsx("button",{onClick:()=>c(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:n,children:"Ã—"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spielername *"}),e.jsx("input",{type:"text",value:a.name,onChange:r=>m("name",r.target.value),className:"form-input",placeholder:"z.B. Max Mustermann",required:!0,disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:a.team,onChange:r=>m("team",r.target.value),className:"form-input",required:!0,disabled:n,children:[e.jsx("option",{value:"",children:"Team wÃ¤hlen"}),_.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Position *"}),e.jsxs("select",{value:a.position,onChange:r=>m("position",r.target.value),className:"form-input",required:!0,disabled:n,children:[e.jsx("option",{value:"",children:"Position wÃ¤hlen"}),$.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Marktwert (Millionen â‚¬) *"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:a.value,onChange:r=>m("value",r.target.value),className:"form-input",placeholder:"0.0",disabled:n}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Marktwert in Millionen Euro (z.B. 1.5 fÃ¼r 1.5M â‚¬)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Tore"}),e.jsx("input",{type:"number",min:"0",value:a.goals,onChange:r=>m("goals",r.target.value),className:"form-input",placeholder:"0",disabled:n})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:n,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!f||n,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"VerfÃ¼gbare Teams"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:_.map(r=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsxs("span",{className:`font-medium ${r.color==="blue"?"text-blue-600":r.color==="red"?"text-red-600":"text-gray-600"}`,children:[r.color==="blue"?"ðŸ”µ":r.color==="red"?"ðŸ”´":"âš«"," ",r.label]}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",r.value,")"]})]},r.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"VerfÃ¼gbare Positionen"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:$.map(r=>e.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:e.jsx("span",{className:"font-medium text-text-primary text-sm",children:r.label})},r.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-green-50 border-green-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-green-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-green-700 text-sm",children:"Nach dem HinzufÃ¼gen kÃ¶nnen Sie den Spieler in der Kader-Ãœbersicht einsehen und verwalten."})]})]})})]})}const P=[{value:"Preisgeld",label:"Preisgeld",icon:"ðŸ†"},{value:"Strafe",label:"Strafe",icon:"ðŸ“‰"},{value:"Spielerkauf",label:"Spielerkauf",icon:"ðŸ‘¤"},{value:"Spielerverkauf",label:"Spielerverkauf",icon:"ðŸ’°"},{value:"Echtgeld-Ausgleich",label:"Echtgeld-Ausgleich",icon:"ðŸ’³"},{value:"SdS Bonus",label:"Spieler des Spiels Bonus",icon:"â­"},{value:"Sonstiges",label:"Sonstiges",icon:"ðŸ“ˆ"}],I=[{value:"AEK",label:"ðŸ”µ AEK Athen",color:"blue"},{value:"Real",label:"ðŸ”´ Real Madrid",color:"red"}];function H(){const[y,c]=A.useState(!1),[a,t]=A.useState({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),[n,i]=A.useState(!1),m=(l,b)=>{t(N=>({...N,[l]:b}))},h=async l=>{l.preventDefault(),i(!0);try{const b=parseFloat(a.amount),N=await p.insert("transactions",{date:a.date,type:a.type.trim(),team:a.team.trim(),amount:b,info:a.info.trim(),match_id:null});if(N.error)throw new Error(`Transaction insert failed: ${N.error.message}`);await f(a.team.trim(),a.type.trim(),b),t({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),c(!1),E.success("Transaktion erfolgreich hinzugefÃ¼gt!")}catch(b){console.error("Transaction submission error:",b),E.error(b.message||"Fehler beim HinzufÃ¼gen der Transaktion")}finally{i(!1)}},f=async(l,b,N)=>{try{const j=await p.select("finances","*",{eq:{team:l}});let d=j.data&&j.data.length>0?j.data[0]:{team:l,balance:0,debt:0},v={};if(b==="Echtgeld-Ausgleich")v.debt=(d.debt||0)+N;else{let g=(d.balance||0)+N;g<0&&(g=0),v.balance=g}d.id?await p.update("finances",v,d.id):await p.insert("finances",{team:l,balance:v.balance||0,debt:v.debt||0})}catch(j){console.warn("Failed to update finances:",j)}},r=a.team&&a.type&&a.amount&&a.date;return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Transaktion hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erfassen Sie eine neue finanzielle Transaktion."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ’°"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Transaktion hinzufÃ¼gen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Transaktion zu erfassen."}),e.jsxs("button",{onClick:()=>c(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Transaktion erfassen"]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Transaktion"}),e.jsx("button",{onClick:()=>c(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:n,children:"Ã—"})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:a.team,onChange:l=>m("team",l.target.value),className:"form-input",required:!0,disabled:n,children:[e.jsx("option",{value:"",children:"Team wÃ¤hlen"}),I.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Transaktionsart *"}),e.jsxs("select",{value:a.type,onChange:l=>m("type",l.target.value),className:"form-input",required:!0,disabled:n,children:[e.jsx("option",{value:"",children:"Typ wÃ¤hlen"}),P.map(l=>e.jsxs("option",{value:l.value,children:[l.icon," ",l.label]},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Betrag (â‚¬) *"}),e.jsx("input",{type:"number",step:"0.01",value:a.amount,onChange:l=>m("amount",l.target.value),className:"form-input",placeholder:"0.00",required:!0,disabled:n}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Negative Werte fÃ¼r Ausgaben, positive fÃ¼r Einnahmen"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Beschreibung"}),e.jsx("input",{type:"text",value:a.info,onChange:l=>m("info",l.target.value),className:"form-input",placeholder:"ZusÃ¤tzliche Informationen...",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:a.date,onChange:l=>m("date",l.target.value),className:"form-input",required:!0,disabled:n})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:n,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!r||n,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Transaktionsarten"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:P.map(l=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:l.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:l.label})]},l.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"VerfÃ¼gbare Teams"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:I.map(l=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsxs("span",{className:`font-medium ${l.color==="blue"?"text-blue-600":"text-red-600"}`,children:[l.color==="blue"?"ðŸ”µ":"ðŸ”´"," ",l.label]}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",l.value,")"]})]},l.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Nach dem HinzufÃ¼gen kÃ¶nnen Sie die Transaktion in der Finanzen-Ãœbersicht einsehen."})]})]})})]})}function Y(){const[y,c]=A.useState("matches"),a=[{id:"matches",label:"Spiele hinzufÃ¼gen",icon:"fas fa-futbol"},{id:"bans",label:"Sperren hinzufÃ¼gen",icon:"fas fa-ban"},{id:"players",label:"Spieler hinzufÃ¼gen",icon:"ðŸ‘¥"},{id:"transactions",label:"Transaktionen hinzufÃ¼gen",icon:"fas fa-euro-sign"}],t=()=>{switch(y){case"matches":return e.jsx(G,{});case"bans":return e.jsx(O,{});case"players":return e.jsx(V,{});case"transactions":return e.jsx(H,{});default:return e.jsx(G,{})}};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 bg-bg-secondary border-b border-border-light",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-1",children:"Verwaltung"}),e.jsx("p",{className:"text-text-muted text-sm",children:"HinzufÃ¼gen und verwalten von Daten"})]}),e.jsx("div",{className:"bg-bg-secondary border-b border-border-light",children:e.jsx("div",{className:"flex overflow-x-auto",children:a.map(n=>e.jsxs("button",{onClick:()=>c(n.id),className:`flex-shrink-0 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${y===n.id?"text-primary-green border-b-2 border-primary-green bg-bg-primary":"text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[e.jsx("i",{className:`${n.icon} mr-2`}),n.label]},n.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:t()})]})}export{Y as default};
