import{r as v,j as e,L as y}from"./index-CPST1fCd.js";import{u as x}from"./useSupabase-u2p2nmtx.js";function T(){const[s,o]=v.useState("AEK"),{data:i,loading:h}=x("finances","*"),{data:c,loading:u}=x("transactions","*",{order:{column:"id",ascending:!1},limit:20}),b=h||u,n=t=>i?i.find(l=>l.team===t)||{balance:0}:{balance:0},j=t=>c?c.filter(l=>l.team===t):[],a=t=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(t),g=t=>{switch(t){case"Einnahme":case"einnahme":return"text-primary-green";case"Ausgabe":case"ausgabe":return"text-accent-red";default:return"text-text-primary"}},p=t=>{switch(t){case"Einnahme":case"einnahme":return"ðŸ“ˆ";case"Ausgabe":case"ausgabe":return"ðŸ“‰";default:return"ðŸ’°"}};if(b)return e.jsx(y,{message:"Lade Finanzen..."});const d=n("AEK"),m=n("Real"),N=d.balance+m.balance,f=n(s),r=j(s);return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Finanzen"}),e.jsx("p",{className:"text-text-muted",children:"Team-Budgets und TransaktionsÃ¼bersicht"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"modern-card text-center border-l-4 border-blue-400",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("span",{className:"text-2xl mr-2",children:"ðŸ”µ"}),e.jsx("h3",{className:"font-semibold text-blue-600",children:"AEK Athen"})]}),e.jsx("div",{className:"text-2xl font-bold text-text-primary",children:a(d.balance)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Aktueller Kontostand"})]}),e.jsxs("div",{className:"modern-card text-center border-l-4 border-purple-400",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("span",{className:"text-2xl mr-2",children:"ðŸŸ£"}),e.jsx("h3",{className:"font-semibold text-purple-600",children:"Real Madrid"})]}),e.jsx("div",{className:"text-2xl font-bold text-text-primary",children:a(m.balance)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Aktueller Kontostand"})]}),e.jsxs("div",{className:"modern-card text-center border-l-4 border-primary-green",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx("span",{className:"text-2xl mr-2",children:"ðŸ’°"}),e.jsx("h3",{className:"font-semibold text-primary-green",children:"Gesamt"})]}),e.jsx("div",{className:"text-2xl font-bold text-text-primary",children:a(N)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamtkapital"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-3",children:"Transaktionen"}),e.jsx("div",{className:"flex gap-2 mb-4",children:["AEK","Real"].map(t=>e.jsx("button",{onClick:()=>o(t),className:`px-4 py-2 rounded-lg font-medium transition-all ${s===t?t==="AEK"?"bg-blue-600 text-white":"bg-purple-600 text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary border border-border-light"}`,children:t==="AEK"?"ðŸ”µ AEK Athen":"ðŸŸ£ Real Madrid"},t))})]}),e.jsxs("div",{className:"modern-card mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-semibold text-text-primary",children:[s==="AEK"?"ðŸ”µ AEK Athen":"ðŸŸ£ Real Madrid"," - Details"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-text-primary",children:a(f.balance)}),e.jsx("div",{className:"text-sm text-text-muted",children:"Aktueller Kontostand"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-primary-green/10 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-primary-green",children:r.filter(t=>t.art==="Einnahme"||t.art==="einnahme").length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Einnahmen"})]}),e.jsxs("div",{className:"text-center p-3 bg-accent-red/10 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-accent-red",children:r.filter(t=>t.art==="Ausgabe"||t.art==="ausgabe").length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Ausgaben"})]})]})]}),r.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-text-primary",children:["Letzte Transaktionen - ",s==="AEK"?"AEK Athen":"Real Madrid"]}),r.map(t=>e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-xl",children:p(t.art)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h5",{className:"font-medium text-text-primary",children:t.beschreibung||"Transaktion"}),e.jsx("span",{className:`text-sm font-medium ${t.art==="Einnahme"||t.art==="einnahme"?"text-primary-green":"text-accent-red"}`,children:t.art})]}),t.datum&&e.jsx("p",{className:"text-xs text-text-muted",children:new Date(t.datum).toLocaleDateString("de-DE")})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:`text-lg font-bold ${g(t.art)}`,children:[t.art==="Ausgabe"||t.art==="ausgabe"?"-":"+",a(Math.abs(t.betrag||0))]})})]})},t.id))]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ’°"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Keine Transaktionen"}),e.jsxs("p",{className:"text-text-muted",children:["FÃ¼r ",s==="AEK"?"AEK Athen":"Real Madrid"," wurden noch keine Transaktionen erfasst."]})]}),e.jsx("div",{className:"mt-6 modern-card bg-purple-50 border-purple-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-purple-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-purple-700 text-sm",children:"Um neue Transaktionen hinzuzufÃ¼gen, nutzen Sie den Verwaltungsbereich."})]})]})})]})}export{T as default};
