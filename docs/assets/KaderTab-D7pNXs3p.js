import{r as A,j as e,L as P,P as w}from"./index-Cyu-QkLb.js";import{u as C,a as V}from"./useSupabase-UlJNLpe-.js";function O(){const[i,h]=A.useState(null),{data:r,loading:p,error:g,refetch:c}=C("players","*"),{update:b,remove:f}=V("players"),u={TH:0,IV:1,LV:2,RV:3,ZDM:4,ZM:5,ZOM:6,LM:7,RM:8,LF:9,RF:10,ST:11},j=s=>s==="TH"?"inline-block px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800 border border-green-200":["IV","LV","RV","ZDM"].includes(s)?"inline-block px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200":["ZM","ZOM","LM","RM"].includes(s)?"inline-block px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200":["LF","RF","ST"].includes(s)?"inline-block px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 border border-red-200":"inline-block px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200",a=s=>r?r.filter(t=>t.team===s).sort((t,n)=>(u[t.position]||99)-(u[n.position]||99)):[],d=s=>r?r.filter(t=>t.team===s).reduce((t,n)=>t+(n.value||0),0):0,o=s=>`${(s||0).toFixed(1)}M €`,N=s=>{const t="modern-card";return s==="AEK"?`${t} border-l-4 border-blue-400`:s==="Real"?`${t} border-l-4 border-red-400`:s==="Ehemalige"?`${t} border-l-4 border-slate-400`:t},v=()=>{if(!r||r.length===0){alert("Keine Spieler für Report verfügbar");return}const s=r.map(t=>`${t.name} (${t.team}): ${t.goals||0} Tore, ${t.position||"Unbekannt"}, Wert: ${o(t.value||0)}`).join(`
`);alert(`📊 Spieler-Report:

${s}`)},y=()=>{const s=a("AEK").length,t=a("Real").length,n=Math.abs(s-t);if(n<=1)alert("✅ Teams sind bereits ausgeglichen!");else{const l=s>t?"Real Madrid":"AEK Athen";alert(`⚖️ Team-Balance:
${l} benötigt ${n} weitere Spieler für ausgeglichene Teams.`)}},S=()=>{if(!r||r.length<4){alert("🔄 Nicht genügend Spieler für Transfer-Analyse");return}const s=a("AEK"),t=a("Real"),n=[];if(s.length>t.length+2){const l=s.sort((x,m)=>(x.value||0)-(m.value||0))[0];n.push(`🔄 ${l.name} von AEK zu Real transferieren`)}else if(t.length>s.length+2){const l=t.sort((x,m)=>(x.value||0)-(m.value||0))[0];n.push(`🔄 ${l.name} von Real zu AEK transferieren`)}n.length===0&&n.push("✅ Teams sind gut ausbalanciert - keine Transfers nötig"),alert(`🔄 Transfer-Empfehlungen:

${n.join(`
`)}`)},R=s=>s==="AEK"?"text-blue-600":s==="Real"?"text-red-600":s==="Ehemalige"?"text-slate-600":"text-gray-600",T=async s=>{const t=prompt("Spielername:",s.name);if(!(!t||t===s.name))try{await b({name:t},s.id),c()}catch(n){alert("Fehler beim Aktualisieren des Spielers: "+n.message)}},k=async s=>{if(confirm(`Sind Sie sicher, dass Sie ${s.name} löschen möchten?`))try{await f(s.id),c()}catch(t){alert("Fehler beim Löschen des Spielers: "+t.message)}};if(p)return e.jsx(P,{message:"Lade Kader..."});if(g)return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-accent-red mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-2xl"})}),e.jsx("p",{className:"text-text-muted mb-4",children:"Fehler beim Laden des Kaders"}),e.jsx("button",{onClick:c,className:"btn-primary",children:"Erneut versuchen"})]});const E=a("AEK"),K=a("Real"),$=a("Ehemalige"),M=[{id:"aek",name:"AEK",displayName:"AEK Athen",players:E,squadValue:d("AEK"),icon:"🔵"},{id:"real",name:"Real",displayName:"Real Madrid",players:K,squadValue:d("Real"),icon:"🔴"},{id:"ehemalige",name:"Ehemalige",displayName:"Ehemalige",players:$,squadValue:d("Ehemalige"),icon:"⚪"}];return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Kader-Übersicht"}),e.jsxs("p",{className:"text-text-muted",children:[(r==null?void 0:r.length)||0," Spieler insgesamt"]})]}),e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"⚡ Schnell-Aktionen"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:v,className:"flex items-center justify-center space-x-2 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx("span",{children:"📊"}),e.jsx("span",{children:"Spieler-Report"})]}),e.jsxs("button",{onClick:y,className:"flex items-center justify-center space-x-2 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx("span",{children:"⚖️"}),e.jsx("span",{children:"Teams ausgleichen"})]}),e.jsxs("button",{onClick:S,className:"flex items-center justify-center space-x-2 bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors",children:[e.jsx("span",{children:"🔄"}),e.jsx("span",{children:"Transfer-Tipps"})]})]})]}),e.jsx("div",{className:"space-y-4",children:M.map(s=>e.jsxs("div",{className:N(s.name),children:[e.jsx("button",{onClick:()=>h(i===s.id?null:s.id),className:"w-full text-left p-4 focus:outline-none",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:s.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold text-lg ${R(s.name)}`,children:s.displayName}),e.jsxs("p",{className:"text-sm text-text-muted",children:[s.players.length," Spieler",s.squadValue>0&&e.jsxs("span",{className:"ml-2",children:["• Kaderwert: ",o(s.squadValue)]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-text-muted",children:s.players.length}),e.jsx("i",{className:`fas fa-chevron-${i===s.id?"up":"down"} transition-transform`})]})]})}),i===s.id&&e.jsx("div",{className:"px-4 pb-4 border-t border-border-light mt-4 pt-4",children:s.players.length>0?e.jsx("div",{className:"grid gap-3",children:s.players.map(t=>e.jsx("div",{className:"bg-bg-tertiary rounded-lg p-3 hover:bg-bg-secondary transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:j(t.position),children:t.position}),t.staerke&&e.jsxs("span",{className:"text-xs text-text-muted",children:["Stärke: ",t.staerke]}),t.value&&e.jsx("span",{className:"text-xs text-primary-green font-medium",children:o(t.value)})]})]})})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>T(t),className:"text-text-muted hover:text-primary-green transition-colors p-1",title:"Bearbeiten",children:e.jsx("i",{className:"fas fa-edit text-sm"})}),e.jsx("button",{onClick:()=>k(t),className:"text-text-muted hover:text-accent-red transition-colors p-1",title:"Löschen",children:e.jsx("i",{className:"fas fa-trash text-sm"})})]})]})},t.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-2",children:s.icon}),e.jsxs("p",{className:"text-text-muted",children:["Keine Spieler in ",s.displayName]})]})})]},s.id))}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:(r==null?void 0:r.length)||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Spieler"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:w.length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Positionen"})]})]})]})}export{O as default};
