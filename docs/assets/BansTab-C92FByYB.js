import{r as o,u as h,j as e,L as y}from"./index-lki5-J2S.js";import{E as S}from"./EnhancedSearch-DOnn1YU2.js";import{B as d,g as k,a as B}from"./banTypes-DuNOJEIt.js";function F({onNavigate:A}){const[a,p]=o.useState("all"),[i,u]=o.useState([]),{data:r,loading:g}=h("bans","*"),{data:n,loading:v}=h("players","*"),j=g||v,f=t=>{if(!n)return"Unbekannt";const s=n.find(l=>l.id===t);return(s==null?void 0:s.name)||"Unbekannt"},N=t=>{if(!n)return"Unbekannt";const s=n.find(l=>l.id===t);return(s==null?void 0:s.team)||"Unbekannt"},c=(i.length>0?i:r||[]).filter(s=>a==="all"?!0:a==="active"?s.totalgames-s.matchesserved>0:a==="completed"?s.totalgames-s.matchesserved===0:s.type===a),m=(r==null?void 0:r.filter(t=>t.totalgames-t.matchesserved>0))||[],x=(r==null?void 0:r.filter(t=>t.totalgames-t.matchesserved===0))||[];return j?e.jsx(y,{message:"Lade Sperren..."}):e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"Sperren-Ãœbersicht"}),e.jsx(S,{data:r||[],searchFields:["player_name","type","reason","totalgames","matchesserved"],filterOptions:[{key:"status",label:"Status",options:[{value:"active",label:"Aktiv"},{value:"completed",label:"Beendet"}],filterFn:(t,s)=>{const l=(t.totalgames||0)-(t.matchesserved||0);return s==="active"?l>0:s==="completed"?l===0:!0}},{key:"type",label:"Art der Sperre",options:d.map(t=>({value:t.value,label:t.label}))},{key:"team",label:"Team",options:[{value:"AEK",label:"AEK"},{value:"Real",label:"Real"}],filterFn:(t,s)=>{const l=n==null?void 0:n.find(b=>b.id===t.player_id);return(l==null?void 0:l.team)===s}}],onResults:u,placeholder:"Sperren durchsuchen..."}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{key:"all",label:"Alle",count:(r==null?void 0:r.length)||0},{key:"active",label:"Aktiv",count:m.length},{key:"completed",label:"Beendet",count:x.length},...d.map(t=>({key:t.value,label:t.label,count:(r==null?void 0:r.filter(s=>s.type===t.value).length)||0}))].map(t=>e.jsxs("button",{onClick:()=>p(t.key),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${a===t.key?"bg-primary-green text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary border border-border-light"}`,children:[t.label," (",t.count,")"]},t.key))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-red",children:m.length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Aktive Sperren"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:x.length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Beendete Sperren"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:(r==null?void 0:r.length)||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Sperren"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-blue",children:d.length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Sperr-Arten"})]})]}),c.length>0?e.jsx("div",{className:"space-y-4",children:c.map(t=>e.jsx("div",{className:"modern-card",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"text-2xl",children:k(t.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-text-primary",children:f(t.player_id)}),e.jsxs("span",{className:"text-sm text-text-muted",children:["(",N(t.player_id),")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium border ${B(t.type)}`,children:t.type}),e.jsxs("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200",children:["Gesamt: ",t.totalgames||0," Spiele"]}),t.totalgames-t.matchesserved>0?e.jsxs("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 border border-red-200",children:["Verbleibend: ",t.totalgames-t.matchesserved," Spiel",t.totalgames-t.matchesserved!==1?"e":""]}):e.jsx("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:"Beendet"})]}),t.reason&&e.jsx("p",{className:"text-sm text-text-muted",children:t.reason})]})]})})},t.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸš«"}),e.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:a==="all"?"Keine Sperren gefunden":`Keine ${a==="active"?"aktiven":a==="completed"?"beendeten":a} Sperren`}),e.jsx("p",{className:"text-text-muted",children:a==="all"?"Es wurden noch keine Sperren erstellt.":"Versuche einen anderen Filter oder erstelle neue Sperren."})]}),e.jsx("div",{className:"mt-6 modern-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-red-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-red-700 text-sm",children:"Um neue Sperren hinzuzufÃ¼gen oder zu verwalten, nutzen Sie den Verwaltungsbereich."})]})]})})]})}export{F as default};
