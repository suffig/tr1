import{j as e,L as b}from"./index-DMFQIllG.js";import{u as j,a as N}from"./useSupabase-D--VuRvA.js";function S(){const{data:a,loading:l,error:c,refetch:i}=j("matches","*",{order:{column:"datum",ascending:!1},limit:50}),{insert:m,update:d,remove:o}=N("matches"),x=async()=>{const t=prompt("Heimteam:");if(!t)return;const s=prompt("Gastteam:");if(!s)return;const r=prompt("Datum (YYYY-MM-DD):",new Date().toISOString().split("T")[0]);if(!r)return;const n=prompt("Tore Heimteam:","0"),h=prompt("Tore Gastteam:","0");try{await m({team1:t.trim(),team2:s.trim(),datum:r,tore1:parseInt(n)||0,tore2:parseInt(h)||0,status:"finished",beschreibung:""}),i()}catch(f){alert("Fehler beim Hinzufügen des Spiels: "+f.message)}},p=async t=>{const s=prompt("Tore "+t.team1+":",t.tore1.toString());if(s===null)return;const r=prompt("Tore "+t.team2+":",t.tore2.toString());if(r!==null)try{await d({tore1:parseInt(s)||0,tore2:parseInt(r)||0},t.id),i()}catch(n){alert("Fehler beim Aktualisieren des Spiels: "+n.message)}},u=async t=>{if(confirm(`Sind Sie sicher, dass Sie das Spiel ${t.team1} vs ${t.team2} löschen möchten?`))try{await o(t.id),i()}catch(s){alert("Fehler beim Löschen des Spiels: "+s.message)}};return l?e.jsx(b,{message:"Lade Spiele..."}):c?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-accent-red mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-2xl"})}),e.jsx("p",{className:"text-text-muted mb-4",children:"Fehler beim Laden der Spiele"}),e.jsx("button",{onClick:i,className:"btn-primary",children:"Erneut versuchen"})]}):e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Spiele"}),e.jsxs("button",{onClick:x,className:"btn-primary text-sm",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neues Spiel"]})]}),e.jsxs("p",{className:"text-text-muted",children:[(a==null?void 0:a.length)||0," Spiele gefunden"]})]}),a&&a.length>0?e.jsx("div",{className:"space-y-4",children:a.map(t=>e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-text-primary",children:[t.team1," vs ",t.team2]}),e.jsx("p",{className:"text-sm text-text-muted",children:new Date(t.datum).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-text-primary",children:[t.tore1," : ",t.tore2]}),t.status&&e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${t.status==="finished"?"bg-primary-green/10 text-primary-green":"bg-accent-orange/10 text-accent-orange"}`,children:t.status==="finished"?"Beendet":"Laufend"})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("button",{onClick:()=>p(t),className:"text-text-muted hover:text-primary-green transition-colors p-1",title:"Bearbeiten",children:e.jsx("i",{className:"fas fa-edit text-sm"})}),e.jsx("button",{onClick:()=>u(t),className:"text-text-muted hover:text-accent-red transition-colors p-1",title:"Löschen",children:e.jsx("i",{className:"fas fa-trash text-sm"})})]})]})]}),t.beschreibung&&e.jsx("p",{className:"text-sm text-text-muted border-t pt-3 mt-3",children:t.beschreibung})]},t.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-text-muted mb-4",children:e.jsx("i",{className:"fas fa-futbol text-4xl opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Keine Spiele gefunden"}),e.jsx("p",{className:"text-text-muted",children:"Es wurden noch keine Spiele hinzugefügt."})]})]})}export{S as default};
