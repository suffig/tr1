import{r as v,j as e,L as N}from"./index-Cen6uZUL.js";import{u as m}from"./useSupabase-VXxsY6GG.js";import{B as x,g as f,a as y}from"./banTypes-DuNOJEIt.js";function B(){const[r,o]=v.useState("all"),{data:s,loading:h}=m("bans","*"),{data:a,loading:p}=m("players","*"),g=h||p,u=t=>{if(!a)return"Unbekannt";const l=a.find(d=>d.id===t);return(l==null?void 0:l.name)||"Unbekannt"},j=t=>{if(!a)return"Unbekannt";const l=a.find(d=>d.id===t);return(l==null?void 0:l.team)||"Unbekannt"},n=(s==null?void 0:s.filter(t=>r==="all"?!0:r==="active"?t.totalgames-t.matchesserved>0:r==="completed"?t.totalgames-t.matchesserved===0:t.type===r))||[],i=(s==null?void 0:s.filter(t=>t.totalgames-t.matchesserved>0))||[],c=(s==null?void 0:s.filter(t=>t.totalgames-t.matchesserved===0))||[];return g?e.jsx(N,{message:"Lade Sperren..."}):e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"Sperren-Ãœbersicht"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[{key:"all",label:"Alle",count:(s==null?void 0:s.length)||0},{key:"active",label:"Aktiv",count:i.length},{key:"completed",label:"Beendet",count:c.length},...x.map(t=>({key:t.value,label:t.label,count:(s==null?void 0:s.filter(l=>l.type===t.value).length)||0}))].map(t=>e.jsxs("button",{onClick:()=>o(t.key),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${r===t.key?"bg-primary-green text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary border border-border-light"}`,children:[t.label," (",t.count,")"]},t.key))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-red",children:i.length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Aktive Sperren"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:c.length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Beendete Sperren"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:(s==null?void 0:s.length)||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Sperren"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-blue",children:x.length}),e.jsx("div",{className:"text-sm text-text-muted",children:"Sperr-Arten"})]})]}),n.length>0?e.jsx("div",{className:"space-y-4",children:n.map(t=>e.jsx("div",{className:"modern-card",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"text-2xl",children:f(t.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-text-primary",children:u(t.player_id)}),e.jsxs("span",{className:"text-sm text-text-muted",children:["(",j(t.player_id),")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium border ${y(t.type)}`,children:t.type}),e.jsxs("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200",children:["Gesamt: ",t.totalgames||0," Spiele"]}),t.totalgames-t.matchesserved>0?e.jsxs("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 border border-red-200",children:["Verbleibend: ",t.totalgames-t.matchesserved," Spiel",t.totalgames-t.matchesserved!==1?"e":""]}):e.jsx("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:"Beendet"})]}),t.reason&&e.jsx("p",{className:"text-sm text-text-muted",children:t.reason})]})]})})},t.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸš«"}),e.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:r==="all"?"Keine Sperren gefunden":`Keine ${r==="active"?"aktiven":r==="completed"?"beendeten":r} Sperren`}),e.jsx("p",{className:"text-text-muted",children:r==="all"?"Es wurden noch keine Sperren erstellt.":"Versuche einen anderen Filter oder erstelle neue Sperren."})]}),e.jsx("div",{className:"mt-6 modern-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-red-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-red-700 text-sm",children:"Um neue Sperren hinzuzufÃ¼gen oder zu verwalten, nutzen Sie den Verwaltungsbereich."})]})]})})]})}export{B as default};
