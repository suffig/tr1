import{r as w,j as e,L as k}from"./index-DtihSai0.js";import{u as p}from"./useSupabase-BLpODbY0.js";function K(){const[x,h]=w.useState(new Set),{data:n,loading:u,error:b,refetch:g}=p("matches","*",{order:{column:"date",ascending:!1},limit:50}),{data:m,loading:j}=p("players","*"),N=u||j,f=t=>{const a=new Set(x);a.has(t)?a.delete(t):a.add(t),h(a)},y=()=>{if(!n)return[];const t={};return n.forEach(a=>{const r=a.date;t[r]||(t[r]=[]),t[r].push(a)}),Object.keys(t).sort((a,r)=>new Date(r)-new Date(a)).map(a=>({date:a,matches:t[a].sort((r,s)=>s.id-r.id)}))},v=t=>{const a=[{container:"border-blue-400 bg-blue-50 dark:bg-blue-900",header:"text-blue-800 dark:text-blue-100",accent:"blue-500"},{container:"border-green-500 bg-green-50 dark:bg-green-900",header:"text-green-800 dark:text-green-100",accent:"green-500"},{container:"border-purple-500 bg-purple-50 dark:bg-purple-900",header:"text-purple-800 dark:text-purple-100",accent:"purple-500"},{container:"border-red-500 bg-red-50 dark:bg-red-900",header:"text-red-800 dark:text-red-100",accent:"red-500"},{container:"border-yellow-500 bg-yellow-50 dark:bg-yellow-900",header:"text-yellow-800 dark:text-yellow-100",accent:"yellow-500"}];return a[t%a.length]},i=t=>{if(!m||!t)return"Unbekannt";const a=m.find(r=>r.id===t);return a?a.name:"Unbekannt"};if(N)return e.jsx(k,{message:"Lade Spiele..."});if(b)return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-accent-red mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-2xl"})}),e.jsx("p",{className:"text-text-muted mb-4",children:"Fehler beim Laden der Spiele"}),e.jsx("button",{onClick:g,className:"btn-primary",children:"Erneut versuchen"})]});const d=y();return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Spiele-√úbersicht"})}),e.jsxs("p",{className:"text-text-muted",children:[(n==null?void 0:n.length)||0," Spiele gefunden, gruppiert nach Datum"]})]}),d&&d.length>0?e.jsx("div",{className:"space-y-4",children:d.map((t,a)=>{const r=v(a);return e.jsxs("div",{className:`border-2 ${r.container} rounded-lg shadow-lg`,children:[e.jsx("div",{className:"p-4 border-b border-opacity-20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 bg-${r.accent} rounded-full mr-3 flex-shrink-0`}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-bold ${r.header}`,children:new Date(t.date).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsxs("p",{className:`text-sm opacity-75 ${r.header}`,children:[t.matches.length," Spiel",t.matches.length!==1?"e":""]})]})]}),e.jsx("div",{className:`text-xs bg-${r.accent} text-white px-3 py-1 rounded-full font-semibold`,children:"Spieltag"})]})}),e.jsx("div",{className:"p-4 space-y-3",children:t.matches.map(s=>{const o=x.has(s.id);return e.jsxs("div",{className:"bg-white bg-opacity-50 rounded-lg border border-white border-opacity-30",children:[e.jsxs("button",{onClick:()=>f(s.id),className:"w-full p-4 flex items-center justify-between cursor-pointer hover:bg-opacity-80 transition-all duration-200 rounded-lg",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-text-primary",children:[s.teama||"AEK"," ",s.goalsa||0," : ",s.goalsb||0," ",s.teamb||"Real"]}),s.status&&e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium mt-1 ${s.status==="finished"?"bg-primary-green/10 text-primary-green":"bg-accent-orange/10 text-accent-orange"}`,children:s.status==="finished"?"Beendet":"Laufend"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-text-muted",children:"Details"}),e.jsx("span",{className:`text-lg transition-transform duration-200 ${o?"rotate-90":""}`,children:"‚ñ∂"})]})]}),o&&e.jsx("div",{className:"px-4 pb-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-text-primary flex items-center",children:"‚öΩ Torsch√ºtzen"}),e.jsxs("div",{className:"space-y-1",children:[s.goalslista&&s.goalslista.length>0?e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"AEK:"}),s.goalslista.map((l,c)=>e.jsxs("p",{className:"text-sm text-text-muted",children:["‚Ä¢ ",typeof l=="string"?l:i(l.player)," ",l.minute&&`(${l.minute}')`]},c))]}):e.jsx("p",{className:"text-xs text-text-muted",children:"AEK: Keine Tore"}),s.goalslistb&&s.goalslistb.length>0?e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Real:"}),s.goalslistb.map((l,c)=>e.jsxs("p",{className:"text-sm text-text-muted",children:["‚Ä¢ ",typeof l=="string"?l:i(l.player)," ",l.minute&&`(${l.minute}')`]},c))]}):e.jsx("p",{className:"text-xs text-text-muted",children:"Real: Keine Tore"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-text-primary flex items-center",children:"üü®üü• Karten"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"AEK:"}),e.jsxs("p",{className:"text-sm text-text-muted",children:["üü® ",s.yellowa||0," Gelb"]}),e.jsxs("p",{className:"text-sm text-text-muted",children:["üü• ",s.reda||0," Rot"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Real:"}),e.jsxs("p",{className:"text-sm text-text-muted",children:["üü® ",s.yellowb||0," Gelb"]}),e.jsxs("p",{className:"text-sm text-text-muted",children:["üü• ",s.redb||0," Rot"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-text-primary flex items-center",children:"üí∞ Preisgelder"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-text-muted",children:[e.jsx("span",{className:"text-blue-600",children:"AEK:"})," ",s.prizeaek?`‚Ç¨${s.prizeaek}`:"‚Ç¨0"]}),e.jsxs("p",{className:"text-sm text-text-muted",children:[e.jsx("span",{className:"text-red-600",children:"Real:"})," ",s.prizereal?`‚Ç¨${s.prizereal}`:"‚Ç¨0"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold text-text-primary flex items-center",children:"‚≠ê Spieler des Spiels"}),e.jsx("p",{className:"text-sm text-text-muted",children:s.manofthematch?i(s.manofthematch):"Nicht vergeben"})]})]})})]},s.id)})})]},t.date)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-text-muted mb-4",children:e.jsx("i",{className:"fas fa-futbol text-4xl opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Keine Spiele gefunden"}),e.jsx("p",{className:"text-text-muted",children:"Es wurden noch keine Spiele hinzugef√ºgt."})]}),e.jsx("div",{className:"mt-6 modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Klicken Sie auf ein Spiel, um detaillierte Statistiken wie Torsch√ºtzen, Karten und Preisgelder anzuzeigen. Neue Spiele k√∂nnen im Verwaltungsbereich hinzugef√ºgt werden."})]})]})})]})}export{K as default};
