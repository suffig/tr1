import{r as o,j as e,L as S,z as n}from"./index-Rev3OGod.js";import{u as k,a as E}from"./useSupabase-CtffukN8.js";function w(){const[h,c]=o.useState(!1),[r,x]=o.useState(null),[s,a]=o.useState({datum:"",team1:"AEK",team2:"Real",tore1:0,tore2:0,status:"finished",beschreibung:""}),{data:i,loading:b,error:p,refetch:d}=k("matches","*",{order:{column:"datum",ascending:!1},limit:50}),{insert:f,update:g,remove:j,loading:l}=E("matches"),u=()=>{a({datum:"",team1:"AEK",team2:"Real",tore1:0,tore2:0,status:"finished",beschreibung:""}),x(null),c(!1)},N=async t=>{t.preventDefault();try{r?(await g(s,r.id),n.success("Spiel erfolgreich aktualisiert!")):(await f(s),n.success("Spiel erfolgreich hinzugefügt!")),u(),d()}catch(m){console.error("Error saving match:",m),n.error(`Fehler beim ${r?"Aktualisieren":"Hinzufügen"} des Spiels`)}},v=t=>{a({datum:t.datum,team1:t.team1,team2:t.team2,tore1:t.tore1,tore2:t.tore2,status:t.status||"finished",beschreibung:t.beschreibung||""}),x(t),c(!0)},y=async t=>{if(confirm("Sind Sie sicher, dass Sie dieses Spiel löschen möchten?"))try{await j(t),n.success("Spiel erfolgreich gelöscht!"),d()}catch(m){console.error("Error deleting match:",m),n.error("Fehler beim Löschen des Spiels")}};return b?e.jsx(S,{message:"Lade Spiele..."}):p?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-accent-red mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-2xl"})}),e.jsx("p",{className:"text-text-muted mb-4",children:"Fehler beim Laden der Spiele"}),e.jsx("button",{onClick:d,className:"btn-primary",children:"Erneut versuchen"})]}):e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Spiele"}),e.jsxs("p",{className:"text-text-muted",children:[(i==null?void 0:i.length)||0," Spiele gefunden"]})]}),e.jsxs("button",{onClick:()=>c(!0),className:"btn-primary flex items-center",disabled:l,children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neues Spiel"]})]}),h&&e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:r?"Spiel bearbeiten":"Neues Spiel hinzufügen"}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum"}),e.jsx("input",{type:"date",value:s.datum,onChange:t=>a({...s,datum:t.target.value}),className:"form-input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Status"}),e.jsxs("select",{value:s.status,onChange:t=>a({...s,status:t.target.value}),className:"form-input",children:[e.jsx("option",{value:"finished",children:"Beendet"}),e.jsx("option",{value:"running",children:"Laufend"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team 1"}),e.jsxs("select",{value:s.team1,onChange:t=>a({...s,team1:t.target.value}),className:"form-input",children:[e.jsx("option",{value:"AEK",children:"AEK"}),e.jsx("option",{value:"Real",children:"Real"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Tore Team 1"}),e.jsx("input",{type:"number",value:s.tore1,onChange:t=>a({...s,tore1:parseInt(t.target.value)||0}),className:"form-input",min:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team 2"}),e.jsxs("select",{value:s.team2,onChange:t=>a({...s,team2:t.target.value}),className:"form-input",children:[e.jsx("option",{value:"AEK",children:"AEK"}),e.jsx("option",{value:"Real",children:"Real"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Tore Team 2"}),e.jsx("input",{type:"number",value:s.tore2,onChange:t=>a({...s,tore2:parseInt(t.target.value)||0}),className:"form-input",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Beschreibung (optional)"}),e.jsx("textarea",{value:s.beschreibung,onChange:t=>a({...s,beschreibung:t.target.value}),className:"form-input",rows:"3",placeholder:"Zusätzliche Informationen zum Spiel..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:l,className:"btn-primary disabled:opacity-50",children:l?"Speichert...":r?"Aktualisieren":"Hinzufügen"}),e.jsx("button",{type:"button",onClick:u,className:"btn-secondary",children:"Abbrechen"})]})]})]}),i&&i.length>0?e.jsx("div",{className:"space-y-4",children:i.map(t=>e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-text-primary",children:[t.team1," vs ",t.team2]}),e.jsx("p",{className:"text-sm text-text-muted",children:new Date(t.datum).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-text-primary",children:[t.tore1," : ",t.tore2]}),t.status&&e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-medium ${t.status==="finished"?"bg-primary-green/10 text-primary-green":"bg-accent-orange/10 text-accent-orange"}`,children:t.status==="finished"?"Beendet":"Laufend"})]})]}),t.beschreibung&&e.jsx("p",{className:"text-sm text-text-muted border-t pt-3 mt-3 mb-3",children:t.beschreibung}),e.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t",children:[e.jsxs("button",{onClick:()=>v(t),className:"text-primary-blue hover:text-primary-blue-dark text-sm font-medium",disabled:l,children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Bearbeiten"]}),e.jsxs("button",{onClick:()=>y(t.id),className:"text-accent-red hover:text-red-700 text-sm font-medium",disabled:l,children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Löschen"]})]})]},t.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-text-muted mb-4",children:e.jsx("i",{className:"fas fa-futbol text-4xl opacity-50"})}),e.jsx("h3",{className:"text-lg font-medium text-text-primary mb-2",children:"Keine Spiele gefunden"}),e.jsx("p",{className:"text-text-muted mb-4",children:"Es wurden noch keine Spiele hinzugefügt."}),e.jsx("button",{onClick:()=>c(!0),className:"btn-primary",children:"Erstes Spiel hinzufügen"})]})]})}export{w as default};
