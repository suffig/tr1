import{j as e,L as G}from"./index-aE7FU4Zm.js";import{u as b}from"./useSupabase-HPsweGxu.js";function L(){const{data:a,loading:k}=b("matches","*"),{data:l,loading:K}=b("players","*"),{data:h,loading:A}=b("spieler_des_spiels","*"),M=k||K||A,i=(a==null?void 0:a.length)||0,E=(l==null?void 0:l.length)||0,u=(l==null?void 0:l.filter(s=>s.team==="AEK"))||[],f=(l==null?void 0:l.filter(s=>s.team==="Real"))||[],v=(a==null?void 0:a.reduce((s,t)=>s+(t.goalsa||0)+(t.goalsb||0),0))||0,g=u.reduce((s,t)=>s+(t.value||0),0),p=f.reduce((s,t)=>s+(t.value||0),0),F=g+p,R=()=>{const s={};return a==null||a.forEach(t=>{let d=[];try{typeof t.goalslista=="string"?d=JSON.parse(t.goalslista):Array.isArray(t.goalslista)&&(d=t.goalslista)}catch(n){console.warn("Failed to parse goalslista in stats:",n),d=[]}d==null||d.forEach(n=>{const o=typeof n=="object"&&n!==null,x=o?n.player:n,j=o&&n.count||1;if(!s[x]){const r=l==null?void 0:l.find(N=>N.name===x);s[x]={name:x,goals:0,team:(r==null?void 0:r.team)||"AEK",value:(r==null?void 0:r.value)||0}}s[x].goals+=j});let c=[];try{typeof t.goalslistb=="string"?c=JSON.parse(t.goalslistb):Array.isArray(t.goalslistb)&&(c=t.goalslistb)}catch(n){console.warn("Failed to parse goalslistb in stats:",n),c=[]}c==null||c.forEach(n=>{const o=typeof n=="object"&&n!==null,x=o?n.player:n,j=o&&n.count||1;if(!s[x]){const r=l==null?void 0:l.find(N=>N.name===x);s[x]={name:x,goals:0,team:(r==null?void 0:r.team)||"Real",value:(r==null?void 0:r.value)||0}}s[x].goals+=j})}),Object.values(s).sort((t,d)=>d.goals-t.goals).slice(0,5)},T=()=>{const s={};return h==null||h.forEach(t=>{const d=l==null?void 0:l.find(c=>c.name===t.name&&c.team===t.team);s[t.name]={name:t.name,count:t.count||0,team:t.team,value:(d==null?void 0:d.value)||0}}),a==null||a.forEach(t=>{if(t.manofthematch){if(!s[t.manofthematch]){const d=l==null?void 0:l.find(c=>c.name===t.manofthematch);s[t.manofthematch]={name:t.manofthematch,count:0,team:(d==null?void 0:d.team)||"Unbekannt",value:(d==null?void 0:d.value)||0}}s[t.manofthematch].count++}}),Object.values(s).sort((t,d)=>d.count-t.count).slice(0,10)},m=R(),y=T(),S=(a==null?void 0:a.filter(s=>s.teama==="AEK"&&s.goalsa>s.goalsb||s.teamb==="AEK"&&s.goalsb>s.goalsa).length)||0,w=(a==null?void 0:a.filter(s=>s.teama==="Real"&&s.goalsa>s.goalsb||s.teamb==="Real"&&s.goalsb>s.goalsa).length)||0;return M?e.jsx(G,{message:"Lade Statistiken..."}):e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-2",children:"Statistiken"}),e.jsx("p",{className:"text-text-muted",children:"Übersicht über alle wichtigen Zahlen"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-green mb-2",children:i}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Spiele"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-accent-orange mb-2",children:v}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Tore"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-accent-blue mb-2",children:E}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Spieler"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-text-primary mb-2",children:i>0?(v/i).toFixed(1):"0.0"}),e.jsx("div",{className:"text-sm text-text-muted",children:"⌀ Tore/Spiel"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Marktwert-Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"modern-card text-center border-l-4 border-blue-400",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:[g.toFixed(1),"M €"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"AEK Kaderwert"})]}),e.jsxs("div",{className:"modern-card text-center border-l-4 border-red-400",children:[e.jsxs("div",{className:"text-2xl font-bold text-red-600 mb-2",children:[p.toFixed(1),"M €"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Real Kaderwert"})]}),e.jsxs("div",{className:"modern-card text-center border-l-4 border-green-400",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-2",children:[F.toFixed(1),"M €"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gesamt Kaderwert"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"Team-Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"modern-card border-l-4 border-blue-400",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:"text-2xl mr-3",children:"🔵"}),e.jsx("h4",{className:"text-lg font-semibold text-blue-600",children:"AEK Athen"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Spieler:"}),e.jsx("span",{className:"font-medium",children:u.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Siege:"}),e.jsx("span",{className:"font-medium text-primary-green",children:S})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Siegesrate:"}),e.jsxs("span",{className:"font-medium",children:[i>0?(S/i*100).toFixed(1):"0.0","%"]})]})]})]}),e.jsxs("div",{className:"modern-card border-l-4 border-purple-400",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:"text-2xl mr-3",children:"🟣"}),e.jsx("h4",{className:"text-lg font-semibold text-purple-600",children:"Real Madrid"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Spieler:"}),e.jsx("span",{className:"font-medium",children:f.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Siege:"}),e.jsx("span",{className:"font-medium text-primary-green",children:w})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Siegesrate:"}),e.jsxs("span",{className:"font-medium",children:[i>0?(w/i*100).toFixed(1):"0.0","%"]})]})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"⚽ Top Torschützen"}),m.length>0?e.jsx("div",{className:"space-y-3",children:m.map((s,t)=>e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:`text-2xl font-bold ${t===0?"text-yellow-500":t===1?"text-gray-400":t===2?"text-orange-600":"text-text-muted"}`,children:["#",t+1]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:s.name}),e.jsxs("div",{className:"text-sm text-text-muted",children:[s.team," • Marktwert: ",s.value.toFixed(1),"M €"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:s.goals}),e.jsx("div",{className:"text-xs text-text-muted",children:"Tore"})]})]})},s.name))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⚽"}),e.jsx("p",{className:"text-text-muted",children:"Noch keine Torschützen verfügbar"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"⭐ Spieler des Spiels (SdS)"}),y.length>0?e.jsx("div",{className:"space-y-3",children:y.map((s,t)=>e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:`text-2xl font-bold ${t===0?"text-yellow-500":t===1?"text-gray-400":t===2?"text-orange-600":"text-text-muted"}`,children:["#",t+1]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:s.name}),e.jsxs("div",{className:"text-sm text-text-muted",children:[s.team," • Marktwert: ",s.value.toFixed(1),"M €"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.count}),e.jsx("div",{className:"text-xs text-text-muted",children:"SdS"})]})]})},s.name))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⭐"}),e.jsx("p",{className:"text-text-muted",children:"Noch keine Spieler des Spiels vergeben"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"📊 Weitere Statistiken"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange mb-2",children:(a==null?void 0:a.filter(s=>s.goalsa===s.goalsb).length)||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Unentschieden"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-red mb-2",children:(a==null?void 0:a.reduce((s,t)=>s+(t.reda||0)+(t.redb||0),0))||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Rote Karten"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-2",children:(a==null?void 0:a.reduce((s,t)=>s+(t.yellowa||0)+(t.yellowb||0),0))||0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Gelbe Karten"})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green mb-2",children:i>0?Math.max(...a.map(s=>(s.goalsa||0)+(s.goalsb||0))):0}),e.jsx("div",{className:"text-sm text-text-muted",children:"Höchstes Ergebnis"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:"⚖️ Team-Vergleich"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"modern-card border-l-4 border-blue-400",children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-600 mb-3",children:"🔵 AEK Athen"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Durchschn. Tore pro Spiel:"}),e.jsx("span",{className:"font-medium",children:i>0?(a.reduce((s,t)=>s+(t.teama==="AEK"?t.goalsa||0:t.goalsb||0),0)/i).toFixed(1):"0.0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Durchschn. Gegentore:"}),e.jsx("span",{className:"font-medium",children:i>0?(a.reduce((s,t)=>s+(t.teama==="AEK"?t.goalsb||0:t.goalsa||0),0)/i).toFixed(1):"0.0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Beste Scorer:"}),e.jsx("span",{className:"font-medium",children:m.filter(s=>s.team==="AEK").length>0?m.filter(s=>s.team==="AEK")[0].name:"Keine"})]})]})]}),e.jsxs("div",{className:"modern-card border-l-4 border-red-400",children:[e.jsx("h4",{className:"text-lg font-semibold text-red-600 mb-3",children:"🔴 Real Madrid"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Durchschn. Tore pro Spiel:"}),e.jsx("span",{className:"font-medium",children:i>0?(a.reduce((s,t)=>s+(t.teamb==="Real"?t.goalsb||0:t.goalsa||0),0)/i).toFixed(1):"0.0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Durchschn. Gegentore:"}),e.jsx("span",{className:"font-medium",children:i>0?(a.reduce((s,t)=>s+(t.teamb==="Real"?t.goalsa||0:t.goalsb||0),0)/i).toFixed(1):"0.0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-muted",children:"Beste Scorer:"}),e.jsx("span",{className:"font-medium",children:m.filter(s=>s.team==="Real").length>0?m.filter(s=>s.team==="Real")[0].name:"Keine"})]})]})]})]})]}),e.jsx("div",{className:"modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Statistiken-Modul"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Grundlegende Statistiken sind implementiert. Erweiterte Analysen und Charts können bei Bedarf hinzugefügt werden."})]})]})})]})}export{L as default};
